<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set</title>
  <meta name="description" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  
  
  

<meta name="author" content="Ryan Schneider" />


<meta name="date" content="2022-02-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="misc.-stuff.html"/>
<link rel="next" href="intro-to-r-markdown.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Compendium</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Monument to my Madness</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-this-book-is-and-what-it-is-not"><i class="fa fa-check"></i><b>1.1</b> What this book is, and what it is not</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html"><i class="fa fa-check"></i><b>2</b> Introduction: R Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#importing-data"><i class="fa fa-check"></i><b>2.1</b> Importing Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#spreadsheets"><i class="fa fa-check"></i><b>2.1.1</b> Spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#exporting-i.e.-saving-data-and-output"><i class="fa fa-check"></i><b>2.2</b> Exporting (i.e., saving) Data and Output</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#exporting-to-.csv"><i class="fa fa-check"></i><b>2.2.1</b> Exporting to .CSV</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#export-to-.rdata-and-load-the-data-again-later"><i class="fa fa-check"></i><b>2.2.2</b> Export to .RData (and load the data again later)</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#export-to-excel"><i class="fa fa-check"></i><b>2.2.3</b> Export to Excel</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#accessedit-specific-cell-number-values"><i class="fa fa-check"></i><b>2.2.4</b> Access/edit specific cell number values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangle-data.html"><a href="wrangle-data.html"><i class="fa fa-check"></i><b>3</b> Wrangle Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="wrangle-data.html"><a href="wrangle-data.html#joining-or-splitting"><i class="fa fa-check"></i><b>3.1</b> Joining or Splitting</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="wrangle-data.html"><a href="wrangle-data.html#whole-data-sets"><i class="fa fa-check"></i><b>3.1.1</b> Whole Data Sets</a></li>
<li class="chapter" data-level="3.1.2" data-path="wrangle-data.html"><a href="wrangle-data.html#individual-columnsvariables"><i class="fa fa-check"></i><b>3.1.2</b> Individual Columns/Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="wrangle-data.html"><a href="wrangle-data.html#selectingextracting-specific-variables"><i class="fa fa-check"></i><b>3.2</b> Selecting/extracting specific variables</a></li>
<li class="chapter" data-level="3.3" data-path="wrangle-data.html"><a href="wrangle-data.html#if-then-and-case-when"><i class="fa fa-check"></i><b>3.3</b> If-then and Case-when</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="wrangle-data.html"><a href="wrangle-data.html#if-then"><i class="fa fa-check"></i><b>3.3.1</b> If-then</a></li>
<li class="chapter" data-level="3.3.2" data-path="wrangle-data.html"><a href="wrangle-data.html#case-when"><i class="fa fa-check"></i><b>3.3.2</b> Case-when</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrangle-data.html"><a href="wrangle-data.html#conditional-replacement-of-values"><i class="fa fa-check"></i><b>3.4</b> Conditional replacement of values</a></li>
<li class="chapter" data-level="3.5" data-path="wrangle-data.html"><a href="wrangle-data.html#merging-variables"><i class="fa fa-check"></i><b>3.5</b> Merging variables</a></li>
<li class="chapter" data-level="3.6" data-path="wrangle-data.html"><a href="wrangle-data.html#apply-a-function-to-multiple-variables-at-once"><i class="fa fa-check"></i><b>3.6</b> Apply a function to multiple variables at once</a></li>
<li class="chapter" data-level="3.7" data-path="wrangle-data.html"><a href="wrangle-data.html#pivoting-i.e.-transposing-data"><i class="fa fa-check"></i><b>3.7</b> Pivoting (i.e., transposing) data</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="wrangle-data.html"><a href="wrangle-data.html#condense-multiple-rows-into-a-single-column-pivot-wide-to-long"><i class="fa fa-check"></i><b>3.7.1</b> Condense multiple rows into a single column (pivot wide to long)</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="wrangle-data.html"><a href="wrangle-data.html#managing-many-models"><i class="fa fa-check"></i><b>3.8</b> Managing Many Models</a></li>
<li class="chapter" data-level="3.9" data-path="wrangle-data.html"><a href="wrangle-data.html#turn-row-names-into-a-columnvariable"><i class="fa fa-check"></i><b>3.9</b> Turn row names into a column/variable</a></li>
<li class="chapter" data-level="3.10" data-path="wrangle-data.html"><a href="wrangle-data.html#how-to-editchange-column-names"><i class="fa fa-check"></i><b>3.10</b> How to edit/change column names</a></li>
<li class="chapter" data-level="3.11" data-path="wrangle-data.html"><a href="wrangle-data.html#re-order-columns-in-a-data-set"><i class="fa fa-check"></i><b>3.11</b> Re-order columns in a data set</a></li>
<li class="chapter" data-level="3.12" data-path="wrangle-data.html"><a href="wrangle-data.html#date-and-time-variables"><i class="fa fa-check"></i><b>3.12</b> Date and time variables</a>
<ul>
<li class="chapter" data-level="3.12.1" data-path="wrangle-data.html"><a href="wrangle-data.html#find-the-difference-between-two-datestimes"><i class="fa fa-check"></i><b>3.12.1</b> Find the difference between two dates/times</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="wrangle-data.html"><a href="wrangle-data.html#reverse-code-a-variable"><i class="fa fa-check"></i><b>3.13</b> Reverse-code a variable</a></li>
<li class="chapter" data-level="3.14" data-path="wrangle-data.html"><a href="wrangle-data.html#create-a-relative-ranking-among-several-variables"><i class="fa fa-check"></i><b>3.14</b> Create a relative ranking among several variables</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clean-data.html"><a href="clean-data.html"><i class="fa fa-check"></i><b>4</b> Clean Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="clean-data.html"><a href="clean-data.html#replace-a-value-with-na"><i class="fa fa-check"></i><b>4.1</b> Replace a value with NA</a></li>
<li class="chapter" data-level="4.2" data-path="clean-data.html"><a href="clean-data.html#replace-nas-with-a-value"><i class="fa fa-check"></i><b>4.2</b> Replace NA’s with a value</a></li>
<li class="chapter" data-level="4.3" data-path="clean-data.html"><a href="clean-data.html#identify-columns-or-rows-with-missing-values"><i class="fa fa-check"></i><b>4.3</b> Identify columns or rows with Missing values</a></li>
<li class="chapter" data-level="4.4" data-path="clean-data.html"><a href="clean-data.html#find-the-percentage-of-a-variable-that-is-missing"><i class="fa fa-check"></i><b>4.4</b> Find the percentage of a variable that is missing</a></li>
<li class="chapter" data-level="4.5" data-path="clean-data.html"><a href="clean-data.html#exclude-missing-values-from-analysis"><i class="fa fa-check"></i><b>4.5</b> Exclude Missing values from analysis</a></li>
<li class="chapter" data-level="4.6" data-path="clean-data.html"><a href="clean-data.html#dropping-missing-values-from-the-data-set"><i class="fa fa-check"></i><b>4.6</b> Dropping Missing values from the data set</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-with-factors.html"><a href="working-with-factors.html"><i class="fa fa-check"></i><b>5</b> Working with Factors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="working-with-factors.html"><a href="working-with-factors.html#manually-recodechange-a-factors-levels"><i class="fa fa-check"></i><b>5.1</b> Manually recode/change a factor’s levels</a></li>
<li class="chapter" data-level="5.2" data-path="working-with-factors.html"><a href="working-with-factors.html#collapse-factor-levels"><i class="fa fa-check"></i><b>5.2</b> Collapse factor levels</a></li>
<li class="chapter" data-level="5.3" data-path="working-with-factors.html"><a href="working-with-factors.html#add-levels-to-a-factor"><i class="fa fa-check"></i><b>5.3</b> Add levels to a factor</a></li>
<li class="chapter" data-level="5.4" data-path="working-with-factors.html"><a href="working-with-factors.html#drop-unused-levels"><i class="fa fa-check"></i><b>5.4</b> Drop unused levels</a></li>
<li class="chapter" data-level="5.5" data-path="working-with-factors.html"><a href="working-with-factors.html#change-the-order-of-a-factors-levels"><i class="fa fa-check"></i><b>5.5</b> Change the order of a factor’s levels</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-with-strings.html"><a href="working-with-strings.html"><i class="fa fa-check"></i><b>6</b> Working with Strings</a>
<ul>
<li class="chapter" data-level="6.1" data-path="working-with-strings.html"><a href="working-with-strings.html#remove-a-pattern-from-a-string"><i class="fa fa-check"></i><b>6.1</b> Remove a pattern from a string</a></li>
<li class="chapter" data-level="6.2" data-path="working-with-strings.html"><a href="working-with-strings.html#replace-one-pattern-in-a-string-with-another"><i class="fa fa-check"></i><b>6.2</b> Replace one pattern in a string with another</a></li>
<li class="chapter" data-level="6.3" data-path="working-with-strings.html"><a href="working-with-strings.html#find-i.e.-filter-for-all-instances-of-a-string"><i class="fa fa-check"></i><b>6.3</b> Find (i.e., filter for) all instances of a string</a></li>
<li class="chapter" data-level="6.4" data-path="working-with-strings.html"><a href="working-with-strings.html#drop-all-rows-from-a-data-set-that-contain-a-certain-string"><i class="fa fa-check"></i><b>6.4</b> Drop all rows from a data set that contain a certain string</a></li>
<li class="chapter" data-level="6.5" data-path="working-with-strings.html"><a href="working-with-strings.html#force-all-letters-to-lower-case"><i class="fa fa-check"></i><b>6.5</b> Force all letters to lower case</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html"><i class="fa fa-check"></i><b>7</b> Figures and Graphs with the ggplot and see packages</a>
<ul>
<li class="chapter" data-level="7.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#commands-for-ggplot-graph-types"><i class="fa fa-check"></i><b>7.1</b> Commands for ggplot graph types</a></li>
<li class="chapter" data-level="7.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#specific-commands-for-specific-types-of-analysis"><i class="fa fa-check"></i><b>7.2</b> Specific Commands for Specific Types of Analysis</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#lavaan-stuff"><i class="fa fa-check"></i><b>7.2.1</b> lavaan stuff</a></li>
<li class="chapter" data-level="7.2.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#bayes-stuff"><i class="fa fa-check"></i><b>7.2.2</b> Bayes stuff</a></li>
<li class="chapter" data-level="7.2.3" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#histograms-and-density-curves"><i class="fa fa-check"></i><b>7.2.3</b> Histograms and density curves</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#highlight-specific-points"><i class="fa fa-check"></i><b>7.3</b> Highlight specific points</a></li>
<li class="chapter" data-level="7.4" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-labels-to-data-points"><i class="fa fa-check"></i><b>7.4</b> Add labels to data points</a></li>
<li class="chapter" data-level="7.5" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#plotting-multiple-graphs-at-once"><i class="fa fa-check"></i><b>7.5</b> Plotting multiple graphs at once</a></li>
<li class="chapter" data-level="7.6" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#change-the-colors-bars-columns-dots-etc."><i class="fa fa-check"></i><b>7.6</b> Change the colors (bars; columns; dots; etc.)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#fine-tuning-colors"><i class="fa fa-check"></i><b>7.6.1</b> Fine-tuning colors</a></li>
<li class="chapter" data-level="7.6.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#more-options-with-the-see-package"><i class="fa fa-check"></i><b>7.6.2</b> More options with the see package</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#other-aesthetic-mappings"><i class="fa fa-check"></i><b>7.7</b> Other aesthetic mappings</a></li>
<li class="chapter" data-level="7.8" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#adding-and-customizing-text"><i class="fa fa-check"></i><b>7.8</b> Adding and Customizing Text</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-title-axis-labels-and-captions"><i class="fa fa-check"></i><b>7.8.1</b> Add a title, axis labels, and captions</a></li>
<li class="chapter" data-level="7.8.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#center-graph-title"><i class="fa fa-check"></i><b>7.8.2</b> Center graph title</a></li>
<li class="chapter" data-level="7.8.3" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#use-different-fonts"><i class="fa fa-check"></i><b>7.8.3</b> Use different fonts</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#remove-gridlines"><i class="fa fa-check"></i><b>7.9</b> Remove gridlines</a></li>
<li class="chapter" data-level="7.10" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#faceting"><i class="fa fa-check"></i><b>7.10</b> Faceting</a></li>
<li class="chapter" data-level="7.11" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#log-transformations"><i class="fa fa-check"></i><b>7.11</b> Log transformations</a></li>
<li class="chapter" data-level="7.12" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#changing-the-scale-of-the-axis"><i class="fa fa-check"></i><b>7.12</b> Changing the scale of the axis</a></li>
<li class="chapter" data-level="7.13" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-regression-line"><i class="fa fa-check"></i><b>7.13</b> Add a regression line</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html"><i class="fa fa-check"></i><b>8</b> Making Tables with flextable</a>
<ul>
<li class="chapter" data-level="8.1" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#apa-table-components"><i class="fa fa-check"></i><b>8.1</b> APA Table Components</a></li>
<li class="chapter" data-level="8.2" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#indent-values"><i class="fa fa-check"></i><b>8.2</b> Indent values</a></li>
<li class="chapter" data-level="8.3" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#add-a-horizontal-border-aka-horizontal-spanner"><i class="fa fa-check"></i><b>8.3</b> Add a Horizontal border (AKA horizontal “spanner”)</a></li>
<li class="chapter" data-level="8.4" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#change-font-and-font-size"><i class="fa fa-check"></i><b>8.4</b> Change font and font size</a></li>
<li class="chapter" data-level="8.5" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#grouped-table"><i class="fa fa-check"></i><b>8.5</b> Grouped table</a></li>
<li class="chapter" data-level="8.6" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#complete-example"><i class="fa fa-check"></i><b>8.6</b> Complete Example</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="misc.-stuff.html"><a href="misc.-stuff.html"><i class="fa fa-check"></i><b>9</b> Misc. Stuff</a>
<ul>
<li class="chapter" data-level="9.1" data-path="misc.-stuff.html"><a href="misc.-stuff.html#scrape-web-pages-for-data-tables"><i class="fa fa-check"></i><b>9.1</b> Scrape web pages for data tables</a></li>
<li class="chapter" data-level="9.2" data-path="misc.-stuff.html"><a href="misc.-stuff.html#read-spss-files-into-r"><i class="fa fa-check"></i><b>9.2</b> Read SPSS files into R</a></li>
<li class="chapter" data-level="9.3" data-path="misc.-stuff.html"><a href="misc.-stuff.html#turn-numbers-into-percentages"><i class="fa fa-check"></i><b>9.3</b> Turn numbers into percentages</a></li>
<li class="chapter" data-level="9.4" data-path="misc.-stuff.html"><a href="misc.-stuff.html#find-all-possible-combindations-of-items-in-a-vector"><i class="fa fa-check"></i><b>9.4</b> Find all possible combindations of items in a vector</a></li>
<li class="chapter" data-level="9.5" data-path="misc.-stuff.html"><a href="misc.-stuff.html#download-files-from-the-internet"><i class="fa fa-check"></i><b>9.5</b> Download files from the internet</a></li>
<li class="chapter" data-level="9.6" data-path="misc.-stuff.html"><a href="misc.-stuff.html#print-multiple-things-in-one-statement"><i class="fa fa-check"></i><b>9.6</b> Print multiple things in one statement</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html"><i class="fa fa-check"></i><b>10</b> Intermediate R: Functions, Loops, and Iterative Programming</a>
<ul>
<li class="chapter" data-level="10.1" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#functions"><i class="fa fa-check"></i><b>10.1</b> Functions</a></li>
<li class="chapter" data-level="10.2" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#for-loops"><i class="fa fa-check"></i><b>10.2</b> For-loops</a></li>
<li class="chapter" data-level="10.3" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#purrr-and-iterative-functions"><i class="fa fa-check"></i><b>10.3</b> purrr and Iterative Functions</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#reproducible-example-scraping-web-data"><i class="fa fa-check"></i><b>10.3.1</b> Reproducible example: Scraping web data</a></li>
<li class="chapter" data-level="10.3.2" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#non-reproducible-example-juvenile-life-without-parole-study"><i class="fa fa-check"></i><b>10.3.2</b> Non-reproducible example (Juvenile Life Without Parole study)</a></li>
<li class="chapter" data-level="10.3.3" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#example-3-readimport-several-files-at-once-with-map"><i class="fa fa-check"></i><b>10.3.3</b> Example 3: Read/Import several files at once with <code>map()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#other-purrr-commands"><i class="fa fa-check"></i><b>10.4</b> Other purrr commands</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#the-walk-and-walk2-commands"><i class="fa fa-check"></i><b>10.4.1</b> The <code>walk</code> and <code>walk2</code> commands</a></li>
<li class="chapter" data-level="10.4.2" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#map2-and-walk2"><i class="fa fa-check"></i><b>10.4.2</b> <code>map2</code> (and <code>walk2</code>)</a></li>
<li class="chapter" data-level="10.4.3" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#pmap-for-when-you-have-a-bunch-of-shit"><i class="fa fa-check"></i><b>10.4.3</b> <code>pmap</code> for when you have a bunch of shit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html"><i class="fa fa-check"></i><b>11</b> Intro to R Markdown</a>
<ul>
<li class="chapter" data-level="11.1" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#important-code-chunk-options"><i class="fa fa-check"></i><b>11.1</b> Important code chunk options</a></li>
<li class="chapter" data-level="11.2" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#writing-math-equations-and-symbols"><i class="fa fa-check"></i><b>11.2</b> Writing math equations and symbols</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#greek-symbols"><i class="fa fa-check"></i><b>11.2.1</b> Greek symbols</a></li>
<li class="chapter" data-level="11.2.2" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#math-notation"><i class="fa fa-check"></i><b>11.2.2</b> Math notation</a></li>
<li class="chapter" data-level="11.2.3" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#statistics-notation"><i class="fa fa-check"></i><b>11.2.3</b> Statistics notation</a></li>
<li class="chapter" data-level="11.2.4" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#writing-in-line-code"><i class="fa fa-check"></i><b>11.2.4</b> Writing in-line code</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#including-graphicsinserting-pictures"><i class="fa fa-check"></i><b>11.3</b> Including graphics/inserting pictures</a></li>
<li class="chapter" data-level="11.4" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#footnotes"><i class="fa fa-check"></i><b>11.4</b> Footnotes</a></li>
<li class="chapter" data-level="11.5" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#change-the-color-of-your-text"><i class="fa fa-check"></i><b>11.5</b> Change the color of your text</a></li>
<li class="chapter" data-level="11.6" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#re-using-code-chunk-options"><i class="fa fa-check"></i><b>11.6</b> Re-using code chunk options</a></li>
<li class="chapter" data-level="11.7" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#making-better-tables"><i class="fa fa-check"></i><b>11.7</b> Making better tables</a></li>
<li class="chapter" data-level="11.8" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#running-in-line-code"><i class="fa fa-check"></i><b>11.8</b> Running in-line code</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html"><i class="fa fa-check"></i><b>12</b> Statistics and Psych-specific Stuff</a>
<ul>
<li class="chapter" data-level="12.1" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#create-or-sample-from-a-distribution"><i class="fa fa-check"></i><b>12.1</b> Create or sample from a distribution</a></li>
<li class="chapter" data-level="12.2" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#find-cohens-kappa-interrater-reliability"><i class="fa fa-check"></i><b>12.2</b> Find Cohen’s Kappa (Interrater reliability)</a></li>
<li class="chapter" data-level="12.3" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#statistical-tests-and-modeling-with-easystats"><i class="fa fa-check"></i><b>12.3</b> Statistical tests and modeling with <code>easystats</code></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#getting-parameter-estimates-from-model-objects"><i class="fa fa-check"></i><b>12.3.1</b> Getting parameter estimates from model objects</a></li>
<li class="chapter" data-level="12.3.2" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#getting-model-information-and-performance-metrics"><i class="fa fa-check"></i><b>12.3.2</b> Getting model information and performance metrics</a></li>
<li class="chapter" data-level="12.3.3" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#effect-size-info-with-effectsize"><i class="fa fa-check"></i><b>12.3.3</b> Effect size info with <code>effectsize</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#quick-detailed-and-automated-reporting-with-report"><i class="fa fa-check"></i><b>12.3.4</b> Quick, detailed, and automated reporting with <code>report</code></a></li>
<li class="chapter" data-level="12.3.5" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#running-correlations-with-correlation"><i class="fa fa-check"></i><b>12.3.5</b> Running correlations with <code>correlation</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html"><i class="fa fa-check"></i><b>13</b> Coding Tips and Tricks</a>
<ul>
<li class="chapter" data-level="13.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#grammar-stuff-in-base-r"><i class="fa fa-check"></i><b>13.1</b> Grammar stuff in base R</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#regex-expressions-and-symbols"><i class="fa fa-check"></i><b>13.1.1</b> Regex expressions and symbols</a></li>
<li class="chapter" data-level="13.1.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#the-new-pipe-base-r"><i class="fa fa-check"></i><b>13.1.2</b> The new pipe (Base R)</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#tidyverse-stuff"><i class="fa fa-check"></i><b>13.2</b> Tidyverse stuff</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#sometimes-when-making-a-function-you-need-to-use-the-colon-equals-operator-rather-than-just-the-normal---or-assignment-operators"><i class="fa fa-check"></i><b>13.2.1</b> Sometimes when making a function you need to use the colon-equals operator, rather than just the normal &lt;- or = assignment operators</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#function-related-stuff"><i class="fa fa-check"></i><b>13.3</b> Function-related stuff</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#user-supplied-expressions-or-named-columns-in-functions"><i class="fa fa-check"></i><b>13.3.1</b> User-supplied expressions or named columns in functions</a></li>
<li class="chapter" data-level="13.3.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time"><i class="fa fa-check"></i><b>13.3.2</b> When a command requires a named column or data set, but you’ve already supplied it and it’s required a second time</a></li>
<li class="chapter" data-level="13.3.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#formulas-within-functions"><i class="fa fa-check"></i><b>13.3.3</b> Formulas within functions</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#creating-a-package"><i class="fa fa-check"></i><b>13.4</b> Creating a package</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#documenting-pacakge-meta-data"><i class="fa fa-check"></i><b>13.4.1</b> Documenting pacakge meta-data</a></li>
<li class="chapter" data-level="13.4.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#connecting-to-other-packages"><i class="fa fa-check"></i><b>13.4.2</b> Connecting to other packages</a></li>
<li class="chapter" data-level="13.4.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#linking-git-and-github"><i class="fa fa-check"></i><b>13.4.3</b> Linking Git and Github</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#creating-a-bookdown"><i class="fa fa-check"></i><b>13.5</b> Creating a bookdown</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#rendering-the-book-once-its-done"><i class="fa fa-check"></i><b>13.5.1</b> Rendering the book once it’s done</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html"><i class="fa fa-check"></i><b>14</b> Creating a simulated data set</a>
<ul>
<li class="chapter" data-level="14.1" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-1-independent-samples-from-a-normal-distribution"><i class="fa fa-check"></i><b>14.1</b> Part 1: Independent samples from a normal distribution</a></li>
<li class="chapter" data-level="14.2" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-2-creating-data-sets-with-quantitative-and-categorical-variables"><i class="fa fa-check"></i><b>14.2</b> Part 2: Creating data sets with quantitative and categorical variables</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#a.-data-with-no-difference-among-groups"><i class="fa fa-check"></i><b>14.2.1</b> 2.a. DATA WITH <strong>NO DIFFERENCE</strong> AMONG GROUPS</a></li>
<li class="chapter" data-level="14.2.2" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#b.-data-with-a-difference-among-groups"><i class="fa fa-check"></i><b>14.2.2</b> 2.b. Data <strong>WITH A DIFFERENCE</strong> among groups</a></li>
<li class="chapter" data-level="14.2.3" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#c.-data-with-multiple-quantitative-variables-with-groups"><i class="fa fa-check"></i><b>14.2.3</b> 2.c. Data with <strong>MULTIPLE QUANTITATIVE VARIABLES</strong> with groups</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-3-repeatedly-simulate-samples-with-replicate"><i class="fa fa-check"></i><b>14.3</b> Part 3: Repeatedly simulate samples with replicate()</a></li>
<li class="chapter" data-level="14.4" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-4-repeatedly-making-whole-data-sets"><i class="fa fa-check"></i><b>14.4</b> Part 4: repeatedly making whole data sets</a></li>
<li class="chapter" data-level="14.5" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-5-using-purrr"><i class="fa fa-check"></i><b>14.5</b> Part 5: Using purrr</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating a simulated data set</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intermediate-r-functions-loops-and-iterative-programming" class="section level1" number="10">
<h1><span class="header-section-number">Chapter 10</span> Intermediate R: Functions, Loops, and Iterative Programming</h1>
<div id="functions" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Functions</h2>
<p>A function is a command that performs a specified operation and returns
an output in accordance with that operation. You can literally make a
function to do anything you want.</p>
<p><em>General structure of a basic function:</em></p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example structure</span></span>
<span id="cb176-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb176-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb176-3" aria-hidden="true" tabindex="-1"></a>Function_name<span class="ot">=</span><span class="cf">function</span>(argument){</span>
<span id="cb176-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb176-4" aria-hidden="true" tabindex="-1"></a>  Expressions</span>
<span id="cb176-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb176-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(output)</span>
<span id="cb176-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb176-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li><em>Argument</em> is your input. It is the thing you want to perform the
operation on.</li>
<li><em>Expressions</em> is the actual operation (or operations) you want to
perform on the supplied argument</li>
<li><em>return</em> tells R to return the result of the Expression to you when
done.</li>
</ul>
<p>This example function takes an input of numbers in the form of a vector
and subtracts two from each.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-1" aria-hidden="true" tabindex="-1"></a>numbers<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">80</span>)</span>
<span id="cb177-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-3" aria-hidden="true" tabindex="-1"></a>sub_2<span class="ot">=</span><span class="cf">function</span>(x){</span>
<span id="cb177-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-4" aria-hidden="true" tabindex="-1"></a>  result<span class="ot">=</span> x <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb177-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb177-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb177-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb177-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(numbers)</span></code></pre></div>
<pre><code>## [1]  0  8 10 78</code></pre>
<p>We can also supply the function with a single number and it still works…</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 98</code></pre>
<p><strong><em>Well this looks useful. So what’s the bigger picture?</em></strong></p>
<p>One of the primary advantages of functions are that they can reduce a long and
complex process, or a process that involves many steps, into a <em>single line of code</em>; thus, creating your own functions is a fast way to make
your life easier down the line either at some point in the far future or
even in just a few minutes, if you know you will be writing the code for
some process two or more times.</p>
<p>Take this script for instance. You can see from the circled parts that I
needed to transform three different data sets in a similar way:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb181-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;repeat_process.jpg&quot;</span>))</span></code></pre></div>
<p><img src="pics/repeat_process.jpg" width="413" /></p>
<p>Yes, I could have just done a copy-paste of the original code and tweak it slightly each time….
But that is time consuming, produces a sloppier and longer script, and introduces a lot more room for error because of the repeated code and extra steps.</p>
<p>Better to write a single function that could be applied to all three….</p>
<p><strong><em>In short, use functions to reduce a multi-step process or a process
that you’re implementing &gt;=2 times in a single script into one command.
This saves you space and makes the script shorter; it saves you the
trouble and effort of re-writing or adapting code from earlier sections;
and importantly, reduces the chances of you making a coding error by
proxy of the former two.</em></strong></p>
<p>As a quick example, I was able to replace each of the circled paragraphs of code above with a custom function that ran
everything in one simple line. Now instead of 3 whole (and redundant) paragraphs, I now have 3 short lines, like so….</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb182-1" aria-hidden="true" tabindex="-1"></a>na_zero_helpreint<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint,</span>
<span id="cb182-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb182-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">variable_prefix =</span> <span class="st">&quot;reintegrate_&quot;</span>)</span>
<span id="cb182-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb182-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb182-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span>
<span id="cb182-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb182-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb182-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span></code></pre></div>
<p><strong>Limitations to your average, everyday functions.</strong> While reducing a
whole <em>process or sequence</em> of commands is extremely useful, it still
leaves a limitation. For instance, while we avoided copying and pasting
whole paragraphs or processes, I still had to copy-paste the same
function three times. <em>This still leaves chances for error on the table, and it still leaves us with wasted lines that make the script longer.</em></p>
<p>In general, when you want to perform some function or process <strong>multiple times on multiple items (as above where the same command is used three times on three different data frames)</strong>, you need to use a for-loop or
iterating function. These can reduce further unwanted redundancies by applying the function or process iteratively. Read on for more info.</p>
</div>
<div id="for-loops" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> For-loops</h2>
<p>A for loop is essentially a function that applies a function or given
set of operations to multiple things at once, and returns an output of
many items.</p>
<p>For example, this code finds the means of every vector/column in a
dataset by repeatedly applying the same code over and over to element
“i” in the given list:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb183-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb183-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb183-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb183-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb183-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb183-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-8" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">ncol</span>(df))  <span class="co"># 1.Output. Create the object you want the results of the loop stored in.</span></span>
<span id="cb183-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {            <span class="co"># 2.Sequence of operations. &quot;For each item &#39;i&#39; along data frame…&quot;</span></span>
<span id="cb183-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-11" aria-hidden="true" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])      <span class="co"># 3.Body:&quot;every individual item in &#39;output&#39; = the median of each col in df</span></span>
<span id="cb183-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb183-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb183-14" aria-hidden="true" tabindex="-1"></a>output</span></code></pre></div>
<pre><code>## [1]  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>Check out <a href="https://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments">this book
chapter</a>
for a great and detailed explanation of for-loops and functional coding.</p>
<p>Although for loops are nice, they are unwieldy. R programmers typically
use iterating functions instead. Examples of iterating functions are the
<code>lapply</code>, <code>vapply</code>, <code>sapply</code>, etc. family of base R commands. But these can
also be confusing and the commands are not great.</p>
<p>The purrr package offers a better way to do iterating functions over
base R; it’s the tidyverse way to make efficient and understandable for
loops! <strong>If you have a need for a for-loop for something, see the next
section instead on how to use purrr to make an iterative function.
Important to understand conceptually what a for-loop is, but using them
is impractical when you have purrr</strong></p>
</div>
<div id="purrr-and-iterative-functions" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> purrr and Iterative Functions</h2>
<p><em>All notes here come from Charlotte Wickham’s lecture tutorial below</em></p>
<ul>
<li>Part 1: <a href="https://www.youtube.com/watch?v=7UlWJWfZO9M" class="uri">https://www.youtube.com/watch?v=7UlWJWfZO9M</a></li>
<li>Part 2: <a href="https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s" class="uri">https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s</a></li>
</ul>
<p>purrr’s <code>map()</code> series of functions offer a way to apply any existing
function (even functions you’ve made) to multiple things at once, be it
lists, data frame columns, individual items in vector, etc. In short,
they are for doing the same type of task repeatedly in a very quick and
efficient manner. They work in much the same way as for-loops, but are
far simpler to write, and can be applied in the same way to solve the
same problems.</p>
<p><strong><em>How to use purrr</em></strong></p>
<p>The structure of <code>map()</code> commands is the same as the others in the
tidyverse:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co">#option 1</span></span>
<span id="cb185-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(data, <span class="cf">function</span>)</span>
<span id="cb185-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb185-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="co"># option 2</span></span>
<span id="cb185-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb185-5" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="cf">function</span>)</span></code></pre></div>
<p>As a quick example and to highlight why purrr is so much more efficient
and easier to use than for-loops, look at the same example from before,
now using <code>map()</code> instead of a <code>for</code>:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb186-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(median)</span></code></pre></div>
<pre><code>##          a          b          c          d 
##  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>A single line is all it took to get the same results! And, it follows
tidyverse grammar structure.</p>
<p>Now lets get into how it works….</p>
<p><em>map() commands work like this:</em> For each element of x, do f.</p>
<p>So if you pass it object <code>x</code> and object <code>x</code> is….
- A vector, it will perform function f on every item in the vector
- A data frame, it will perform function f on every <em>column</em> in the data frame
- A list, it will perform function f on every <em>level in the list</em></p>
<p>Etc., etc.; the point is it applies a function repeatedly to every
element in the object you supply it with.</p>
<p>So lets walk through a case example.</p>
<div id="reproducible-example-scraping-web-data" class="section level3" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Reproducible example: Scraping web data</h3>
<p>This is an example walk through showing how we can use <code>purrr</code> to speed
things up dramatically and/or reduce the use of unwanted, extra code in
our scripts. In this guide I’ll be building a table of LPGA Tour
statistics from multiple webpages.</p>
<p>The workflow for purrr goes like this:</p>
<p>First, you want to figure out how to do each step of your process
line-by-line, for a single item. The idea is to try and walk through
each step of the process and see exactly what will need to be done each
each step and what the code will like, before trying to code it all at
once at a higher level.</p>
<p>Once you have each step for the first item figured out, then you make functions
for each step that condense that code down to one command.</p>
<p>Lastly, apply each function from your individual steps to all items in
your list by using <code>purr::map()</code>.</p>
<p><strong><em>Do for One</em></strong></p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb188-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 1</span></span>
<span id="cb188-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure out a line-by-line process for one item/one single web page</span></span>
<span id="cb188-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-5" aria-hidden="true" tabindex="-1"></a>html1<span class="ot">=</span><span class="fu">read_html</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb188-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb188-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb188-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb188-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-9" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb188-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb188-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(html1)</span></code></pre></div>
<pre><code>##   rank               name distance
## 1    1 Bianca Pagdanganan  284.000
## 2    2     Emily Pedersen  276.750
## 3    3      Lexi Thompson  276.286
## 4    4       Charley Hull  275.714
## 5    5       Alana Uriell  274.000
## 6    6      Frida Kinhult  273.750</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2</span></span>
<span id="cb190-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create a custom function of the above to shorten and generalize the process</span></span>
<span id="cb190-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-3" aria-hidden="true" tabindex="-1"></a>quick_read_html<span class="ot">=</span><span class="cf">function</span>(url){</span>
<span id="cb190-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-4" aria-hidden="true" tabindex="-1"></a>  web_page<span class="ot">=</span><span class="fu">read_html</span>(url) <span class="sc">|&gt;</span> </span>
<span id="cb190-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># fortunately this node works for all four pages so it can be baked into the function</span></span>
<span id="cb190-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb190-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb190-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-8" aria-hidden="true" tabindex="-1"></a>    janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb190-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(web_page)</span>
<span id="cb190-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb190-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-15" aria-hidden="true" tabindex="-1"></a><span class="co"># test to verify it works</span></span>
<span id="cb190-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-16" aria-hidden="true" tabindex="-1"></a>test<span class="ot">=</span><span class="fu">quick_read_html</span>(<span class="at">url=</span> <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>) </span>
<span id="cb190-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test) <span class="co"># nice </span></span></code></pre></div>
<pre><code>##   rank              name putt_average
## 1    1     Leona Maguire        1.655
## 2    2     Danielle Kang        1.661
## 3    3  Brooke Henderson        1.701
## 4    4        Su-Hyun Oh        1.707
## 5    5   Carlota Ciganda        1.711
## 6    6 Madelene Sagstrom        1.711</code></pre>
<p><strong><em>DO FOR ALL.</em></strong>
Now create the object that contains all the elements you want to iterate over, and then pass it to your generalized function with map.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3a</span></span>
<span id="cb192-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create an object that contains ALL elements of interest</span></span>
<span id="cb192-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-3" aria-hidden="true" tabindex="-1"></a>URLs<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>,</span>
<span id="cb192-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>,</span>
<span id="cb192-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=06&quot;</span>,</span>
<span id="cb192-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=12&quot;</span>)</span>
<span id="cb192-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb192-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-9" aria-hidden="true" tabindex="-1"></a><span class="co"># use the power of map and be amazed</span></span>
<span id="cb192-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-10" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> URLs <span class="sc">|&gt;</span> <span class="fu">map</span>(quick_read_html)</span>
<span id="cb192-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>## [[1]]
##     rank                     name distance
## 1      1       Bianca Pagdanganan  284.000
## 2      2           Emily Pedersen  276.750
## 3      3            Lexi Thompson  276.286
## 4      4             Charley Hull  275.714
## 5      5             Alana Uriell  274.000
## 6      6            Frida Kinhult  273.750
## 7      7 Pauline Roussin-Bouchard  273.071
## 8      8            Janie Jackson  270.600
## 9      9          Jennifer Kupcho  270.333
## 10    10     Nanna Koerstz Madsen  270.300
## 11    11              Maria Fassi  270.125
## 12    12                Yuka Saso  270.050
## 13    13        Patty Tavatanakit  269.773
## 14    14         Brooke Henderson  268.727
## 15    15              Nelly Korda  268.636
## 16    16              Luna Sobron  268.500
## 17    17          Carlota Ciganda  268.143
## 18    18           Amanda Doherty  267.750
## 19    19         Atthaya Thitikul  267.429
## 20   20t           Cydney Clanton  266.714
## 21   20t           Rachel Rohanna  266.714
## 22    22               Sarah Kemp  265.750
## 23    23             Peiyun Chien  265.375
## 24   24t    Fatima Fernandez Cano  265.200
## 25   24t              Yealimi Noh  265.200
## 26    26                 Amy Yang  265.071
## 27    27        Madelene Sagstrom  265.045
## 28   28t            Agathe Laisne  264.500
## 29   28t          Giulia Molinaro  264.500
## 30    30                 Xiyu Lin  264.286
## 31    31         Jaye Marie Green  263.917
## 32    32                A Lim Kim  263.909
## 33    33               Alison Lee  263.900
## 34    34           Gerina Mendoza  263.417
## 35    35             Laura Davies  263.400
## 36    36      Maude-Aimee Leblanc  262.833
## 37    37           Allisen Corpuz  262.333
## 38    38         Stephanie Meadow  262.250
## 39    39          Sophia Schubert  261.917
## 40    40              Hyejin Choi  261.429
## 41    41           Gemma Dryburgh  261.167
## 42    42            Jennifer Song  261.125
## 43    43          Lauren Coughlin  260.625
## 44    44                 Lilia Vu  260.571
## 45    45       Brittany Lincicome  260.071
## 46    46            Jessica Korda  259.875
## 47    47                Isi Gabsa  259.833
## 48    48   Katherine Perry-Hamski  259.800
## 49    49           Katherine Kirk  259.625
## 50    50            Ryann O&#39;Toole  259.591
## 51    51               Annie Park  259.500
## 52    52               Ally Ewing  259.300
## 53    53         Ariya Jutanugarn  258.889
## 54    54                   Yu Liu  258.375
## 55    55            Jeong Eun Lee  258.357
## 56    56             Georgia Hall  258.273
## 57    57                 Lydia Ko  258.063
## 58    58            Leona Maguire  257.500
## 59    59               Ruixin Liu  257.200
## 60    60          Angela Stanford  257.000
## 61    61                Ana Belac  256.875
## 62    62             Nasa Hataoka  256.727
## 63    63         Esther Henseleit  256.500
## 64    64         Perrine Delacour  256.429
## 65    65             Sophia Popov  256.375
## 66    66               Lauren Kim  256.000
## 67    67         Linnea Johansson  255.929
## 68   68t          Casey Danielson  255.375
## 69   68t             Cristie Kerr  255.375
## 70    70               Gaby Lopez  255.300
## 71    71             Jeongeun Lee  255.250
## 72    72        Lauren Stephenson  254.786
## 73    73       Jodi Ewart Shadoff  254.714
## 74    74                 Mel Reid  254.250
## 75    75           Jennifer Chang  254.000
## 76    76        Pernilla Lindberg  253.800
## 77    77               Paula Reto  253.700
## 78    78          Cheyenne Knight  253.600
## 79    79         Elizabeth Szokol  253.250
## 80    80          Sarah Schmelzel  253.143
## 81    81                Angel Yin  253.000
## 82    82               Jenny Shin  252.929
## 83    83                Amy Olson  252.786
## 84    84      Jasmine Suwannapura  252.571
## 85    85     Pajaree Anannarukarn  252.409
## 86    86            Danielle Kang  252.313
## 87    87                Na Rin An  252.071
## 88    88             Austin Ernst  252.056
## 89    89         Wichanee Meechai  252.000
## 90    90        Brittany Altomare  251.900
## 91    91            Jenny Coleman  251.875
## 92    92        Albane Valenzuela  251.500
## 93    93                  Muni He  251.250
## 94    94              Megan Khang  250.929
## 95    95               Dewi Weber  250.500
## 96    96           Hee Young Park  250.400
## 97    97           Celine Boutier  250.364
## 98    98        Pornanong Phatlum  250.214
## 99    99               Andrea Lee  249.750
## 100  100              In Gee Chun  249.286
## 101  101          Caroline Masson  249.200
## 102  102               Su-Hyun Oh  249.071
## 103  103                Kelly Tan  248.929
## 104  104             Mina Harigae  248.875
## 105  105          Morgane Metraux  248.500
## 106  106            Brittany Lang  248.417
## 107  107           Anna Nordqvist  248.227
## 108  108               Bronte Law  247.643
## 109  109              Ayaka Furue  246.714
## 110  110              Marina Alex  246.571
## 111  111             Yae Eun Hong  246.500
## 112  112           Lindsey Weaver  246.357
## 113  113        Moriya Jutanugarn  245.389
## 114  114           Ashleigh Buhai  245.125
## 115  115          Matilda Castren  244.833
## 116  116            Marissa Steen  244.200
## 117  117               Heaji Kang  243.875
## 118  118             Na Yeon Choi  242.750
## 119  119              Emma Talley  242.000
## 120  120              Karrie Webb  241.625
## 121  121            Christina Kim  240.083
## 122  122              Stacy Lewis  238.682
## 123  123                Mirim Lee  238.563
## 124  124            Allison Emrey  237.083
## 125  125              Aditi Ashok  236.429
## 126  126        Michelle Wie West  235.875
## 127  127               Inbee Park  235.056
## 128  128         Dana Finkelstein  234.786
## 129  129           Beatriz Recari  228.250
## 
## [[2]]
##     rank                     name putt_average
## 1      1            Leona Maguire        1.655
## 2      2            Danielle Kang        1.661
## 3      3         Brooke Henderson        1.701
## 4      4               Su-Hyun Oh        1.707
## 5      5          Carlota Ciganda        1.711
## 6      6        Madelene Sagstrom        1.711
## 7      7             Georgia Hall        1.715
## 8      8        Lauren Stephenson        1.718
## 9      9           Gemma Dryburgh        1.719
## 10    10               Inbee Park        1.719
## 11    11        Patty Tavatanakit        1.719
## 12    12     Nanna Koerstz Madsen        1.721
## 13    13            Jeong Eun Lee        1.723
## 14    14            Lexi Thompson        1.724
## 15   15t             Yae Eun Hong        1.726
## 16   15t Pauline Roussin-Bouchard        1.726
## 17    17           Celine Boutier        1.729
## 18    18          Caroline Masson        1.731
## 19    19        Pernilla Lindberg        1.737
## 20    20          Sarah Schmelzel        1.739
## 21    21            Jessica Korda        1.745
## 22    22           Amanda Doherty        1.746
## 23    23          Morgane Metraux        1.746
## 24    24              Nelly Korda        1.750
## 25    25              Stacy Lewis        1.752
## 26    26         Linnea Johansson        1.753
## 27    27          Cheyenne Knight        1.754
## 28    28         Perrine Delacour        1.756
## 29    29                Isi Gabsa        1.756
## 30    30              Yealimi Noh        1.758
## 31    31                 Lilia Vu        1.761
## 32    32             Charley Hull        1.765
## 33    33                Yuka Saso        1.767
## 34    34               Bronte Law        1.767
## 35   35t              Ayaka Furue        1.769
## 36   35t           Hee Young Park        1.769
## 37   37t              Aditi Ashok        1.773
## 38   37t           Lindsey Weaver        1.773
## 39    39                 Lydia Ko        1.774
## 40    40          Angela Stanford        1.774
## 41    41           Rachel Rohanna        1.775
## 42    42                 Xiyu Lin        1.776
## 43    43       Brittany Lincicome        1.776
## 44   44t        Brittany Altomare        1.778
## 45   44t               Heaji Kang        1.778
## 46    46            Janie Jackson        1.780
## 47    47             Laura Davies        1.781
## 48   48t              Megan Khang        1.783
## 49   48t                 Amy Yang        1.783
## 50    50            Ryann O&#39;Toole        1.786
## 51    51              Marina Alex        1.789
## 52   52t           Allisen Corpuz        1.791
## 53   52t               Ally Ewing        1.791
## 54   52t               Gaby Lopez        1.791
## 55   55t              Hyejin Choi        1.792
## 56   55t               Andrea Lee        1.792
## 57    57             Nasa Hataoka        1.792
## 58    58      Maude-Aimee Leblanc        1.795
## 59    59                  Muni He        1.797
## 60    60                Na Rin An        1.798
## 61    61                Amy Olson        1.802
## 62    62     Pajaree Anannarukarn        1.806
## 63    63                A Lim Kim        1.807
## 64    64               Sarah Kemp        1.808
## 65    65    Fatima Fernandez Cano        1.810
## 66    66            Christina Kim        1.813
## 67    67          Sophia Schubert        1.816
## 68   68t           Cydney Clanton        1.816
## 69   68t               Jenny Shin        1.816
## 70    70         Dana Finkelstein        1.817
## 71   71t            Agathe Laisne        1.818
## 72   71t           Gerina Mendoza        1.818
## 73   71t               Dewi Weber        1.818
## 74    74         Atthaya Thitikul        1.819
## 75    75           Jennifer Chang        1.821
## 76    76              In Gee Chun        1.822
## 77    77          Jennifer Kupcho        1.825
## 78    78        Moriya Jutanugarn        1.826
## 79   79t              Maria Fassi        1.830
## 80   79t                   Yu Liu        1.830
## 81    81               Ruixin Liu        1.831
## 82    82             Na Yeon Choi        1.833
## 83    83   Katherine Perry-Hamski        1.844
## 84    84         Stephanie Meadow        1.847
## 85    85                Kelly Tan        1.849
## 86    86             Sophia Popov        1.851
## 87   87t            Frida Kinhult        1.852
## 88   87t               Alison Lee        1.852
## 89    89       Jodi Ewart Shadoff        1.853
## 90    90               Annie Park        1.855
## 91    91               Lauren Kim        1.857
## 92    92          Lauren Coughlin        1.860
## 93    93      Jasmine Suwannapura        1.860
## 94    94              Emma Talley        1.860
## 95    95         Ariya Jutanugarn        1.863
## 96    96        Pornanong Phatlum        1.864
## 97    97          Matilda Castren        1.864
## 98   98t          Giulia Molinaro        1.867
## 99   98t              Karrie Webb        1.867
## 100 100t         Elizabeth Szokol        1.870
## 101 100t             Alana Uriell        1.870
## 102  102                Mirim Lee        1.871
## 103  103         Esther Henseleit        1.872
## 104  104              Luna Sobron        1.875
## 105  105            Marissa Steen        1.881
## 106  106             Peiyun Chien        1.882
## 107  107                Angel Yin        1.886
## 108  108             Cristie Kerr        1.886
## 109  109        Michelle Wie West        1.889
## 110  110           Anna Nordqvist        1.891
## 111  111                 Mel Reid        1.891
## 112  112        Albane Valenzuela        1.892
## 113  113               Paula Reto        1.896
## 114  114           Ashleigh Buhai        1.900
## 115  115          Casey Danielson        1.902
## 116  116            Brittany Lang        1.903
## 117 117t             Mina Harigae        1.905
## 118 117t           Beatriz Recari        1.905
## 119  119             Austin Ernst        1.909
## 120  120            Jenny Coleman        1.913
## 121  121                Ana Belac        1.915
## 122  122       Bianca Pagdanganan        1.921
## 123  123           Katherine Kirk        1.930
## 124  124            Allison Emrey        1.932
## 125  125             Jeongeun Lee        1.935
## 126  126         Jaye Marie Green        1.940
## 127  127            Jennifer Song        1.959
## 128  128         Wichanee Meechai        1.966
## 129  129           Emily Pedersen        2.000
## 
## [[3]]
##     rank                     name greens_hit
## 1      1             Charley Hull       81.0
## 2      2        Brittany Altomare       80.0
## 3      3           Allisen Corpuz       79.6
## 4      4           Celine Boutier       78.3
## 5     5t         Brooke Henderson       77.8
## 6     5t                 Xiyu Lin       77.8
## 7     5t            Lexi Thompson       77.8
## 8      8      Maude-Aimee Leblanc       76.9
## 9      9              Hyejin Choi       76.2
## 10    10                Isi Gabsa       75.9
## 11    11            Danielle Kang       75.7
## 12    12     Nanna Koerstz Madsen       75.6
## 13    13       Jodi Ewart Shadoff       75.4
## 14   14t          Matilda Castren       75.0
## 15   14t            Frida Kinhult       75.0
## 16   16t          Caroline Masson       74.4
## 17   16t               Paula Reto       74.4
## 18   16t            Marissa Steen       74.4
## 19    19          Jennifer Kupcho       74.1
## 20    20                Yuka Saso       73.9
## 21    21      Jasmine Suwannapura       73.8
## 22    22                 Lydia Ko       73.6
## 23    23              Yealimi Noh       73.3
## 24   24t              Megan Khang       73.0
## 25   24t                 Amy Yang       73.0
## 26    26     Pajaree Anannarukarn       72.7
## 27   27t           Jennifer Chang       72.2
## 28   27t              Ayaka Furue       72.2
## 29   27t         Ariya Jutanugarn       72.2
## 30   27t               Sarah Kemp       72.2
## 31   27t               Ruixin Liu       72.2
## 32   27t           Emily Pedersen       72.2
## 33   33t               Ally Ewing       71.7
## 34   33t               Gaby Lopez       71.7
## 35   35t              Marina Alex       71.4
## 36   35t              In Gee Chun       71.4
## 37   35t         Perrine Delacour       71.4
## 38    38             Jeongeun Lee       71.3
## 39    39              Stacy Lewis       71.2
## 40    40   Katherine Perry-Hamski       71.1
## 41   41t             Peiyun Chien       70.8
## 42   41t          Casey Danielson       70.8
## 43   41t            Jessica Korda       70.8
## 44    44                Na Rin An       70.6
## 45   45t               Inbee Park       70.4
## 46   45t          Sophia Schubert       70.4
## 47    47        Patty Tavatanakit       70.2
## 48    48             Sophia Popov       70.1
## 49   49t    Fatima Fernandez Cano       70.0
## 50   49t       Bianca Pagdanganan       70.0
## 51   51t              Aditi Ashok       69.8
## 52   51t        Pornanong Phatlum       69.8
## 53   51t          Sarah Schmelzel       69.8
## 54   51t                 Lilia Vu       69.8
## 55   55t           Ashleigh Buhai       69.4
## 56   55t          Lauren Coughlin       69.4
## 57   57t           Cydney Clanton       69.0
## 58   57t         Wichanee Meechai       69.0
## 59   57t               Jenny Shin       69.0
## 60    60               Annie Park       68.9
## 61    61              Nelly Korda       68.7
## 62    62        Albane Valenzuela       68.5
## 63   63t               Bronte Law       68.3
## 64   63t                Amy Olson       68.3
## 65   63t                Kelly Tan       68.3
## 66    66                A Lim Kim       68.2
## 67    67            Jennifer Song       68.1
## 68    68             Austin Ernst       67.9
## 69   69t       Brittany Lincicome       67.5
## 70   69t        Lauren Stephenson       67.5
## 71    71        Moriya Jutanugarn       67.3
## 72   72t             Yae Eun Hong       66.7
## 73   72t               Andrea Lee       66.7
## 74   72t            Leona Maguire       66.7
## 75   72t         Stephanie Meadow       66.7
## 76   72t          Giulia Molinaro       66.7
## 77   72t Pauline Roussin-Bouchard       66.7
## 78   72t              Luna Sobron       66.7
## 79    79            Ryann O&#39;Toole       66.2
## 80   80t          Carlota Ciganda       65.9
## 81   80t            Jeong Eun Lee       65.9
## 82   80t         Atthaya Thitikul       65.9
## 83    83          Morgane Metraux       65.7
## 84   84t             Georgia Hall       65.7
## 85   84t             Nasa Hataoka       65.7
## 86    86            Janie Jackson       65.6
## 87   87t                Ana Belac       65.3
## 88   87t              Maria Fassi       65.3
## 89   87t         Esther Henseleit       65.3
## 90   87t                   Yu Liu       65.3
## 91   91t         Dana Finkelstein       65.1
## 92   91t               Su-Hyun Oh       65.1
## 93   93t           Anna Nordqvist       64.6
## 94   93t        Madelene Sagstrom       64.6
## 95    95         Linnea Johansson       64.3
## 96   96t            Jenny Coleman       63.9
## 97   96t         Elizabeth Szokol       63.9
## 98   96t             Alana Uriell       63.9
## 99    99           Rachel Rohanna       63.5
## 100 100t          Cheyenne Knight       63.3
## 101 100t        Pernilla Lindberg       63.3
## 102  102              Karrie Webb       62.5
## 103  103         Jaye Marie Green       62.0
## 104 104t             Cristie Kerr       61.1
## 105 104t            Agathe Laisne       61.1
## 106 104t           Gerina Mendoza       61.1
## 107 104t                 Mel Reid       61.1
## 108 104t               Dewi Weber       61.1
## 109  109               Alison Lee       60.0
## 110 110t           Katherine Kirk       59.7
## 111 110t              Emma Talley       59.7
## 112 112t             Laura Davies       59.3
## 113 112t           Gemma Dryburgh       59.3
## 114 112t                  Muni He       59.3
## 115 112t            Christina Kim       59.3
## 116  116                Mirim Lee       59.0
## 117 117t           Amanda Doherty       58.3
## 118 117t             Mina Harigae       58.3
## 119 117t               Lauren Kim       58.3
## 120 117t           Beatriz Recari       58.3
## 121  121           Hee Young Park       57.8
## 122 122t            Brittany Lang       57.4
## 123 122t          Angela Stanford       57.4
## 124  124            Allison Emrey       54.6
## 125  125           Lindsey Weaver       52.4
## 126 126t             Na Yeon Choi       50.0
## 127 126t               Heaji Kang       50.0
## 128 126t        Michelle Wie West       50.0
## 129  129                Angel Yin       48.6
## 
## [[4]]
##     rank                     name rounds score_average_actual
## 1      1            Danielle Kang      8               68.375
## 2     2t             Charley Hull      7               68.857
## 3     2t            Lexi Thompson      7               68.857
## 4      4         Brooke Henderson     11               69.182
## 5      5           Celine Boutier     11               69.273
## 6      6            Leona Maguire      7               69.286
## 7      7           Allisen Corpuz      3               69.667
## 8      8              Hyejin Choi      7               69.714
## 9      9                 Lydia Ko      8               69.750
## 10    10        Brittany Altomare      5               69.800
## 11   11t Pauline Roussin-Bouchard      7               69.857
## 12   11t          Sarah Schmelzel      7               69.857
## 13    13                Yuka Saso     10               69.900
## 14   14t              Aditi Ashok      7               70.000
## 15   14t           Jennifer Chang      3               70.000
## 16   14t                Isi Gabsa      3               70.000
## 17   14t              Nelly Korda     11               70.000
## 18   18t              Marina Alex      7               70.143
## 19   18t                 Xiyu Lin      7               70.143
## 20    20        Patty Tavatanakit     11               70.364
## 21   21t          Cheyenne Knight      5               70.400
## 22   21t     Nanna Koerstz Madsen      5               70.400
## 23    23                 Amy Yang      7               70.429
## 24    24              Stacy Lewis     11               70.455
## 25   25t              In Gee Chun      7               70.571
## 26   25t              Ayaka Furue      7               70.571
## 27   25t              Megan Khang      7               70.571
## 28    28             Georgia Hall     11               70.636
## 29    29               Inbee Park      9               70.667
## 30   30t         Perrine Delacour      7               70.714
## 31   30t         Atthaya Thitikul      7               70.714
## 32    32            Jessica Korda      8               70.750
## 33    33          Caroline Masson      5               70.800
## 34   34t             Yae Eun Hong      7               70.857
## 35   34t               Bronte Law      7               70.857
## 36   36t           Gemma Dryburgh      3               71.000
## 37   36t            Jeong Eun Lee      7               71.000
## 38    38               Gaby Lopez     10               71.100
## 39   39t                Na Rin An      7               71.143
## 40   39t       Jodi Ewart Shadoff      7               71.143
## 41   39t               Su-Hyun Oh      7               71.143
## 42   39t      Jasmine Suwannapura      7               71.143
## 43   39t                Kelly Tan      7               71.143
## 44    44      Maude-Aimee Leblanc      6               71.167
## 45   45t     Pajaree Anannarukarn     11               71.273
## 46   45t        Madelene Sagstrom     11               71.273
## 47    47        Pornanong Phatlum      7               71.286
## 48   48t               Jenny Shin      7               71.429
## 49   48t                 Lilia Vu      7               71.429
## 50    50            Ryann O&#39;Toole     11               71.455
## 51    51             Nasa Hataoka     11               71.545
## 52   52t          Carlota Ciganda      7               71.571
## 53   52t         Dana Finkelstein      7               71.571
## 54   54t            Janie Jackson      5               71.600
## 55   54t               Ruixin Liu      5               71.600
## 56    56                A Lim Kim     11               71.636
## 57    57          Matilda Castren      6               71.667
## 58   58t       Brittany Lincicome      7               71.714
## 59   58t        Lauren Stephenson      7               71.714
## 60   60t              Yealimi Noh      5               71.800
## 61   60t       Bianca Pagdanganan      5               71.800
## 62   60t               Paula Reto      5               71.800
## 63    63          Sophia Schubert      6               71.833
## 64    64        Moriya Jutanugarn      9               71.889
## 65    65               Ally Ewing     10               71.900
## 66   66t           Cydney Clanton      7               72.000
## 67   66t    Fatima Fernandez Cano      5               72.000
## 68   66t         Linnea Johansson      7               72.000
## 69   66t               Alison Lee      5               72.000
## 70   66t               Andrea Lee      2               72.000
## 71   66t         Wichanee Meechai      7               72.000
## 72   66t            Marissa Steen      5               72.000
## 73    73          Morgane Metraux      6               72.333
## 74    74   Katherine Perry-Hamski      5               72.400
## 75    75                Amy Olson      7               72.429
## 76   76t               Sarah Kemp      2               72.500
## 77   76t            Frida Kinhult      2               72.500
## 78   76t          Jennifer Kupcho      6               72.500
## 79   76t            Agathe Laisne      2               72.500
## 80   76t             Alana Uriell      2               72.500
## 81    81         Ariya Jutanugarn      9               72.556
## 82   82t           Rachel Rohanna      7               72.571
## 83   82t           Lindsey Weaver      7               72.571
## 84    84        Albane Valenzuela      6               72.667
## 85    85                Ana Belac      4               72.750
## 86    86          Angela Stanford      9               72.778
## 87   87t        Pernilla Lindberg      5               72.800
## 88   87t          Giulia Molinaro      5               72.800
## 89   87t               Annie Park      5               72.800
## 90   90t             Jeongeun Lee      6               72.833
## 91   90t         Stephanie Meadow      6               72.833
## 92    92           Anna Nordqvist     11               72.909
## 93   93t             Sophia Popov      8               73.000
## 94   93t         Elizabeth Szokol      2               73.000
## 95   93t              Emma Talley      4               73.000
## 96   93t              Karrie Webb      4               73.000
## 97    97               Dewi Weber      6               73.167
## 98    98          Casey Danielson      4               73.250
## 99    99             Laura Davies      3               73.333
## 100 100t           Ashleigh Buhai      4               73.500
## 101 100t                  Muni He      6               73.500
## 102 100t             Cristie Kerr      4               73.500
## 103 100t            Christina Kim      6               73.500
## 104 100t               Lauren Kim      2               73.500
## 105 100t           Emily Pedersen      2               73.500
## 106 100t                 Mel Reid     10               73.500
## 107 100t              Luna Sobron      2               73.500
## 108  108             Austin Ernst      9               73.556
## 109 109t          Lauren Coughlin      4               73.750
## 110 109t              Maria Fassi      4               73.750
## 111 109t             Mina Harigae      4               73.750
## 112  112           Hee Young Park     10               73.800
## 113  113           Amanda Doherty      6               73.833
## 114 114t             Peiyun Chien      4               74.000
## 115 114t           Katherine Kirk      4               74.000
## 116 114t                   Yu Liu      4               74.000
## 117  117            Jennifer Song      4               74.250
## 118 118t         Esther Henseleit      4               74.500
## 119 118t            Brittany Lang      6               74.500
## 120 118t           Gerina Mendoza      6               74.500
## 121  121            Jenny Coleman      4               74.750
## 122  122         Jaye Marie Green      6               74.833
## 123  123                Mirim Lee      8               75.375
## 124  124               Heaji Kang      4               75.500
## 125  125            Allison Emrey      6               76.000
## 126 126t           Beatriz Recari      2               77.000
## 127 126t        Michelle Wie West      4               77.000
## 128  128             Na Yeon Choi      4               78.500
## 129  129                Angel Yin      4               78.750</code></pre>
<p>All done!! And just like that, we’ve downloaded four different web
pages, extracted the tabled info, and formatted them without copying and
pasting any code. The same process for all four was only used one time
to write the initial function. Just apply some final formatting to clean
it up a bit and combine the separate data frames into a single, unified
one.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-1" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> lpga_data <span class="sc">%&gt;%</span> </span>
<span id="cb194-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reduce</span>(left_join, <span class="at">by=</span><span class="st">&quot;name&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Combine all list levels into a single tibble, matching by the &quot;Name&quot; column</span></span>
<span id="cb194-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;rank.&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb194-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;score_average&quot;</span><span class="ot">=</span><span class="st">&quot;score_average_actual&quot;</span>)</span>
<span id="cb194-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb194-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-6" aria-hidden="true" tabindex="-1"></a><span class="co"># VOILA! </span></span>
<span id="cb194-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>##                 name distance putt_average greens_hit rounds score_average
## 1 Bianca Pagdanganan  284.000        1.921       70.0      5        71.800
## 2     Emily Pedersen  276.750        2.000       72.2      2        73.500
## 3      Lexi Thompson  276.286        1.724       77.8      7        68.857
## 4       Charley Hull  275.714        1.765       81.0      7        68.857
## 5       Alana Uriell  274.000        1.870       63.9      2        72.500
## 6      Frida Kinhult  273.750        1.852       75.0      2        72.500</code></pre>
</div>
<div id="non-reproducible-example-juvenile-life-without-parole-study" class="section level3" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> Non-reproducible example (Juvenile Life Without Parole study)</h3>
<p>In the Juvenile Lifers study, there were a series of questions that
participants rated on a scale of 0-100 in terms of difficulty. Part of
our analysis involved taking the ratings on those variables and giving
them relative rankings, so that each of the 6 variables in the series
was rated from the least to most difficult, by participant.</p>
<p>Now if we only needed to compute these rankings once this wouldn’t have
been any big deal; however, we needed to do it <strong>three times</strong>.</p>
<p>Much of the same code and the same process would need to be copied and pasted,
resulting in a very long, messy, harder to read script. With purrr
however, we can reduce the redundancies to a minimum, saving time and reducing the chances of mistakes.</p>
<p><strong><em>Step 1.</em></strong>
Just like before, the first step is to find a line-by-line solution for a single item, and then to generalize this into a shortcut function that can be applied to the any item “i” in a series of items.</p>
<p>For the sake of brevity, I’m going to skip most of that and just include the functions below.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;C:/Github Repos/Studies/JLWOP/Data and Models/jlwop_reentry_survey.RData&quot;</span>)</span>
<span id="cb196-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="do">#### CREATE THE DATA SETS WE NEED####</span></span>
<span id="cb196-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span>jlwop_reentry_survey <span class="co"># analysis 1 keeps the data as-is</span></span>
<span id="cb196-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span>jlwop_reentry_survey <span class="sc">%&gt;%</span> <span class="co"># supplementary analysis replaces the NA&#39;s with 0</span></span>
<span id="cb196-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(barrier_housing<span class="sc">:</span>barrier_identification), replace_na,<span class="dv">0</span>))</span>
<span id="cb196-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(jlwop_reentry_survey) <span class="co"># remove old data set to avoid confusion</span></span>
<span id="cb196-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-12" aria-hidden="true" tabindex="-1"></a><span class="do">#### Functions ####</span></span>
<span id="cb196-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-14" aria-hidden="true" tabindex="-1"></a><span class="co"># transformation function to wrangle the data into proper formatting</span></span>
<span id="cb196-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-15" aria-hidden="true" tabindex="-1"></a>rotate_data<span class="ot">=</span><span class="cf">function</span>(data, variable_prefix){</span>
<span id="cb196-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb196-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-17" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb196-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb196-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols=</span> <span class="fu">starts_with</span>(variable_prefix), <span class="co"># collect all the desired variables (i.e., columns)....</span></span>
<span id="cb196-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="co">#...and put them into a new categorical variable called &quot;variable&quot;</span></span>
<span id="cb196-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;participant_score&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># ...and store their values in a new variable called &quot;participant_score&quot;</span></span>
<span id="cb196-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(unique,participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb196-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb196-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(unique, participant_score, variable)) <span class="sc">%&gt;%</span> <span class="co"># keep only these 3 variables</span></span>
<span id="cb196-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(variable, <span class="at">.before =</span> participant_score) <span class="co"># put the newly created variable up front</span></span>
<span id="cb196-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-27" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb196-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb196-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-31" aria-hidden="true" tabindex="-1"></a><span class="co"># creating the rankings for each variable; then transform data back to original structure</span></span>
<span id="cb196-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-32" aria-hidden="true" tabindex="-1"></a>rank_and_unpivot<span class="ot">=</span><span class="cf">function</span>(data){</span>
<span id="cb196-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-33" aria-hidden="true" tabindex="-1"></a>  data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb196-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unique) <span class="sc">%&gt;%</span> <span class="co"># group the scores so they can be ranked by participant</span></span>
<span id="cb196-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank1=</span><span class="fu">dense_rank</span>(participant_score), <span class="co"># create ranking variable</span></span>
<span id="cb196-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-36" aria-hidden="true" tabindex="-1"></a>               <span class="at">rank=</span><span class="fu">max</span>(rank1,<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="dv">1</span> <span class="sc">-</span> rank1) <span class="sc">%&gt;%</span> <span class="co"># fix ranks by flipping to ascending order</span></span>
<span id="cb196-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank=</span><span class="fu">factor</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># convert rank to factor structure</span></span>
<span id="cb196-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rank1)</span>
<span id="cb196-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot back to wide</span></span>
<span id="cb196-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-42" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb196-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> rank<span class="sc">:</span>participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb196-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># un-group the data and delete the generated names</span></span>
<span id="cb196-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-46" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb196-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-47" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong><em>Step 2.</em></strong>
Again, like before, we want to combine all elements of interest into some object. Once we have that, we then pass said object to <code>map()</code> and supply the map call with our custom function.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-1" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank, <span class="at">na_zero=</span>na_zero) <span class="sc">%&gt;%</span> <span class="co"># create lists</span></span>
<span id="cb197-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f=</span>rotate_data, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># apply custom function along whole list</span></span>
<span id="cb197-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rank_and_unpivot) <span class="co"># again!!  DO IT AGAIN! With another function this time.</span></span>
<span id="cb197-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-5" aria-hidden="true" tabindex="-1"></a><span class="co"># extract list elements to make them data frames again</span></span>
<span id="cb197-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-6" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(dfs, <span class="fu">globalenv</span>())</span>
<span id="cb197-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb197-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(dfs) <span class="co">#discard list. It has fulfilled its purpose.</span></span></code></pre></div>
<p>And just like that, we’re done!</p>
</div>
<div id="example-3-readimport-several-files-at-once-with-map" class="section level3" number="10.3.3">
<h3><span class="header-section-number">10.3.3</span> Example 3: Read/Import several files at once with <code>map()</code></h3>
<p>Multiple ways you can do this</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="do">########## Read multiple files at once into a SINGLE, UNIFIED data frame #######################</span></span>
<span id="cb198-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-2" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>, <span class="st">&quot;Cognition data&quot;</span>, <span class="st">&quot;/&quot;</span>), <span class="fu">list.files</span>(<span class="at">path=</span>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>, <span class="st">&quot;Cognition data&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.sav&quot;</span>))</span>
<span id="cb198-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-4" aria-hidden="true" tabindex="-1"></a>cog_data<span class="ot">=</span>files <span class="sc">|&gt;</span> </span>
<span id="cb198-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(foreign<span class="sc">::</span>read.spss, <span class="at">to.data.frame=</span><span class="cn">TRUE</span>)</span>
<span id="cb198-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="do">######### Read multiple files at once but KEEP AS SEPARATE data frames ####################################</span></span>
<span id="cb198-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-9" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>, <span class="st">&quot;Cognition data&quot;</span>, <span class="st">&quot;/&quot;</span>), <span class="fu">list.files</span>(<span class="at">path=</span>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>, <span class="st">&quot;Cognition data&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.sav&quot;</span>))</span>
<span id="cb198-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-11" aria-hidden="true" tabindex="-1"></a>cog_data<span class="ot">=</span>files <span class="sc">|&gt;</span> </span>
<span id="cb198-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(foreign<span class="sc">::</span>read.spss, <span class="at">to.data.frame=</span><span class="cn">TRUE</span>) <span class="co"># store all individual files as separate list elements</span></span>
<span id="cb198-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-14" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(cog_data)<span class="ot">=</span><span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>, <span class="st">&quot;Cognition data&quot;</span>)) <span class="sc">|&gt;</span> <span class="co">#specify file path as a string</span></span>
<span id="cb198-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;.sav&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># pass the path string to list files; search in this location for files with this extension</span></span>
<span id="cb198-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="at">pattern=</span><span class="st">&quot;.sav&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>) <span class="co"># remove this pattern to save only the name</span></span>
<span id="cb198-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-18" aria-hidden="true" tabindex="-1"></a><span class="co"># files can be extracted later with this if desired</span></span>
<span id="cb198-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-19" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(cog_data, <span class="fu">globalenv</span>())</span></code></pre></div>
<p>Can also create a function to do this if you plan on doing it a bunch.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-1" aria-hidden="true" tabindex="-1"></a>read_all<span class="ot">=</span><span class="cf">function</span>(path, extension){</span>
<span id="cb199-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-2" aria-hidden="true" tabindex="-1"></a>  file_path <span class="ot">&lt;-</span> path</span>
<span id="cb199-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb199-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># save only file names with the desired extension</span></span>
<span id="cb199-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-5" aria-hidden="true" tabindex="-1"></a>  file_names<span class="ot">=</span>file_path <span class="sc">%&gt;%</span> </span>
<span id="cb199-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list.files</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb199-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-7" aria-hidden="true" tabindex="-1"></a>    .[<span class="fu">str_detect</span>(., extension)]</span>
<span id="cb199-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb199-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">str_detect</span>(extension, <span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>)) (file_names <span class="sc">%&gt;%</span></span>
<span id="cb199-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-10" aria-hidden="true" tabindex="-1"></a>                                                 purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(file_name){ <span class="co"># iterate through each file name</span></span>
<span id="cb199-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-11" aria-hidden="true" tabindex="-1"></a>                                                   <span class="fu">assign</span>(<span class="at">x =</span> <span class="fu">str_remove</span>(file_name, <span class="st">&quot;.csv&quot;</span>), <span class="co"># Remove file extension &quot;.csv&quot;</span></span>
<span id="cb199-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-12" aria-hidden="true" tabindex="-1"></a>                                                          <span class="at">value =</span> <span class="fu">read_csv</span>(<span class="fu">paste0</span>(file_path, file_name)),</span>
<span id="cb199-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-13" aria-hidden="true" tabindex="-1"></a>                                                          <span class="at">envir =</span> .GlobalEnv)}))</span>
<span id="cb199-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb199-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">str_detect</span>(extension, <span class="at">pattern =</span> <span class="st">&quot;.xlsx&quot;</span>)) (file_names <span class="sc">%&gt;%</span></span>
<span id="cb199-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-16" aria-hidden="true" tabindex="-1"></a>                                                  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="cf">function</span>(file_name){ <span class="co"># iterate through each file name</span></span>
<span id="cb199-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-17" aria-hidden="true" tabindex="-1"></a>                                                    <span class="fu">assign</span>(<span class="at">x =</span> <span class="fu">str_remove</span>(file_name, <span class="st">&quot;.xlsx&quot;</span>), <span class="co"># Remove file extension &quot;.csv&quot;</span></span>
<span id="cb199-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-18" aria-hidden="true" tabindex="-1"></a>                                                           <span class="at">value =</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="fu">paste0</span>(file_path, file_name)),</span>
<span id="cb199-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-19" aria-hidden="true" tabindex="-1"></a>                                                           <span class="at">envir =</span> .GlobalEnv)}))</span>
<span id="cb199-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb199-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-22" aria-hidden="true" tabindex="-1"></a><span class="fu">read_all</span>(<span class="at">path =</span> <span class="st">&quot;JLWOP/Data and Models/&quot;</span>, <span class="at">extension =</span> <span class="st">&quot;.xlsx&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="other-purrr-commands" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Other purrr commands</h2>
<p>Note that <code>map()</code> always returns a list, and depending on the output
that you want, you may need to use a variation of <code>map()</code>. These
variations are as follows:</p>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Return</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>map_lgl()</code></td>
<td>logical vector</td>
</tr>
<tr class="even">
<td><code>map_int()</code></td>
<td>integer vector</td>
</tr>
<tr class="odd">
<td><code>map_dbl()</code></td>
<td>double vector</td>
</tr>
<tr class="even">
<td><code>map_chr()</code></td>
<td>character vector</td>
</tr>
<tr class="odd">
<td><code>walk()</code></td>
<td>only returns the side effects of a function</td>
</tr>
</tbody>
</table>
<div id="the-walk-and-walk2-commands" class="section level3" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> The <code>walk</code> and <code>walk2</code> commands</h3>
<p>Walk() is useful for when you just want to plot something or write a
save file to your disk, etc. It does not give you any return to store
something in the environment. You use it to write/read files, open
graphics windows, and so on.</p>
<p><strong><em>Example: Exporting multiple .csv files at once</em></strong></p>
<p>Utilize <code>purrr::walk2()</code> to apply a function iteratively on TWO objects
simultaneously. To save multiple .csv files with <code>walk2</code>, we need two
distinct lists: 1. A list of data frames that we wish to export, 2. and
the file paths, complete with the file names and extensions, for each
file to be written</p>
<p>First create and define both list items. Then apply <code>walk2()</code> to pluck
an element from list 1 and its corresponding element from list 2, and
apply the <code>write_csv</code> function in for-loop fashion.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Custom function ####</span></span>
<span id="cb200-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-2" aria-hidden="true" tabindex="-1"></a>bundle_paths<span class="ot">=</span><span class="cf">function</span>(df_list, folder_location){</span>
<span id="cb200-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-3" aria-hidden="true" tabindex="-1"></a>  names<span class="ot">=</span><span class="fu">names</span>(df_list)</span>
<span id="cb200-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-4" aria-hidden="true" tabindex="-1"></a>  paths<span class="ot">=</span><span class="fu">rep</span>(here<span class="sc">::</span><span class="fu">here</span>(folder_location), <span class="fu">length</span>(names))</span>
<span id="cb200-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-5" aria-hidden="true" tabindex="-1"></a>  extension<span class="ot">=</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;.csv&quot;</span>), <span class="fu">length</span>(names))</span>
<span id="cb200-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb200-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-7" aria-hidden="true" tabindex="-1"></a>  fixed_names<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;/&quot;</span>,names)</span>
<span id="cb200-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-9" aria-hidden="true" tabindex="-1"></a>  path_bundle<span class="ot">=</span><span class="fu">list</span>(paths,fixed_names, extension) <span class="sc">%&gt;%</span> </span>
<span id="cb200-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pmap</span>(., paste0)</span>
<span id="cb200-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb200-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(path_bundle)</span>
<span id="cb200-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb200-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-15" aria-hidden="true" tabindex="-1"></a><span class="do">#### Exporting the .csv files for SPSS/JASP/etc. ####</span></span>
<span id="cb200-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Define list 1</span></span>
<span id="cb200-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-17" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank,</span>
<span id="cb200-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero=</span>na_zero,</span>
<span id="cb200-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero_helpreint=</span>na_zero_helpreint)</span>
<span id="cb200-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-20" aria-hidden="true" tabindex="-1"></a><span class="co"># list 2</span></span>
<span id="cb200-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-21" aria-hidden="true" tabindex="-1"></a>paths_csv<span class="ot">=</span><span class="fu">bundle_paths</span>(<span class="at">df_list =</span> dfs, <span class="at">folder_location =</span> <span class="st">&quot;JLWOP/Data and Models&quot;</span>)</span>
<span id="cb200-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over all elements in list 1 and corresponding element in list 2;</span></span>
<span id="cb200-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-25" aria-hidden="true" tabindex="-1"></a><span class="co"># and apply the the write_csv function to each</span></span>
<span id="cb200-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-26" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(<span class="at">.x=</span>dfs, <span class="at">.y=</span> paths, <span class="at">.f=</span>write_csv)</span>
<span id="cb200-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-29" aria-hidden="true" tabindex="-1"></a><span class="do">#### .RData file for R users ####</span></span>
<span id="cb200-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine multiple data frames into a single .RData file and export</span></span>
<span id="cb200-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-31" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;na_blank&quot;</span>, <span class="st">&quot;na_zero&quot;</span>, <span class="st">&quot;na_zero_helpreint&quot;</span>), </span>
<span id="cb200-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb200-32" aria-hidden="true" tabindex="-1"></a>     <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;JLWOP&quot;</span>, <span class="st">&quot;Data and Models&quot;</span>,<span class="st">&quot;ranking_data.RData&quot;</span>))</span></code></pre></div>
</div>
<div id="map2-and-walk2" class="section level3" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> <code>map2</code> (and <code>walk2</code>)</h3>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_a.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_a.png" width="594" /></p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_b.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_b.png" width="816" /></p>
</div>
<div id="pmap-for-when-you-have-a-bunch-of-shit" class="section level3" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> <code>pmap</code> for when you have a bunch of shit</h3>
<p>This function is for iterating over <em>three or more</em> elements. As soon as you have &gt;2 items you have to iterate over, you need pmap().It works similar to to map and map2, but instead of iterating over a single object x or two objects x and y, it acts on <strong>a list object called .l</strong></p>
<p>The list is a list of all the objects you want to iterate over. If you
give it a list of 18 items, it iterates over all 18. If the list only
has two things, it only acts on those two.</p>
<p>She says its easiest to imagine the list as a data frame, and the
columns of the data frame like the elements of that list.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap.png" width="466" /></p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb204-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap_2.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap_2.png" width="600" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="misc.-stuff.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="intro-to-r-markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/edit/master/10-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/blob/master/10-functions.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
