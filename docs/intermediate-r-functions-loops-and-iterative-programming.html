<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set</title>
  <meta name="description" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  
  
  

<meta name="author" content="Ryan Schneider" />


<meta name="date" content="2022-04-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="misc.-stuff.html"/>
<link rel="next" href="intro-to-r-markdown.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Compendium</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Monument to my Madness</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-this-book-is-and-what-it-is-not"><i class="fa fa-check"></i><b>1.1</b> What this book is, and what it is not</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html"><i class="fa fa-check"></i><b>2</b> Introduction: R Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#importing-data"><i class="fa fa-check"></i><b>2.1</b> Importing Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#spreadsheets"><i class="fa fa-check"></i><b>2.1.1</b> Spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#exporting-i.e.-saving-data-and-output"><i class="fa fa-check"></i><b>2.2</b> Exporting (i.e., saving) Data and Output</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#exporting-to-.csv"><i class="fa fa-check"></i><b>2.2.1</b> Exporting to .CSV</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#export-to-.rdata-and-load-the-data-again-later"><i class="fa fa-check"></i><b>2.2.2</b> Export to .RData (and load the data again later)</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#export-to-excel"><i class="fa fa-check"></i><b>2.2.3</b> Export to Excel</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#accessedit-specific-cell-number-values"><i class="fa fa-check"></i><b>2.2.4</b> Access/edit specific cell number values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangle-data.html"><a href="wrangle-data.html"><i class="fa fa-check"></i><b>3</b> Wrangle Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="wrangle-data.html"><a href="wrangle-data.html#joining-or-splitting"><i class="fa fa-check"></i><b>3.1</b> Joining or Splitting</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="wrangle-data.html"><a href="wrangle-data.html#whole-data-sets"><i class="fa fa-check"></i><b>3.1.1</b> Whole Data Sets</a></li>
<li class="chapter" data-level="3.1.2" data-path="wrangle-data.html"><a href="wrangle-data.html#individual-columnsvariables"><i class="fa fa-check"></i><b>3.1.2</b> Individual Columns/Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="wrangle-data.html"><a href="wrangle-data.html#selectingextracting-specific-variables"><i class="fa fa-check"></i><b>3.2</b> Selecting/extracting specific variables</a></li>
<li class="chapter" data-level="3.3" data-path="wrangle-data.html"><a href="wrangle-data.html#if-then-and-case-when"><i class="fa fa-check"></i><b>3.3</b> If-then and Case-when</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="wrangle-data.html"><a href="wrangle-data.html#if-then"><i class="fa fa-check"></i><b>3.3.1</b> If-then</a></li>
<li class="chapter" data-level="3.3.2" data-path="wrangle-data.html"><a href="wrangle-data.html#case-when"><i class="fa fa-check"></i><b>3.3.2</b> Case-when</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrangle-data.html"><a href="wrangle-data.html#conditional-replacement-of-values"><i class="fa fa-check"></i><b>3.4</b> Conditional replacement of values</a></li>
<li class="chapter" data-level="3.5" data-path="wrangle-data.html"><a href="wrangle-data.html#merging-variables"><i class="fa fa-check"></i><b>3.5</b> Merging variables</a></li>
<li class="chapter" data-level="3.6" data-path="wrangle-data.html"><a href="wrangle-data.html#apply-a-function-to-multiple-variables-at-once"><i class="fa fa-check"></i><b>3.6</b> Apply a function to multiple variables at once</a></li>
<li class="chapter" data-level="3.7" data-path="wrangle-data.html"><a href="wrangle-data.html#pivoting-i.e.-transposing-data"><i class="fa fa-check"></i><b>3.7</b> Pivoting (i.e., transposing) data</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="wrangle-data.html"><a href="wrangle-data.html#condense-multiple-rows-into-a-single-column-pivot-wide-to-long"><i class="fa fa-check"></i><b>3.7.1</b> Condense multiple rows into a single column (pivot wide to long)</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="wrangle-data.html"><a href="wrangle-data.html#managing-many-models"><i class="fa fa-check"></i><b>3.8</b> Managing Many Models</a></li>
<li class="chapter" data-level="3.9" data-path="wrangle-data.html"><a href="wrangle-data.html#turn-row-names-into-a-columnvariable"><i class="fa fa-check"></i><b>3.9</b> Turn row names into a column/variable</a></li>
<li class="chapter" data-level="3.10" data-path="wrangle-data.html"><a href="wrangle-data.html#how-to-editchange-column-names"><i class="fa fa-check"></i><b>3.10</b> How to edit/change column names</a></li>
<li class="chapter" data-level="3.11" data-path="wrangle-data.html"><a href="wrangle-data.html#re-order-columns-in-a-data-set"><i class="fa fa-check"></i><b>3.11</b> Re-order columns in a data set</a></li>
<li class="chapter" data-level="3.12" data-path="wrangle-data.html"><a href="wrangle-data.html#date-and-time-variables"><i class="fa fa-check"></i><b>3.12</b> Date and time variables</a>
<ul>
<li class="chapter" data-level="3.12.1" data-path="wrangle-data.html"><a href="wrangle-data.html#date-time-objects"><i class="fa fa-check"></i><b>3.12.1</b> Date-time objects</a></li>
<li class="chapter" data-level="3.12.2" data-path="wrangle-data.html"><a href="wrangle-data.html#date-only-objects"><i class="fa fa-check"></i><b>3.12.2</b> Date-only objects</a></li>
<li class="chapter" data-level="3.12.3" data-path="wrangle-data.html"><a href="wrangle-data.html#find-the-difference-between-two-datestimes"><i class="fa fa-check"></i><b>3.12.3</b> Find the difference between two dates/times</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="wrangle-data.html"><a href="wrangle-data.html#reverse-code-a-variable"><i class="fa fa-check"></i><b>3.13</b> Reverse-code a variable</a></li>
<li class="chapter" data-level="3.14" data-path="wrangle-data.html"><a href="wrangle-data.html#dummy-coding-the-very-fast-and-easy-way"><i class="fa fa-check"></i><b>3.14</b> Dummy coding (the very fast and easy way)</a></li>
<li class="chapter" data-level="3.15" data-path="wrangle-data.html"><a href="wrangle-data.html#create-a-relative-ranking-among-several-variables"><i class="fa fa-check"></i><b>3.15</b> Create a relative ranking among several variables</a></li>
<li class="chapter" data-level="3.16" data-path="wrangle-data.html"><a href="wrangle-data.html#manipulating-the-working-environment-and-many-things-at-once"><i class="fa fa-check"></i><b>3.16</b> Manipulating the working environment and many things at once</a>
<ul>
<li class="chapter" data-level="3.16.1" data-path="wrangle-data.html"><a href="wrangle-data.html#stuff-the-whole-working-environment-into-a-list"><i class="fa fa-check"></i><b>3.16.1</b> Stuff the WHOLE working environment into a list</a></li>
<li class="chapter" data-level="3.16.2" data-path="wrangle-data.html"><a href="wrangle-data.html#extract-everything-from-a-list-into-the-environment"><i class="fa fa-check"></i><b>3.16.2</b> Extract everything from a list into the environment</a></li>
<li class="chapter" data-level="3.16.3" data-path="wrangle-data.html"><a href="wrangle-data.html#delete-everything-in-the-entire-environment-except-for-one-item"><i class="fa fa-check"></i><b>3.16.3</b> Delete everything in the entire environment, except for one item</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clean-data.html"><a href="clean-data.html"><i class="fa fa-check"></i><b>4</b> Clean Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="clean-data.html"><a href="clean-data.html#replace-a-value-with-na"><i class="fa fa-check"></i><b>4.1</b> Replace a value with NA</a></li>
<li class="chapter" data-level="4.2" data-path="clean-data.html"><a href="clean-data.html#replace-nas-with-a-value"><i class="fa fa-check"></i><b>4.2</b> Replace NA’s with a value</a></li>
<li class="chapter" data-level="4.3" data-path="clean-data.html"><a href="clean-data.html#identify-columns-or-rows-with-missing-values"><i class="fa fa-check"></i><b>4.3</b> Identify columns or rows with Missing values</a></li>
<li class="chapter" data-level="4.4" data-path="clean-data.html"><a href="clean-data.html#find-the-percentage-of-a-variable-that-is-missing"><i class="fa fa-check"></i><b>4.4</b> Find the percentage of a variable that is missing</a></li>
<li class="chapter" data-level="4.5" data-path="clean-data.html"><a href="clean-data.html#exclude-missing-values-from-analysis"><i class="fa fa-check"></i><b>4.5</b> Exclude Missing values from analysis</a></li>
<li class="chapter" data-level="4.6" data-path="clean-data.html"><a href="clean-data.html#dropping-missing-values-from-the-data-set"><i class="fa fa-check"></i><b>4.6</b> Dropping Missing values from the data set</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-with-factors.html"><a href="working-with-factors.html"><i class="fa fa-check"></i><b>5</b> Working with Factors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="working-with-factors.html"><a href="working-with-factors.html#manually-recodechange-a-factors-levels"><i class="fa fa-check"></i><b>5.1</b> Manually recode/change a factor’s levels</a></li>
<li class="chapter" data-level="5.2" data-path="working-with-factors.html"><a href="working-with-factors.html#collapse-factor-levels"><i class="fa fa-check"></i><b>5.2</b> Collapse factor levels</a></li>
<li class="chapter" data-level="5.3" data-path="working-with-factors.html"><a href="working-with-factors.html#add-levels-to-a-factor"><i class="fa fa-check"></i><b>5.3</b> Add levels to a factor</a></li>
<li class="chapter" data-level="5.4" data-path="working-with-factors.html"><a href="working-with-factors.html#drop-unused-levels"><i class="fa fa-check"></i><b>5.4</b> Drop unused levels</a></li>
<li class="chapter" data-level="5.5" data-path="working-with-factors.html"><a href="working-with-factors.html#change-the-order-of-a-factors-levels"><i class="fa fa-check"></i><b>5.5</b> Change the order of a factor’s levels</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-with-strings.html"><a href="working-with-strings.html"><i class="fa fa-check"></i><b>6</b> Working with Strings</a>
<ul>
<li class="chapter" data-level="6.1" data-path="working-with-strings.html"><a href="working-with-strings.html#remove-a-pattern-from-a-string"><i class="fa fa-check"></i><b>6.1</b> Remove a pattern from a string</a></li>
<li class="chapter" data-level="6.2" data-path="working-with-strings.html"><a href="working-with-strings.html#replace-one-pattern-in-a-string-with-another"><i class="fa fa-check"></i><b>6.2</b> Replace one pattern in a string with another</a></li>
<li class="chapter" data-level="6.3" data-path="working-with-strings.html"><a href="working-with-strings.html#find-i.e.-filter-for-all-instances-of-a-string"><i class="fa fa-check"></i><b>6.3</b> Find (i.e., filter for) all instances of a string</a></li>
<li class="chapter" data-level="6.4" data-path="working-with-strings.html"><a href="working-with-strings.html#drop-all-rows-from-a-data-set-that-contain-a-certain-string"><i class="fa fa-check"></i><b>6.4</b> Drop all rows from a data set that contain a certain string</a></li>
<li class="chapter" data-level="6.5" data-path="working-with-strings.html"><a href="working-with-strings.html#force-all-letters-to-lower-case"><i class="fa fa-check"></i><b>6.5</b> Force all letters to lower case</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html"><i class="fa fa-check"></i><b>7</b> Figures and Graphs with the ggplot and see packages</a>
<ul>
<li class="chapter" data-level="7.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#commands-for-ggplot-graph-types"><i class="fa fa-check"></i><b>7.1</b> Commands for ggplot graph types</a></li>
<li class="chapter" data-level="7.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#specific-commands-for-specific-types-of-analysis"><i class="fa fa-check"></i><b>7.2</b> Specific Commands for Specific Types of Analysis</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#lavaan-stuff"><i class="fa fa-check"></i><b>7.2.1</b> lavaan stuff</a></li>
<li class="chapter" data-level="7.2.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#bayes-stuff"><i class="fa fa-check"></i><b>7.2.2</b> Bayes stuff</a></li>
<li class="chapter" data-level="7.2.3" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#histograms-and-density-curves"><i class="fa fa-check"></i><b>7.2.3</b> Histograms and density curves</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#highlight-specific-points"><i class="fa fa-check"></i><b>7.3</b> Highlight specific points</a></li>
<li class="chapter" data-level="7.4" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-labels-to-data-points"><i class="fa fa-check"></i><b>7.4</b> Add labels to data points</a></li>
<li class="chapter" data-level="7.5" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#plotting-multiple-graphs-at-once"><i class="fa fa-check"></i><b>7.5</b> Plotting multiple graphs at once</a></li>
<li class="chapter" data-level="7.6" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#change-the-colors-bars-columns-dots-etc."><i class="fa fa-check"></i><b>7.6</b> Change the colors (bars; columns; dots; etc.)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#fine-tuning-colors"><i class="fa fa-check"></i><b>7.6.1</b> Fine-tuning colors</a></li>
<li class="chapter" data-level="7.6.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#more-options-with-the-see-package"><i class="fa fa-check"></i><b>7.6.2</b> More options with the see package</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#other-aesthetic-mappings"><i class="fa fa-check"></i><b>7.7</b> Other aesthetic mappings</a></li>
<li class="chapter" data-level="7.8" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#adding-and-customizing-text"><i class="fa fa-check"></i><b>7.8</b> Adding and Customizing Text</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-title-axis-labels-and-captions"><i class="fa fa-check"></i><b>7.8.1</b> Add a title, axis labels, and captions</a></li>
<li class="chapter" data-level="7.8.2" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#center-graph-title"><i class="fa fa-check"></i><b>7.8.2</b> Center graph title</a></li>
<li class="chapter" data-level="7.8.3" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#use-different-fonts"><i class="fa fa-check"></i><b>7.8.3</b> Use different fonts</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#remove-gridlines"><i class="fa fa-check"></i><b>7.9</b> Remove gridlines</a></li>
<li class="chapter" data-level="7.10" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#faceting"><i class="fa fa-check"></i><b>7.10</b> Faceting</a></li>
<li class="chapter" data-level="7.11" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#log-transformations"><i class="fa fa-check"></i><b>7.11</b> Log transformations</a></li>
<li class="chapter" data-level="7.12" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#changing-the-scale-of-the-axis"><i class="fa fa-check"></i><b>7.12</b> Changing the scale of the axis</a></li>
<li class="chapter" data-level="7.13" data-path="figures-and-graphs-with-the-ggplot-and-see-packages.html"><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-regression-line"><i class="fa fa-check"></i><b>7.13</b> Add a regression line</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html"><i class="fa fa-check"></i><b>8</b> Making Tables with flextable</a>
<ul>
<li class="chapter" data-level="8.1" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#apa-table-components"><i class="fa fa-check"></i><b>8.1</b> APA Table Components</a></li>
<li class="chapter" data-level="8.2" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#indent-values"><i class="fa fa-check"></i><b>8.2</b> Indent values</a></li>
<li class="chapter" data-level="8.3" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#add-a-horizontal-border-aka-horizontal-spanner"><i class="fa fa-check"></i><b>8.3</b> Add a Horizontal border (AKA horizontal “spanner”)</a></li>
<li class="chapter" data-level="8.4" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#change-font-and-font-size"><i class="fa fa-check"></i><b>8.4</b> Change font and font size</a></li>
<li class="chapter" data-level="8.5" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#grouped-table"><i class="fa fa-check"></i><b>8.5</b> Grouped table</a></li>
<li class="chapter" data-level="8.6" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#complete-example"><i class="fa fa-check"></i><b>8.6</b> Complete Example</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="misc.-stuff.html"><a href="misc.-stuff.html"><i class="fa fa-check"></i><b>9</b> Misc. Stuff</a>
<ul>
<li class="chapter" data-level="9.1" data-path="misc.-stuff.html"><a href="misc.-stuff.html#scrape-web-pages-for-data-tables"><i class="fa fa-check"></i><b>9.1</b> Scrape web pages for data tables</a></li>
<li class="chapter" data-level="9.2" data-path="misc.-stuff.html"><a href="misc.-stuff.html#read-spss-files-into-r"><i class="fa fa-check"></i><b>9.2</b> Read SPSS files into R</a></li>
<li class="chapter" data-level="9.3" data-path="misc.-stuff.html"><a href="misc.-stuff.html#turn-numbers-into-percentages"><i class="fa fa-check"></i><b>9.3</b> Turn numbers into percentages</a></li>
<li class="chapter" data-level="9.4" data-path="misc.-stuff.html"><a href="misc.-stuff.html#find-all-possible-combindations-of-items-in-a-vector"><i class="fa fa-check"></i><b>9.4</b> Find all possible combindations of items in a vector</a></li>
<li class="chapter" data-level="9.5" data-path="misc.-stuff.html"><a href="misc.-stuff.html#download-files-from-the-internet"><i class="fa fa-check"></i><b>9.5</b> Download files from the internet</a></li>
<li class="chapter" data-level="9.6" data-path="misc.-stuff.html"><a href="misc.-stuff.html#print-multiple-things-in-one-statement"><i class="fa fa-check"></i><b>9.6</b> Print multiple things in one statement</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html"><i class="fa fa-check"></i><b>10</b> Intermediate R: Functions, Loops, and Iterative Programming</a>
<ul>
<li class="chapter" data-level="10.1" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#functions"><i class="fa fa-check"></i><b>10.1</b> Functions</a></li>
<li class="chapter" data-level="10.2" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#for-loops"><i class="fa fa-check"></i><b>10.2</b> For-loops</a></li>
<li class="chapter" data-level="10.3" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#purrr-and-iterative-functions"><i class="fa fa-check"></i><b>10.3</b> purrr and Iterative Functions</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#reproducible-example-scraping-web-data"><i class="fa fa-check"></i><b>10.3.1</b> Reproducible example: Scraping web data</a></li>
<li class="chapter" data-level="10.3.2" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#non-reproducible-example-juvenile-life-without-parole-study"><i class="fa fa-check"></i><b>10.3.2</b> Non-reproducible example (Juvenile Life Without Parole study)</a></li>
<li class="chapter" data-level="10.3.3" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#example-3-readimport-several-files-at-once-with-map"><i class="fa fa-check"></i><b>10.3.3</b> Example 3: Read/Import several files at once with <code>map()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#other-purrr-commands"><i class="fa fa-check"></i><b>10.4</b> Other purrr commands</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#the-walk-and-walk2-commands"><i class="fa fa-check"></i><b>10.4.1</b> The <code>walk</code> and <code>walk2</code> commands</a></li>
<li class="chapter" data-level="10.4.2" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#map2-and-walk2"><i class="fa fa-check"></i><b>10.4.2</b> <code>map2</code> (and <code>walk2</code>)</a></li>
<li class="chapter" data-level="10.4.3" data-path="intermediate-r-functions-loops-and-iterative-programming.html"><a href="intermediate-r-functions-loops-and-iterative-programming.html#pmap-for-when-you-have-a-bunch-of-shit"><i class="fa fa-check"></i><b>10.4.3</b> <code>pmap</code> for when you have a bunch of shit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html"><i class="fa fa-check"></i><b>11</b> Intro to R Markdown</a>
<ul>
<li class="chapter" data-level="11.1" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#important-code-chunk-options"><i class="fa fa-check"></i><b>11.1</b> Important code chunk options</a></li>
<li class="chapter" data-level="11.2" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#writing-math-equations-and-symbols"><i class="fa fa-check"></i><b>11.2</b> Writing math equations and symbols</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#greek-symbols"><i class="fa fa-check"></i><b>11.2.1</b> Greek symbols</a></li>
<li class="chapter" data-level="11.2.2" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#math-notation"><i class="fa fa-check"></i><b>11.2.2</b> Math notation</a></li>
<li class="chapter" data-level="11.2.3" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#statistics-notation"><i class="fa fa-check"></i><b>11.2.3</b> Statistics notation</a></li>
<li class="chapter" data-level="11.2.4" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#writing-in-line-code"><i class="fa fa-check"></i><b>11.2.4</b> Writing in-line code</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#including-graphicsinserting-pictures"><i class="fa fa-check"></i><b>11.3</b> Including graphics/inserting pictures</a></li>
<li class="chapter" data-level="11.4" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#footnotes"><i class="fa fa-check"></i><b>11.4</b> Footnotes</a></li>
<li class="chapter" data-level="11.5" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#change-the-color-of-your-text"><i class="fa fa-check"></i><b>11.5</b> Change the color of your text</a></li>
<li class="chapter" data-level="11.6" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#re-using-code-chunk-options"><i class="fa fa-check"></i><b>11.6</b> Re-using code chunk options</a></li>
<li class="chapter" data-level="11.7" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#making-better-tables"><i class="fa fa-check"></i><b>11.7</b> Making better tables</a></li>
<li class="chapter" data-level="11.8" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#running-in-line-code"><i class="fa fa-check"></i><b>11.8</b> Running in-line code</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html"><i class="fa fa-check"></i><b>12</b> Statistics and Psych-specific Stuff</a>
<ul>
<li class="chapter" data-level="12.1" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#create-or-sample-from-a-distribution"><i class="fa fa-check"></i><b>12.1</b> Create or sample from a distribution</a></li>
<li class="chapter" data-level="12.2" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#find-cohens-kappa-interrater-reliability"><i class="fa fa-check"></i><b>12.2</b> Find Cohen’s Kappa (Interrater reliability)</a></li>
<li class="chapter" data-level="12.3" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#statistical-tests-and-modeling-with-easystats"><i class="fa fa-check"></i><b>12.3</b> Statistical tests and modeling with <code>easystats</code></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#getting-parameter-estimates-from-model-objects"><i class="fa fa-check"></i><b>12.3.1</b> Getting parameter estimates from model objects</a></li>
<li class="chapter" data-level="12.3.2" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#getting-model-information-and-performance-metrics"><i class="fa fa-check"></i><b>12.3.2</b> Getting model information and performance metrics</a></li>
<li class="chapter" data-level="12.3.3" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#effect-size-info-with-effectsize"><i class="fa fa-check"></i><b>12.3.3</b> Effect size info with <code>effectsize</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#quick-detailed-and-automated-reporting-with-report"><i class="fa fa-check"></i><b>12.3.4</b> Quick, detailed, and automated reporting with <code>report</code></a></li>
<li class="chapter" data-level="12.3.5" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#running-correlations-with-correlation"><i class="fa fa-check"></i><b>12.3.5</b> Running correlations with <code>correlation</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html"><i class="fa fa-check"></i><b>13</b> Coding Tips and Tricks</a>
<ul>
<li class="chapter" data-level="13.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#grammar-stuff-in-base-r"><i class="fa fa-check"></i><b>13.1</b> Grammar stuff in base R</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#regex-expressions-and-symbols"><i class="fa fa-check"></i><b>13.1.1</b> Regex expressions and symbols</a></li>
<li class="chapter" data-level="13.1.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#the-new-pipe-base-r"><i class="fa fa-check"></i><b>13.1.2</b> The new pipe (Base R)</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#tidyverse-stuff"><i class="fa fa-check"></i><b>13.2</b> Tidyverse stuff</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#sometimes-when-making-a-function-you-need-to-use-the-colon-equals-operator-rather-than-just-the-normal---or-assignment-operators"><i class="fa fa-check"></i><b>13.2.1</b> Sometimes when making a function you need to use the colon-equals operator, rather than just the normal &lt;- or = assignment operators</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#function-related-stuff"><i class="fa fa-check"></i><b>13.3</b> Function-related stuff</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#user-supplied-expressions-or-named-columns-in-functions"><i class="fa fa-check"></i><b>13.3.1</b> User-supplied expressions or named columns in functions</a></li>
<li class="chapter" data-level="13.3.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time"><i class="fa fa-check"></i><b>13.3.2</b> When a command requires a named column or data set, but you’ve already supplied it and it’s required a second time</a></li>
<li class="chapter" data-level="13.3.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#formulas-within-functions"><i class="fa fa-check"></i><b>13.3.3</b> Formulas within functions</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#creating-a-package"><i class="fa fa-check"></i><b>13.4</b> Creating a package</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#documenting-pacakge-meta-data"><i class="fa fa-check"></i><b>13.4.1</b> Documenting pacakge meta-data</a></li>
<li class="chapter" data-level="13.4.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#connecting-to-other-packages"><i class="fa fa-check"></i><b>13.4.2</b> Connecting to other packages</a></li>
<li class="chapter" data-level="13.4.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#linking-git-and-github"><i class="fa fa-check"></i><b>13.4.3</b> Linking Git and Github</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#creating-a-bookdown"><i class="fa fa-check"></i><b>13.5</b> Creating a bookdown</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#rendering-the-book-once-its-done"><i class="fa fa-check"></i><b>13.5.1</b> Rendering the book once it’s done</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html"><i class="fa fa-check"></i><b>14</b> Creating a simulated data set</a>
<ul>
<li class="chapter" data-level="14.1" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-1-independent-samples-from-a-normal-distribution"><i class="fa fa-check"></i><b>14.1</b> Part 1: Independent samples from a normal distribution</a></li>
<li class="chapter" data-level="14.2" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-2-creating-data-sets-with-quantitative-and-categorical-variables"><i class="fa fa-check"></i><b>14.2</b> Part 2: Creating data sets with quantitative and categorical variables</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#a.-data-with-no-difference-among-groups"><i class="fa fa-check"></i><b>14.2.1</b> 2.a. DATA WITH <strong>NO DIFFERENCE</strong> AMONG GROUPS</a></li>
<li class="chapter" data-level="14.2.2" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#b.-data-with-a-difference-among-groups"><i class="fa fa-check"></i><b>14.2.2</b> 2.b. Data <strong>WITH A DIFFERENCE</strong> among groups</a></li>
<li class="chapter" data-level="14.2.3" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#c.-data-with-multiple-quantitative-variables-with-groups"><i class="fa fa-check"></i><b>14.2.3</b> 2.c. Data with <strong>MULTIPLE QUANTITATIVE VARIABLES</strong> with groups</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-3-repeatedly-simulate-samples-with-replicate"><i class="fa fa-check"></i><b>14.3</b> Part 3: Repeatedly simulate samples with replicate()</a></li>
<li class="chapter" data-level="14.4" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-4-repeatedly-making-whole-data-sets"><i class="fa fa-check"></i><b>14.4</b> Part 4: repeatedly making whole data sets</a></li>
<li class="chapter" data-level="14.5" data-path="creating-a-simulated-data-set.html"><a href="creating-a-simulated-data-set.html#part-5-using-purrr"><i class="fa fa-check"></i><b>14.5</b> Part 5: Using purrr</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating a simulated data set</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intermediate-r-functions-loops-and-iterative-programming" class="section level1" number="10">
<h1><span class="header-section-number">Chapter 10</span> Intermediate R: Functions, Loops, and Iterative Programming</h1>
<div id="functions" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Functions</h2>
<p>A function is a command that performs a specified operation and returns
an output in accordance with that operation. You can literally make a
function to do anything you want.</p>
<p><em>General structure of a basic function:</em></p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example structure</span></span>
<span id="cb189-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb189-3" aria-hidden="true" tabindex="-1"></a>Function_name<span class="ot">=</span><span class="cf">function</span>(argument){</span>
<span id="cb189-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb189-4" aria-hidden="true" tabindex="-1"></a>  Expressions</span>
<span id="cb189-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(output)</span>
<span id="cb189-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb189-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li><em>Argument</em> is your input. It is the thing you want to perform the
operation on.</li>
<li><em>Expressions</em> is the actual operation (or operations) you want to
perform on the supplied argument</li>
<li><em>return</em> tells R to return the result of the Expression to you when
done.</li>
</ul>
<p>This example function takes an input of numbers in the form of a vector
and subtracts two from each.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-1" aria-hidden="true" tabindex="-1"></a>numbers<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">80</span>)</span>
<span id="cb190-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-3" aria-hidden="true" tabindex="-1"></a>sub_2<span class="ot">=</span><span class="cf">function</span>(x){</span>
<span id="cb190-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-4" aria-hidden="true" tabindex="-1"></a>  result<span class="ot">=</span> x <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb190-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb190-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb190-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(numbers)</span></code></pre></div>
<pre><code>## [1]  0  8 10 78</code></pre>
<p>We can also supply the function with a single number and it still works…</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 98</code></pre>
<p><strong><em>Well this looks useful. So what’s the bigger picture?</em></strong></p>
<p>One of the primary advantages of functions are that they can reduce a long and
complex process, or a process that involves many steps, into a <em>single line of code</em>; thus, creating your own functions is a fast way to make
your life easier down the line either at some point in the far future or
even in just a few minutes, if you know you will be writing the code for
some process two or more times.</p>
<p>Take this script for instance. You can see from the circled parts that I
needed to transform three different data sets in a similar way:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb194-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;repeat_process.jpg&quot;</span>))</span></code></pre></div>
<p><img src="pics/repeat_process.jpg" width="413" /></p>
<p>Yes, I could have just done a copy-paste of the original code and tweak it slightly each time….
But that is time consuming, produces a sloppier and longer script, and introduces a lot more room for error because of the repeated code and extra steps.</p>
<p>Better to write a single function that could be applied to all three….</p>
<p><strong><em>In short, use functions to reduce a multi-step process or a process
that you’re implementing &gt;=2 times in a single script into one command.
This saves you space and makes the script shorter; it saves you the
trouble and effort of re-writing or adapting code from earlier sections;
and importantly, reduces the chances of you making a coding error by
proxy of the former two.</em></strong></p>
<p>As a quick example, I was able to replace each of the circled paragraphs of code above with a custom function that ran
everything in one simple line. Now instead of 3 whole (and redundant) paragraphs, I now have 3 short lines, like so….</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb195-1" aria-hidden="true" tabindex="-1"></a>na_zero_helpreint<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint,</span>
<span id="cb195-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb195-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">variable_prefix =</span> <span class="st">&quot;reintegrate_&quot;</span>)</span>
<span id="cb195-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb195-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb195-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span>
<span id="cb195-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb195-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb195-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span></code></pre></div>
<p><strong>Limitations to your average, everyday functions.</strong> While reducing a
whole <em>process or sequence</em> of commands is extremely useful, it still
leaves a limitation. For instance, while we avoided copying and pasting
whole paragraphs or processes, I still had to copy-paste the same
function three times. <em>This still leaves chances for error on the table, and it still leaves us with wasted lines that make the script longer.</em></p>
<p>In general, when you want to perform some function or process <strong>multiple times on multiple items (as above where the same command is used three times on three different data frames)</strong>, you need to use a for-loop or
iterating function. These can reduce further unwanted redundancies by applying the function or process iteratively. Read on for more info.</p>
</div>
<div id="for-loops" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> For-loops</h2>
<p>A for loop is essentially a function that applies a function or given
set of operations to multiple things at once, and returns an output of
many items.</p>
<p>For example, this code finds the means of every vector/column in a
dataset by repeatedly applying the same code over and over to element
“i” in the given list:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb196-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb196-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb196-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb196-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb196-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb196-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-8" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">ncol</span>(df))  <span class="co"># 1.Output. Create the object you want the results of the loop stored in.</span></span>
<span id="cb196-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {            <span class="co"># 2.Sequence of operations. &quot;For each item &#39;i&#39; along data frame…&quot;</span></span>
<span id="cb196-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-11" aria-hidden="true" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])      <span class="co"># 3.Body:&quot;every individual item in &#39;output&#39; = the median of each col in df</span></span>
<span id="cb196-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb196-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb196-14" aria-hidden="true" tabindex="-1"></a>output</span></code></pre></div>
<pre><code>## [1]  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>Check out <a href="https://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments">this book
chapter</a>
for a great and detailed explanation of for-loops and functional coding.</p>
<p>Although for loops are nice, they are unwieldy. R programmers typically
use iterating functions instead. Examples of iterating functions are the
<code>lapply</code>, <code>vapply</code>, <code>sapply</code>, etc. family of base R commands. But these can
also be confusing and the commands are not great.</p>
<p>The purrr package offers a better way to do iterating functions over
base R; it’s the tidyverse way to make efficient and understandable for
loops! <strong>If you have a need for a for-loop for something, see the next
section instead on how to use purrr to make an iterative function.
Important to understand conceptually what a for-loop is, but using them
is impractical when you have purrr</strong></p>
</div>
<div id="purrr-and-iterative-functions" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> purrr and Iterative Functions</h2>
<p><em>All notes here come from Charlotte Wickham’s lecture tutorial below</em></p>
<ul>
<li>Part 1: <a href="https://www.youtube.com/watch?v=7UlWJWfZO9M" class="uri">https://www.youtube.com/watch?v=7UlWJWfZO9M</a></li>
<li>Part 2: <a href="https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s" class="uri">https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s</a></li>
</ul>
<p>purrr’s <code>map()</code> series of functions offer a way to apply any existing
function (even functions you’ve made) to multiple things at once, be it
lists, data frame columns, individual items in vector, etc. In short,
they are for doing the same type of task repeatedly in a very quick and
efficient manner. They work in much the same way as for-loops, but are
far simpler to write, and can be applied in the same way to solve the
same problems.</p>
<p><strong><em>How to use purrr</em></strong></p>
<p>The structure of <code>map()</code> commands is the same as the others in the
tidyverse:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co">#option 1</span></span>
<span id="cb198-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(data, <span class="cf">function</span>)</span>
<span id="cb198-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="co"># option 2</span></span>
<span id="cb198-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb198-5" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="cf">function</span>)</span></code></pre></div>
<p>As a quick example and to highlight why purrr is so much more efficient
and easier to use than for-loops, look at the same example from before,
now using <code>map()</code> instead of a <code>for</code>:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb199-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(median)</span></code></pre></div>
<pre><code>##          a          b          c          d 
##  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>A single line is all it took to get the same results! And, it follows
tidyverse grammar structure.</p>
<p>Now lets get into how it works….</p>
<p><em>map() commands work like this:</em> For each element of x, do f.</p>
<p>So if you pass it object <code>x</code> and object <code>x</code> is….
- A vector, it will perform function f on every item in the vector
- A data frame, it will perform function f on every <em>column</em> in the data frame
- A list, it will perform function f on every <em>level in the list</em></p>
<p>Etc., etc.; the point is it applies a function repeatedly to every
element in the object you supply it with.</p>
<p>So lets walk through a case example.</p>
<div id="reproducible-example-scraping-web-data" class="section level3" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Reproducible example: Scraping web data</h3>
<p>This is an example walk through showing how we can use <code>purrr</code> to speed
things up dramatically and/or reduce the use of unwanted, extra code in
our scripts. In this guide I’ll be building a table of LPGA Tour
statistics from multiple webpages.</p>
<p>The workflow for purrr goes like this:</p>
<p>First, you want to figure out how to do each step of your process
line-by-line, for a single item. The idea is to try and walk through
each step of the process and see exactly what will need to be done each
each step and what the code will like, before trying to code it all at
once at a higher level.</p>
<p>Once you have each step for the first item figured out, then you make functions
for each step that condense that code down to one command.</p>
<p>Lastly, apply each function from your individual steps to all items in
your list by using <code>purr::map()</code>.</p>
<p><strong><em>Do for One</em></strong></p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb201-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 1</span></span>
<span id="cb201-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure out a line-by-line process for one item/one single web page</span></span>
<span id="cb201-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-5" aria-hidden="true" tabindex="-1"></a>html1<span class="ot">=</span><span class="fu">read_html</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb201-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb201-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb201-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb201-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-9" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb201-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb201-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(html1)</span></code></pre></div>
<pre><code>##   rank                     name distance
## 1    1           Emily Pedersen  282.521
## 2    2     Nanna Koerstz Madsen  280.160
## 3    3            Lexi Thompson  278.100
## 4    4                Yuka Saso  275.200
## 5    5 Pauline Roussin-Bouchard  274.974
## 6    6       Bianca Pagdanganan  274.923</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2</span></span>
<span id="cb203-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create a custom function of the above to shorten and generalize the process</span></span>
<span id="cb203-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-3" aria-hidden="true" tabindex="-1"></a>quick_read_html<span class="ot">=</span><span class="cf">function</span>(url){</span>
<span id="cb203-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-4" aria-hidden="true" tabindex="-1"></a>  web_page<span class="ot">=</span><span class="fu">read_html</span>(url) <span class="sc">|&gt;</span> </span>
<span id="cb203-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># fortunately this node works for all four pages so it can be baked into the function</span></span>
<span id="cb203-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb203-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb203-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-8" aria-hidden="true" tabindex="-1"></a>    janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb203-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb203-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(web_page)</span>
<span id="cb203-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb203-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-15" aria-hidden="true" tabindex="-1"></a><span class="co"># test to verify it works</span></span>
<span id="cb203-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-16" aria-hidden="true" tabindex="-1"></a>test<span class="ot">=</span><span class="fu">quick_read_html</span>(<span class="at">url=</span> <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>) </span>
<span id="cb203-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test) <span class="co"># nice </span></span></code></pre></div>
<pre><code>##   rank              name putt_average
## 1    1     Jeong Eun Lee        1.685
## 2    2 Patty Tavatanakit        1.686
## 3    3    Celine Boutier        1.709
## 4    4     Danielle Kang        1.709
## 5    5          Xiyu Lin        1.715
## 6    6  Brooke Henderson        1.719</code></pre>
<p><strong><em>DO FOR ALL.</em></strong>
Now create the object that contains all the elements you want to iterate over, and then pass it to your generalized function with map.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3a</span></span>
<span id="cb205-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create an object that contains ALL elements of interest</span></span>
<span id="cb205-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-3" aria-hidden="true" tabindex="-1"></a>URLs<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>,</span>
<span id="cb205-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>,</span>
<span id="cb205-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=06&quot;</span>,</span>
<span id="cb205-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=12&quot;</span>)</span>
<span id="cb205-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb205-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-9" aria-hidden="true" tabindex="-1"></a><span class="co"># use the power of map and be amazed</span></span>
<span id="cb205-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-10" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> URLs <span class="sc">|&gt;</span> <span class="fu">map</span>(quick_read_html)</span>
<span id="cb205-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>## [[1]]
##     rank                     name distance
## 1      1           Emily Pedersen  282.521
## 2      2     Nanna Koerstz Madsen  280.160
## 3      3            Lexi Thompson  278.100
## 4      4                Yuka Saso  275.200
## 5      5 Pauline Roussin-Bouchard  274.974
## 6      6       Bianca Pagdanganan  274.923
## 7      7               Minjee Lee  274.750
## 8      8             Charley Hull  274.222
## 9      9                A Lim Kim  274.086
## 10    10        Madelene Sagstrom  274.000
## 11    11        Patty Tavatanakit  273.852
## 12    12          Carlota Ciganda  273.543
## 13    13         Atthaya Thitikul  273.065
## 14    14      Maude-Aimee Leblanc  273.028
## 15    15         Brooke Henderson  272.882
## 16    16             Hannah Green  272.667
## 17    17             Alana Uriell  272.643
## 18    18          Brooke Matthews  272.313
## 19    19            Janie Jackson  271.947
## 20    20           Rachel Rohanna  271.897
## 21    21                Angel Yin  271.771
## 22    22                   Yu Liu  271.417
## 23    23         Perrine Delacour  271.315
## 24    24            Jessica Korda  270.719
## 25    25         Stephanie Meadow  270.275
## 26    26              Yealimi Noh  269.630
## 27    27              Maria Fassi  269.625
## 28    28              Hyejin Choi  269.587
## 29    29          Jennifer Kupcho  268.768
## 30    30            Frida Kinhult  268.750
## 31    31               Alison Lee  268.655
## 32    32              Nelly Korda  268.636
## 33    33           Amanda Doherty  267.750
## 34    34               Gaby Lopez  267.600
## 35    35            Sei Young Kim  267.571
## 36    36                 Amy Yang  267.540
## 37    37           Gerina Mendoza  266.844
## 38    38            Jeong Eun Lee  266.738
## 39    39             Georgia Hall  266.196
## 40    40            Ryann O&#39;Toole  266.148
## 41    41           Cydney Clanton  266.133
## 42    42    Fatima Fernandez Cano  265.955
## 43    43          Sophia Schubert  265.036
## 44    44          Giulia Molinaro  264.935
## 45    45       Brittany Lincicome  264.676
## 46    46                 Xiyu Lin  264.667
## 47    47        Albane Valenzuela  264.636
## 48    48           Sung Hyun Park  264.583
## 49    49                 Lilia Vu  264.048
## 50    50              Hyo Joo Kim  263.975
## 51    51               Ally Ewing  263.611
## 52    52     Pajaree Anannarukarn  263.455
## 53    53          Sarah Schmelzel  263.190
## 54    54          Lauren Coughlin  263.167
## 55    55             Nasa Hataoka  263.121
## 56    56         Jaye Marie Green  262.900
## 57    57               Ruixin Liu  262.538
## 58    58           Hinako Shibuno  262.229
## 59    59               Annie Park  262.184
## 60    60         Ariya Jutanugarn  261.712
## 61    61   Katherine Perry-Hamski  261.600
## 62    62       Jodi Ewart Shadoff  261.476
## 63    63        Lauren Stephenson  261.405
## 64    64                 Mel Reid  261.370
## 65    65                Na Rin An  261.098
## 66    66             Sophia Popov  260.925
## 67    67                  Min Lee  260.900
## 68    68               Eun-Hee Ji  260.857
## 69    69       Stephanie Kyriacou  260.300
## 70    70             Peiyun Chien  260.167
## 71    71           Allisen Corpuz  260.038
## 72    73           Haylee Harford  259.500
## 73    74        Pernilla Lindberg  259.095
## 74    75               Dewi Weber  259.028
## 75    76         Linnea Johansson  259.000
## 76    77                 Lydia Ko  258.604
## 77    78             Wei-Ling Hsu  258.528
## 78    79                Isi Gabsa  258.433
## 79    80          Elizabeth Nagel  258.333
## 80    81            Jennifer Song  258.225
## 81    82           Gemma Dryburgh  258.067
## 82    83         Esther Henseleit  257.977
## 83    84              Ruoning Yin  257.938
## 84    85           Katherine Kirk  257.632
## 85    86            Agathe Laisne  257.563
## 86    87             Austin Ernst  257.472
## 87    88          Casey Danielson  257.400
## 88    89                Ana Belac  257.250
## 89    90               Sarah Kemp  256.833
## 90    91          Angela Stanford  256.786
## 91    92           Ashleigh Buhai  256.500
## 92    93           Celine Boutier  256.267
## 93    94         Wichanee Meechai  256.019
## 94    95                Amy Olson  255.879
## 95    96               Paula Reto  255.857
## 96    97              Yu-Sang Hou  255.563
## 97    98              In Gee Chun  255.534
## 98    99             Kaitlyn Papp  255.208
## 99   100               Su-Hyun Oh  255.130
## 100  101          Matilda Castren  255.071
## 101  102               Jenny Shin  254.913
## 102  103              Megan Khang  254.340
## 103  104            Leona Maguire  254.138
## 104  105            Jenny Coleman  253.712
## 105  106             Cristie Kerr  253.450
## 106  107             Jin Young Ko  253.375
## 107  108                Kelly Tan  253.286
## 108  109              Emma Talley  253.077
## 109  110          Morgane Metraux  253.036
## 110  111              So Yeon Ryu  253.031
## 111  112        Brittany Altomare  253.000
## 112  113         Savannah Vilaubi  252.917
## 113  114        Pornanong Phatlum  252.816
## 114  115          Cheyenne Knight  252.786
## 115  116            Danielle Kang  252.448
## 116  117           Jennifer Chang  252.278
## 117  118              Marina Alex  252.148
## 118  119           Hee Young Park  251.972
## 119  120           Anna Nordqvist  251.957
## 120  121                  Muni He  251.583
## 121  122      Jasmine Suwannapura  251.389
## 122  123              Chella Choi  250.750
## 123  124               Haeji Kang  250.607
## 124  125               Bronte Law  250.471
## 125  126              Ayaka Furue  250.093
## 126  127            Brittany Lang  249.625
## 127 128t        Moriya Jutanugarn  248.500
## 128 128t               Lauren Kim  248.500
## 129  130            Maddie Szeryk  247.583
## 130  131             Mina Harigae  247.175
## 131  132           Lindsey Weaver  247.043
## 132  133            Lizette Salas  246.590
## 133  134             In-Kyung Kim  246.063
## 134  135                Mirim Lee  246.000
## 135  136          Caroline Masson  245.929
## 136  137            Allison Emrey  245.286
## 137  138            Christina Kim  244.786
## 138  139            Marissa Steen  243.773
## 139  140             Yae Eun Hong  243.533
## 140  141               Jiwon Jeon  243.250
## 141  142               Inbee Park  242.907
## 142  143             Na Yeon Choi  241.923
## 143  144              Stacy Lewis  241.655
## 144  145             Olivia Cowan  241.583
## 145  146         Charlotte Thomas  241.536
## 146  147              Aditi Ashok  236.413
## 147  148               Vivian Hou  236.250
## 148  149         Dana Finkelstein  234.133
## 
## [[2]]
##     rank                     name putt_average
## 1      1            Jeong Eun Lee        1.685
## 2      2        Patty Tavatanakit        1.686
## 3      3           Celine Boutier        1.709
## 4      4            Danielle Kang        1.709
## 5      5                 Xiyu Lin        1.715
## 6      6         Brooke Henderson        1.719
## 7      7               Su-Hyun Oh        1.728
## 8      8            Jessica Korda        1.729
## 9      9     Nanna Koerstz Madsen        1.735
## 10    10               Minjee Lee        1.735
## 11    11                Yuka Saso        1.737
## 12    12                 Amy Yang        1.741
## 13    13               Haeji Kang        1.744
## 14    14           Gemma Dryburgh        1.744
## 15    15             Nasa Hataoka        1.746
## 16    16            Leona Maguire        1.748
## 17    17              Nelly Korda        1.750
## 18    18                 Lydia Ko        1.753
## 19    19              Ruoning Yin        1.753
## 20    20                Na Rin An        1.753
## 21    21        Madelene Sagstrom        1.757
## 22    22                Angel Yin        1.758
## 23    23              Hyo Joo Kim        1.758
## 24    24          Carlota Ciganda        1.759
## 25    25             Jin Young Ko        1.761
## 26    26              So Yeon Ryu        1.764
## 27    27             Georgia Hall        1.766
## 28    28         Atthaya Thitikul        1.768
## 29    29               Eun-Hee Ji        1.772
## 30    30        Brittany Altomare        1.775
## 31    31            Lizette Salas        1.776
## 32    32             Cristie Kerr        1.776
## 33    33               Alison Lee        1.777
## 34   34t           Allisen Corpuz        1.778
## 35   34t        Lauren Stephenson        1.778
## 36    36             Charley Hull        1.779
## 37    37               Inbee Park        1.779
## 38    38            Sei Young Kim        1.780
## 39    39               Gaby Lopez        1.781
## 40    40              Chella Choi        1.781
## 41    41                Isi Gabsa        1.781
## 42    42           Hinako Shibuno        1.782
## 43    43            Lexi Thompson        1.782
## 44    44 Pauline Roussin-Bouchard        1.782
## 45    45            Ryann O&#39;Toole        1.783
## 46    46         Perrine Delacour        1.785
## 47    47              Stacy Lewis        1.786
## 48    48              Aditi Ashok        1.787
## 49    49              Megan Khang        1.790
## 50    50            Janie Jackson        1.790
## 51    51          Sarah Schmelzel        1.790
## 52    52              Hyejin Choi        1.791
## 53    53               Lauren Kim        1.793
## 54    54             Hannah Green        1.793
## 55    55               Paula Reto        1.794
## 56    56     Pajaree Anannarukarn        1.795
## 57    57              Ayaka Furue        1.795
## 58    58             In-Kyung Kim        1.796
## 59    59         Linnea Johansson        1.796
## 60    60               Annie Park        1.797
## 61    61                  Min Lee        1.797
## 62    62                 Lilia Vu        1.797
## 63    63       Stephanie Kyriacou        1.798
## 64    64          Jennifer Kupcho        1.798
## 65    65              In Gee Chun        1.799
## 66    66             Yae Eun Hong        1.800
## 67    67                   Yu Liu        1.801
## 68    68           Sung Hyun Park        1.801
## 69    69      Jasmine Suwannapura        1.803
## 70    70              Marina Alex        1.804
## 71    71           Amanda Doherty        1.804
## 72    72          Cheyenne Knight        1.804
## 73    73      Maude-Aimee Leblanc        1.806
## 74    74        Moriya Jutanugarn        1.806
## 75    75         Stephanie Meadow        1.808
## 76    76             Kaitlyn Papp        1.808
## 77    77              Emma Talley        1.809
## 78    78                A Lim Kim        1.809
## 79    79               Ally Ewing        1.810
## 80    80            Frida Kinhult        1.811
## 81    81          Caroline Masson        1.816
## 82    82           Lindsey Weaver        1.818
## 83    83          Giulia Molinaro        1.818
## 84    84         Ariya Jutanugarn        1.819
## 85    85          Angela Stanford        1.819
## 86    86           Cydney Clanton        1.820
## 87    87           Jennifer Chang        1.820
## 88    88           Hee Young Park        1.821
## 89    89         Esther Henseleit        1.821
## 90    90             Wei-Ling Hsu        1.821
## 91    91         Charlotte Thomas        1.822
## 92    92                Amy Olson        1.822
## 93    93        Pernilla Lindberg        1.824
## 94    94                Kelly Tan        1.824
## 95    95             Alana Uriell        1.824
## 96    97           Katherine Kirk        1.826
## 97    98          Matilda Castren        1.827
## 98    99              Yealimi Noh        1.827
## 99   100               Jenny Shin        1.829
## 100  101       Brittany Lincicome        1.831
## 101  102             Sophia Popov        1.832
## 102  103             Na Yeon Choi        1.833
## 103  104           Ashleigh Buhai        1.834
## 104  105             Mina Harigae        1.838
## 105  106              Yu-Sang Hou        1.843
## 106  107            Christina Kim        1.844
## 107  108          Morgane Metraux        1.845
## 108  109    Fatima Fernandez Cano        1.845
## 109  110           Gerina Mendoza        1.847
## 110  111            Agathe Laisne        1.847
## 111  112               Dewi Weber        1.849
## 112  113       Jodi Ewart Shadoff        1.850
## 113  114               Bronte Law        1.851
## 114  115        Albane Valenzuela        1.854
## 115  116         Dana Finkelstein        1.855
## 116  117            Allison Emrey        1.856
## 117  118          Sophia Schubert        1.857
## 118  119              Maria Fassi        1.859
## 119  120                Ana Belac        1.861
## 120  121                 Mel Reid        1.861
## 121  122         Jaye Marie Green        1.864
## 122  123       Bianca Pagdanganan        1.865
## 123  124             Austin Ernst        1.865
## 124  125           Emily Pedersen        1.868
## 125  126           Anna Nordqvist        1.869
## 126  127         Wichanee Meechai        1.870
## 127  128                  Muni He        1.872
## 128  129            Jennifer Song        1.873
## 129  130            Jenny Coleman        1.873
## 130  131           Rachel Rohanna        1.876
## 131  132               Jiwon Jeon        1.876
## 132  133          Brooke Matthews        1.878
## 133  134                Mirim Lee        1.880
## 134  135        Pornanong Phatlum        1.880
## 135  136             Peiyun Chien        1.880
## 136  137          Lauren Coughlin        1.884
## 137  138   Katherine Perry-Hamski        1.885
## 138  139           Haylee Harford        1.893
## 139  140               Ruixin Liu        1.893
## 140  141            Brittany Lang        1.898
## 141  142               Sarah Kemp        1.911
## 142  143            Marissa Steen        1.917
## 143  144            Maddie Szeryk        1.923
## 144  145             Olivia Cowan        1.932
## 145  146         Savannah Vilaubi        1.953
## 146  147          Casey Danielson        1.960
## 147  148               Vivian Hou        1.984
## 148  149          Elizabeth Nagel        1.985
## 
## [[3]]
##     rank                     name greens_hit
## 1      1            Lexi Thompson       78.1
## 2      2                 Xiyu Lin       76.5
## 3      3             Hannah Green       76.2
## 4      4       Jodi Ewart Shadoff       75.7
## 5      5               Minjee Lee       75.6
## 6      6          Jennifer Kupcho       74.8
## 7      7              Marina Alex       74.5
## 8      8           Celine Boutier       74.4
## 9      9           Hinako Shibuno       74.2
## 10    10                A Lim Kim       74.1
## 11    11              Hyejin Choi       73.9
## 12    12              Yealimi Noh       73.9
## 13   13t     Nanna Koerstz Madsen       73.8
## 14   13t                 Amy Yang       73.8
## 15    15         Brooke Henderson       73.7
## 16   16t              Hyo Joo Kim       73.6
## 17   16t           Emily Pedersen       73.6
## 18    18            Jeong Eun Lee       73.5
## 19    19          Matilda Castren       73.2
## 20    20      Maude-Aimee Leblanc       73.1
## 21    21            Jessica Korda       72.9
## 22    22              Megan Khang       72.9
## 23    23             Jin Young Ko       72.6
## 24    24             Charley Hull       72.5
## 25   25t              In Gee Chun       72.4
## 26   25t            Danielle Kang       72.4
## 27   27t     Pajaree Anannarukarn       72.2
## 28   27t          Sophia Schubert       72.2
## 29    29          Sarah Schmelzel       72.0
## 30    30              Chella Choi       72.0
## 31    31         Perrine Delacour       71.8
## 32    32         Atthaya Thitikul       71.7
## 33   33t             Nasa Hataoka       71.5
## 34   33t         Ariya Jutanugarn       71.5
## 35    35           Haylee Harford       71.5
## 36    36        Brittany Altomare       71.5
## 37    37               Ally Ewing       71.3
## 38    38               Inbee Park       70.8
## 39    39              Stacy Lewis       70.7
## 40    40                Na Rin An       70.6
## 41    41              So Yeon Ryu       70.5
## 42    42          Carlota Ciganda       70.0
## 43    43           Anna Nordqvist       69.8
## 44    44              Ayaka Furue       69.3
## 45    45               Jenny Shin       69.3
## 46    46               Gaby Lopez       69.3
## 47    47           Allisen Corpuz       69.2
## 48    48                 Lydia Ko       69.2
## 49   49t            Leona Maguire       69.2
## 50   49t                Yuka Saso       69.2
## 51   51t             Wei-Ling Hsu       69.1
## 52   51t            Ryann O&#39;Toole       69.1
## 53    53        Lauren Stephenson       69.0
## 54    54            Jenny Coleman       69.0
## 55    55          Casey Danielson       68.9
## 56    56             Austin Ernst       68.8
## 57    58        Patty Tavatanakit       68.7
## 58    59              Nelly Korda       68.7
## 59    60            Sei Young Kim       68.7
## 60    61             Olivia Cowan       68.5
## 61    62        Madelene Sagstrom       68.5
## 62    63 Pauline Roussin-Bouchard       68.4
## 63    64                  Min Lee       68.3
## 64    65        Moriya Jutanugarn       68.2
## 65    66              Emma Talley       68.2
## 66    67            Janie Jackson       68.1
## 67   68t             In-Kyung Kim       68.1
## 68   68t            Lizette Salas       68.1
## 69    70      Jasmine Suwannapura       67.9
## 70   71t           Cydney Clanton       67.8
## 71   71t                Isi Gabsa       67.8
## 72   71t   Katherine Perry-Hamski       67.8
## 73    74                 Lilia Vu       67.7
## 74    75         Esther Henseleit       67.7
## 75    76          Giulia Molinaro       67.6
## 76   77t          Lauren Coughlin       67.6
## 77   77t                   Yu Liu       67.6
## 78   77t             Kaitlyn Papp       67.6
## 79    80               Annie Park       67.5
## 80   81t        Pernilla Lindberg       67.5
## 81   81t          Caroline Masson       67.5
## 82    83        Albane Valenzuela       67.4
## 83    84              Ruoning Yin       67.4
## 84    85         Jaye Marie Green       67.2
## 85    86               Paula Reto       66.9
## 86    87           Ashleigh Buhai       66.9
## 87   88t               Sarah Kemp       66.7
## 88   88t         Wichanee Meechai       66.7
## 89   88t               Su-Hyun Oh       66.7
## 90   88t            Marissa Steen       66.7
## 91    92         Stephanie Meadow       66.4
## 92    93               Eun-Hee Ji       66.3
## 93    94       Bianca Pagdanganan       66.2
## 94    95                Kelly Tan       66.1
## 95    96             Georgia Hall       65.9
## 96    97             Peiyun Chien       65.7
## 97   98t               Bronte Law       65.7
## 98   98t       Brittany Lincicome       65.7
## 99  100t           Rachel Rohanna       65.6
## 100 100t            Jennifer Song       65.6
## 101  102             Alana Uriell       65.5
## 102  103               Dewi Weber       65.4
## 103  104               Alison Lee       65.3
## 104  105                  Muni He       65.3
## 105  106    Fatima Fernandez Cano       65.2
## 106  107            Frida Kinhult       65.1
## 107  108             Yae Eun Hong       64.8
## 108  109         Charlotte Thomas       64.7
## 109  110             Sophia Popov       64.4
## 110  111                Amy Olson       64.4
## 111  112                 Mel Reid       64.3
## 112  113               Ruixin Liu       64.1
## 113  114          Morgane Metraux       63.9
## 114  115           Gerina Mendoza       63.5
## 115 116t               Haeji Kang       63.5
## 116 116t          Cheyenne Knight       63.5
## 117  118        Pornanong Phatlum       63.5
## 118 119t          Elizabeth Nagel       63.0
## 119 119t           Sung Hyun Park       63.0
## 120  121                Ana Belac       62.7
## 121  122              Maria Fassi       62.5
## 122  123           Lindsey Weaver       62.3
## 123  124         Linnea Johansson       61.9
## 124  125               Jiwon Jeon       61.8
## 125  126           Jennifer Chang       61.7
## 126  127             Mina Harigae       61.7
## 127 128t         Dana Finkelstein       61.1
## 128 128t            Christina Kim       61.1
## 129 128t            Brittany Lang       61.1
## 130 128t                Angel Yin       61.1
## 131  132           Gemma Dryburgh       60.7
## 132  133           Amanda Doherty       60.7
## 133 134t           Katherine Kirk       60.6
## 134 134t       Stephanie Kyriacou       60.6
## 135  136           Hee Young Park       60.2
## 136  137              Aditi Ashok       60.1
## 137  138             Cristie Kerr       59.4
## 138  139         Savannah Vilaubi       59.3
## 139  140            Agathe Laisne       59.0
## 140  141             Na Yeon Choi       59.0
## 141  142               Vivian Hou       58.3
## 142  143            Allison Emrey       57.9
## 143 144t              Yu-Sang Hou       57.6
## 144 144t                Mirim Lee       57.6
## 145  146          Angela Stanford       57.1
## 146 147t               Lauren Kim       56.9
## 147 147t          Brooke Matthews       56.9
## 148  149            Maddie Szeryk       48.1
## 
## [[4]]
##     rank                     name rounds score_average_actual
## 1      1               Minjee Lee     20               69.050
## 2      2              Hyo Joo Kim     20               69.300
## 3      3     Nanna Koerstz Madsen     25               69.320
## 4      4         Brooke Henderson     26               69.423
## 5      5           Celine Boutier     31               69.452
## 6      6                 Xiyu Lin     27               69.519
## 7      7            Lexi Thompson     15               69.533
## 8      8            Danielle Kang     29               69.655
## 9      9             Jin Young Ko     16               69.688
## 10    10                 Amy Yang     25               69.720
## 11    11         Atthaya Thitikul     31               69.774
## 12    12             Hannah Green     24               69.917
## 13    13        Patty Tavatanakit     27               69.963
## 14    14              Nelly Korda     11               70.000
## 15    15              Hyejin Choi     23               70.087
## 16    16             Nasa Hataoka     33               70.242
## 17    17                Yuka Saso     30               70.333
## 18    18            Leona Maguire     29               70.345
## 19    19                 Lydia Ko     24               70.375
## 20    20              In Gee Chun     29               70.379
## 21    21            Jeong Eun Lee     21               70.381
## 22    22            Jessica Korda     16               70.438
## 23    23             Charley Hull     18               70.500
## 24    24           Hinako Shibuno     24               70.542
## 25    25        Madelene Sagstrom     31               70.548
## 26    26            Lizette Salas     20               70.550
## 27    27              Marina Alex     27               70.630
## 28    28               Inbee Park     27               70.667
## 29    29     Pajaree Anannarukarn     33               70.697
## 30    30              Chella Choi     24               70.708
## 31    31               Alison Lee     29               70.724
## 32    32        Brittany Altomare     29               70.759
## 33    33          Jennifer Kupcho     28               70.786
## 34   34t              Stacy Lewis     29               70.862
## 35   34t          Sarah Schmelzel     29               70.862
## 36    36             Georgia Hall     23               70.870
## 37    37            Ryann O&#39;Toole     27               70.889
## 38    38                Na Rin An     21               70.905
## 39    39                A Lim Kim     29               70.931
## 40    40           Allisen Corpuz     13               71.000
## 41    41              So Yeon Ryu     16               71.063
## 42    42              Megan Khang     25               71.120
## 43    43               Gaby Lopez     30               71.167
## 44    44         Perrine Delacour     27               71.185
## 45    45            Sei Young Kim     14               71.214
## 46    46              Ayaka Furue     27               71.259
## 47    47           Gemma Dryburgh     15               71.267
## 48    48               Su-Hyun Oh     23               71.304
## 49   49t              Yealimi Noh     27               71.333
## 50   49t                 Lilia Vu     21               71.333
## 51    51          Carlota Ciganda     23               71.348
## 52    52         Ariya Jutanugarn     33               71.424
## 53    53              Emma Talley     26               71.462
## 54    54 Pauline Roussin-Bouchard     19               71.474
## 55    55      Maude-Aimee Leblanc     18               71.500
## 56    56      Jasmine Suwannapura     27               71.519
## 57    58                Isi Gabsa     15               71.600
## 58    59              Aditi Ashok     23               71.609
## 59   60t          Cheyenne Knight     21               71.619
## 60   60t               Paula Reto     21               71.619
## 61   62t       Jodi Ewart Shadoff     21               71.667
## 62   62t          Caroline Masson     21               71.667
## 63    64        Moriya Jutanugarn     29               71.690
## 64    65           Emily Pedersen     24               71.708
## 65   66t          Matilda Castren     28               71.714
## 66   66t               Eun-Hee Ji     14               71.714
## 67    68                  Min Lee     20               71.750
## 68    69             Wei-Ling Hsu     18               71.778
## 69    70               Jenny Shin     23               71.783
## 70    71         Stephanie Meadow     20               71.800
## 71   72t        Lauren Stephenson     21               71.810
## 72   72t                Kelly Tan     21               71.810
## 73    74               Annie Park     19               71.842
## 74    75             Kaitlyn Papp     12               71.917
## 75   76t          Giulia Molinaro     23               72.000
## 76   76t         Charlotte Thomas     14               72.000
## 77    78                   Yu Liu     24               72.083
## 78    79             In-Kyung Kim      8               72.125
## 79    80             Yae Eun Hong     15               72.133
## 80    81           Lindsey Weaver     23               72.174
## 81    82               Bronte Law     17               72.235
## 82    83            Janie Jackson     19               72.263
## 83    84        Albane Valenzuela     22               72.273
## 84    85          Sophia Schubert     14               72.286
## 85    86             Mina Harigae     20               72.300
## 86    87           Anna Nordqvist     23               72.304
## 87    88               Ally Ewing     18               72.333
## 88    89             Alana Uriell     14               72.357
## 89    90        Pernilla Lindberg     21               72.381
## 90    91            Frida Kinhult     14               72.429
## 91    92             Austin Ernst     18               72.444
## 92    93         Esther Henseleit     22               72.455
## 93    94       Brittany Lincicome     17               72.471
## 94    95              Ruoning Yin      8               72.500
## 95    96               Dewi Weber     18               72.556
## 96    97           Ashleigh Buhai     22               72.591
## 97    98         Jaye Marie Green     20               72.600
## 98    99               Ruixin Liu     13               72.615
## 99   100         Wichanee Meechai     27               72.630
## 100  101                Ana Belac     14               72.643
## 101 102t           Jennifer Chang      9               72.667
## 102 102t                Angel Yin     18               72.667
## 103  104                 Mel Reid     23               72.696
## 104  105         Dana Finkelstein     15               72.733
## 105  106        Pornanong Phatlum     19               72.737
## 106  107             Sophia Popov     20               72.850
## 107  108               Haeji Kang     14               72.857
## 108  109           Rachel Rohanna     15               72.867
## 109  110                Amy Olson     17               72.882
## 110 111t            Jenny Coleman     26               72.923
## 111 111t       Bianca Pagdanganan     13               72.923
## 112  113                  Muni He     12               73.000
## 113 114t           Cydney Clanton     15               73.067
## 114 114t   Katherine Perry-Hamski     15               73.067
## 115  116            Jennifer Song     20               73.100
## 116  117           Haylee Harford      8               73.125
## 117  118           Amanda Doherty     14               73.143
## 118 119t         Linnea Johansson     15               73.200
## 119 119t           Katherine Kirk     10               73.200
## 120 121t          Lauren Coughlin     12               73.250
## 121 121t           Gerina Mendoza     16               73.250
## 122  123            Christina Kim     14               73.286
## 123  124       Stephanie Kyriacou     10               73.300
## 124  125               Sarah Kemp     15               73.333
## 125  126            Marissa Steen     11               73.364
## 126 127t          Casey Danielson     10               73.500
## 127 127t             Cristie Kerr     10               73.500
## 128  129          Brooke Matthews      8               73.625
## 129  130          Morgane Metraux     14               73.643
## 130 131t             Peiyun Chien     12               73.667
## 131 131t           Hee Young Park     18               73.667
## 132  133           Sung Hyun Park     12               73.750
## 133  134              Maria Fassi     12               73.833
## 134  135          Angela Stanford     14               73.857
## 135  136            Agathe Laisne      8               73.875
## 136  137    Fatima Fernandez Cano     11               73.909
## 137  138               Jiwon Jeon      8               74.000
## 138  139              Yu-Sang Hou      8               74.375
## 139 140t            Allison Emrey     14               74.500
## 140 140t            Brittany Lang      8               74.500
## 141  142               Lauren Kim      8               74.625
## 142  143             Olivia Cowan      6               74.667
## 143  144             Na Yeon Choi     13               75.154
## 144  145                Mirim Lee     16               75.250
## 145  146         Savannah Vilaubi      6               76.000
## 146  147            Maddie Szeryk      6               76.333
## 147  148          Elizabeth Nagel      6               76.833
## 148  149               Vivian Hou      6               77.000</code></pre>
<p>All done!! And just like that, we’ve downloaded four different web
pages, extracted the tabled info, and formatted them without copying and
pasting any code. The same process for all four was only used one time
to write the initial function. Just apply some final formatting to clean
it up a bit and combine the separate data frames into a single, unified
one.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-1" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> lpga_data <span class="sc">%&gt;%</span> </span>
<span id="cb207-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reduce</span>(left_join, <span class="at">by=</span><span class="st">&quot;name&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Combine all list levels into a single tibble, matching by the &quot;Name&quot; column</span></span>
<span id="cb207-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;rank.&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb207-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;score_average&quot;</span><span class="ot">=</span><span class="st">&quot;score_average_actual&quot;</span>)</span>
<span id="cb207-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb207-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-6" aria-hidden="true" tabindex="-1"></a><span class="co"># VOILA! </span></span>
<span id="cb207-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>##                       name distance putt_average greens_hit rounds score_average
## 1           Emily Pedersen  282.521        1.868       73.6     24        71.708
## 2     Nanna Koerstz Madsen  280.160        1.735       73.8     25        69.320
## 3            Lexi Thompson  278.100        1.782       78.1     15        69.533
## 4                Yuka Saso  275.200        1.737       69.2     30        70.333
## 5 Pauline Roussin-Bouchard  274.974        1.782       68.4     19        71.474
## 6       Bianca Pagdanganan  274.923        1.865       66.2     13        72.923</code></pre>
</div>
<div id="non-reproducible-example-juvenile-life-without-parole-study" class="section level3" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> Non-reproducible example (Juvenile Life Without Parole study)</h3>
<p>In the Juvenile Lifers study, there were a series of questions that
participants rated on a scale of 0-100 in terms of difficulty. Part of
our analysis involved taking the ratings on those variables and giving
them relative rankings, so that each of the 6 variables in the series
was rated from the least to most difficult, by participant.</p>
<p>Now if we only needed to compute these rankings once this wouldn’t have
been any big deal; however, we needed to do it <strong>three times</strong>.</p>
<p>Much of the same code and the same process would need to be copied and pasted,
resulting in a very long, messy, harder to read script. With purrr
however, we can reduce the redundancies to a minimum, saving time and reducing the chances of mistakes.</p>
<p><strong><em>Step 1.</em></strong>
Just like before, the first step is to find a line-by-line solution for a single item, and then to generalize this into a shortcut function that can be applied to the any item “i” in a series of items.</p>
<p>For the sake of brevity, I’m going to skip most of that and just include the functions below.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;C:/Github Repos/Studies/JLWOP/Data and Models/jlwop_reentry_survey.RData&quot;</span>)</span>
<span id="cb209-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="do">#### CREATE THE DATA SETS WE NEED####</span></span>
<span id="cb209-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span>jlwop_reentry_survey <span class="co"># analysis 1 keeps the data as-is</span></span>
<span id="cb209-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span>jlwop_reentry_survey <span class="sc">%&gt;%</span> <span class="co"># supplementary analysis replaces the NA&#39;s with 0</span></span>
<span id="cb209-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(barrier_housing<span class="sc">:</span>barrier_identification), replace_na,<span class="dv">0</span>))</span>
<span id="cb209-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(jlwop_reentry_survey) <span class="co"># remove old data set to avoid confusion</span></span>
<span id="cb209-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-12" aria-hidden="true" tabindex="-1"></a><span class="do">#### Functions ####</span></span>
<span id="cb209-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-14" aria-hidden="true" tabindex="-1"></a><span class="co"># transformation function to wrangle the data into proper formatting</span></span>
<span id="cb209-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-15" aria-hidden="true" tabindex="-1"></a>rotate_data<span class="ot">=</span><span class="cf">function</span>(data, variable_prefix){</span>
<span id="cb209-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb209-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-17" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb209-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb209-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols=</span> <span class="fu">starts_with</span>(variable_prefix), <span class="co"># collect all the desired variables (i.e., columns)....</span></span>
<span id="cb209-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="co">#...and put them into a new categorical variable called &quot;variable&quot;</span></span>
<span id="cb209-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;participant_score&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># ...and store their values in a new variable called &quot;participant_score&quot;</span></span>
<span id="cb209-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(unique,participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb209-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb209-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(unique, participant_score, variable)) <span class="sc">%&gt;%</span> <span class="co"># keep only these 3 variables</span></span>
<span id="cb209-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(variable, <span class="at">.before =</span> participant_score) <span class="co"># put the newly created variable up front</span></span>
<span id="cb209-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-27" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb209-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb209-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-31" aria-hidden="true" tabindex="-1"></a><span class="co"># creating the rankings for each variable; then transform data back to original structure</span></span>
<span id="cb209-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-32" aria-hidden="true" tabindex="-1"></a>rank_and_unpivot<span class="ot">=</span><span class="cf">function</span>(data){</span>
<span id="cb209-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-33" aria-hidden="true" tabindex="-1"></a>  data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb209-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unique) <span class="sc">%&gt;%</span> <span class="co"># group the scores so they can be ranked by participant</span></span>
<span id="cb209-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank1=</span><span class="fu">dense_rank</span>(participant_score), <span class="co"># create ranking variable</span></span>
<span id="cb209-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-36" aria-hidden="true" tabindex="-1"></a>               <span class="at">rank=</span><span class="fu">max</span>(rank1,<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="dv">1</span> <span class="sc">-</span> rank1) <span class="sc">%&gt;%</span> <span class="co"># fix ranks by flipping to ascending order</span></span>
<span id="cb209-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank=</span><span class="fu">factor</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># convert rank to factor structure</span></span>
<span id="cb209-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rank1)</span>
<span id="cb209-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot back to wide</span></span>
<span id="cb209-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-42" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb209-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> rank<span class="sc">:</span>participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb209-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># un-group the data and delete the generated names</span></span>
<span id="cb209-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-46" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb209-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-47" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong><em>Step 2.</em></strong>
Again, like before, we want to combine all elements of interest into some object. Once we have that, we then pass said object to <code>map()</code> and supply the map call with our custom function.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-1" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank, <span class="at">na_zero=</span>na_zero) <span class="sc">%&gt;%</span> <span class="co"># create lists</span></span>
<span id="cb210-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f=</span>rotate_data, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># apply custom function along whole list</span></span>
<span id="cb210-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rank_and_unpivot) <span class="co"># again!!  DO IT AGAIN! With another function this time.</span></span>
<span id="cb210-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="co"># extract list elements to make them data frames again</span></span>
<span id="cb210-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-6" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(dfs, <span class="fu">globalenv</span>())</span>
<span id="cb210-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb210-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(dfs) <span class="co">#discard list. It has fulfilled its purpose.</span></span></code></pre></div>
<p>And just like that, we’re done!</p>
</div>
<div id="example-3-readimport-several-files-at-once-with-map" class="section level3" number="10.3.3">
<h3><span class="header-section-number">10.3.3</span> Example 3: Read/Import several files at once with <code>map()</code></h3>
<p>Multiple ways you can do this….</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="do">################### Option 1: read all into the global environment, keeping them as SEPERATE df&#39;s ###############</span></span>
<span id="cb211-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-2" aria-hidden="true" tabindex="-1"></a>legaldmlab<span class="sc">::</span><span class="fu">read_all</span>(<span class="at">path=</span><span class="st">&quot;Data Repository/Stats Data Repository/JASP files&quot;</span>, <span class="at">extension =</span> <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb211-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1.A: Squish ALL OBJECTS in the working environment into a list</span></span>
<span id="cb211-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Again, note the &quot;ALL OBJECTS&quot; part; make sure there are no functions or other things in the environment when you run this.</span></span>
<span id="cb211-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-6" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">mget</span>(<span class="fu">ls</span>())</span>
<span id="cb211-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-9" aria-hidden="true" tabindex="-1"></a><span class="do">############# Option 2: Read in all files as a LIST of df&#39;s, then stitch in the names #####################################</span></span>
<span id="cb211-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-11" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>, <span class="st">&quot;/&quot;</span>), </span>
<span id="cb211-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-12" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list.files</span>(<span class="at">path=</span>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>))</span>
<span id="cb211-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-14" aria-hidden="true" tabindex="-1"></a>files_list<span class="ot">=</span>files <span class="sc">|&gt;</span> </span>
<span id="cb211-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(readr<span class="sc">::</span>read_csv)</span>
<span id="cb211-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(files_list)<span class="ot">=</span><span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>)) <span class="sc">|&gt;</span> <span class="co">#specify file path as a string</span></span>
<span id="cb211-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># pass the path string to list files; search in this location for files with this extension</span></span>
<span id="cb211-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="at">pattern=</span><span class="st">&quot;.csv&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>) <span class="co"># remove this pattern to save only the name</span></span>
<span id="cb211-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2.A: Extract each data frame and put everything into the global environment</span></span>
<span id="cb211-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-23" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(cog_data, <span class="fu">globalenv</span>())</span></code></pre></div>
</div>
</div>
<div id="other-purrr-commands" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Other purrr commands</h2>
<p>Note that <code>map()</code> always returns a list, and depending on the output
that you want, you may need to use a variation of <code>map()</code>. These
variations are as follows:</p>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Return</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>map_lgl()</code></td>
<td>logical vector</td>
</tr>
<tr class="even">
<td><code>map_int()</code></td>
<td>integer vector</td>
</tr>
<tr class="odd">
<td><code>map_dbl()</code></td>
<td>double vector</td>
</tr>
<tr class="even">
<td><code>map_chr()</code></td>
<td>character vector</td>
</tr>
<tr class="odd">
<td><code>walk()</code></td>
<td>only returns the side effects of a function</td>
</tr>
</tbody>
</table>
<div id="the-walk-and-walk2-commands" class="section level3" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> The <code>walk</code> and <code>walk2</code> commands</h3>
<p>Walk() is useful for when you just want to plot something or write a
save file to your disk, etc. It does not give you any return to store
something in the environment. You use it to write/read files, open
graphics windows, and so on.</p>
<p><strong><em>Example: Writing multiple files at once</em></strong></p>
<p>Utilize <code>purrr::walk2()</code> to apply a function iteratively on TWO objects
simultaneously. To save multiple .csv files with <code>walk2</code>, we need two
distinct lists: 1. A list of data frames that we wish to export, 2. and
the file paths, complete with the file names and extensions, for each
file to be written</p>
<p>First create and define both list items. Then apply <code>walk2()</code> to pluck
an element from list 1 and its corresponding element from list 2, and
apply the <code>write_csv</code> function in for-loop fashion.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Custom function ####</span></span>
<span id="cb212-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Create needed function that grabs file names and stitches them together with the correct path and extension</span></span>
<span id="cb212-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Included in legaldmlab package</span></span>
<span id="cb212-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-4" aria-hidden="true" tabindex="-1"></a>bundle_paths<span class="ot">=</span><span class="cf">function</span>(df_list, output_location, file_type){</span>
<span id="cb212-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-5" aria-hidden="true" tabindex="-1"></a>  names<span class="ot">=</span><span class="fu">names</span>(df_list)</span>
<span id="cb212-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-6" aria-hidden="true" tabindex="-1"></a>  paths<span class="ot">=</span><span class="fu">rep</span>(here<span class="sc">::</span><span class="fu">here</span>(output_location), <span class="fu">length</span>(names))</span>
<span id="cb212-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-7" aria-hidden="true" tabindex="-1"></a>  extension<span class="ot">=</span><span class="fu">rep</span>(<span class="fu">c</span>(file_type), <span class="fu">length</span>(names))</span>
<span id="cb212-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb212-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-9" aria-hidden="true" tabindex="-1"></a>  fixed_names<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;/&quot;</span>,names)</span>
<span id="cb212-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb212-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-11" aria-hidden="true" tabindex="-1"></a>  path_bundle<span class="ot">=</span><span class="fu">list</span>(paths,fixed_names, extension) <span class="sc">%&gt;%</span> </span>
<span id="cb212-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pmap</span>(., paste0)</span>
<span id="cb212-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb212-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(path_bundle)</span>
<span id="cb212-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb212-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-17" aria-hidden="true" tabindex="-1"></a><span class="do">#### Exporting the .csv files for SPSS/JASP/etc. ####</span></span>
<span id="cb212-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Define list 1</span></span>
<span id="cb212-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-19" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank,</span>
<span id="cb212-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero=</span>na_zero,</span>
<span id="cb212-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero_helpreint=</span>na_zero_helpreint)</span>
<span id="cb212-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-23" aria-hidden="true" tabindex="-1"></a><span class="co"># list 2</span></span>
<span id="cb212-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-24" aria-hidden="true" tabindex="-1"></a>paths_csv<span class="ot">=</span><span class="fu">bundle_paths</span>(<span class="at">df_list =</span> dfs, <span class="at">folder_location =</span> <span class="st">&quot;JLWOP/Data and Models&quot;</span>, <span class="at">file_type =</span> <span class="st">&quot;.sav&quot;</span>)</span>
<span id="cb212-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over all elements in list 1 and corresponding element in list 2;</span></span>
<span id="cb212-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-28" aria-hidden="true" tabindex="-1"></a><span class="co"># and apply the the write_csv function to each</span></span>
<span id="cb212-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-29" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(<span class="at">.x=</span>dfs, <span class="at">.y=</span> paths, <span class="at">.f=</span>haven<span class="sc">::</span>write_sav)</span>
<span id="cb212-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-32" aria-hidden="true" tabindex="-1"></a><span class="do">#### .RData file for R users ####</span></span>
<span id="cb212-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine multiple data frames into a single .RData file and export</span></span>
<span id="cb212-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-34" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;na_blank&quot;</span>, <span class="st">&quot;na_zero&quot;</span>, <span class="st">&quot;na_zero_helpreint&quot;</span>), </span>
<span id="cb212-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-35" aria-hidden="true" tabindex="-1"></a>     <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;JLWOP&quot;</span>, <span class="st">&quot;Data and Models&quot;</span>,<span class="st">&quot;ranking_data.RData&quot;</span>))</span></code></pre></div>
</div>
<div id="map2-and-walk2" class="section level3" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> <code>map2</code> (and <code>walk2</code>)</h3>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb213-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_a.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_a.png" width="594" /></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_b.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_b.png" width="816" /></p>
</div>
<div id="pmap-for-when-you-have-a-bunch-of-shit" class="section level3" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> <code>pmap</code> for when you have a bunch of shit</h3>
<p>This function is for iterating over <em>three or more</em> elements. As soon as you have &gt;2 items you have to iterate over, you need pmap().It works similar to to map and map2, but instead of iterating over a single object x or two objects x and y, it acts on <strong>a list object called .l</strong></p>
<p>The list is a list of all the objects you want to iterate over. If you
give it a list of 18 items, it iterates over all 18. If the list only
has two things, it only acts on those two.</p>
<p>She says its easiest to imagine the list as a data frame, and the
columns of the data frame like the elements of that list.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb215-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap.png" width="466" /></p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap_2.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap_2.png" width="600" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="misc.-stuff.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="intro-to-r-markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/edit/master/10-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/blob/master/10-functions.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
