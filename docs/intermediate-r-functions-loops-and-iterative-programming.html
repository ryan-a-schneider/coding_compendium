<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set</title>
  <meta name="description" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  
  
  

<meta name="author" content="Ryan Schneider" />


<meta name="date" content="2022-08-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="misc.-stuff.html"/>
<link rel="next" href="intro-to-r-markdown.html"/>
<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Compendium</a></li>

<li class="divider"></li>
<li><a href="index.html#a-monument-to-my-madness" id="toc-a-monument-to-my-madness"><span class="toc-section-number">1</span> A Monument to my Madness<span></span></a>
<ul>
<li><a href="index.html#what-this-book-is-and-what-it-is-not" id="toc-what-this-book-is-and-what-it-is-not"><span class="toc-section-number">1.1</span> What this book is, and what it is not<span></span></a></li>
</ul></li>
<li><a href="introduction-r-basics.html#introduction-r-basics" id="toc-introduction-r-basics"><span class="toc-section-number">2</span> Introduction: R Basics<span></span></a>
<ul>
<li><a href="introduction-r-basics.html#importing-data" id="toc-importing-data"><span class="toc-section-number">2.1</span> Importing Data<span></span></a>
<ul>
<li><a href="introduction-r-basics.html#spreadsheets" id="toc-spreadsheets"><span class="toc-section-number">2.1.1</span> Spreadsheets<span></span></a></li>
</ul></li>
<li><a href="introduction-r-basics.html#exporting-i.e.-saving-data-and-output" id="toc-exporting-i.e.-saving-data-and-output"><span class="toc-section-number">2.2</span> Exporting (i.e., saving) Data and Output<span></span></a>
<ul>
<li><a href="introduction-r-basics.html#exporting-to-.csv" id="toc-exporting-to-.csv"><span class="toc-section-number">2.2.1</span> Exporting to .CSV<span></span></a></li>
<li><a href="introduction-r-basics.html#export-to-.rdata-and-load-the-data-again-later" id="toc-export-to-.rdata-and-load-the-data-again-later"><span class="toc-section-number">2.2.2</span> Export to .RData (and load the data again later)<span></span></a></li>
<li><a href="introduction-r-basics.html#export-to-excel" id="toc-export-to-excel"><span class="toc-section-number">2.2.3</span> Export to Excel<span></span></a></li>
<li><a href="introduction-r-basics.html#accessedit-specific-cell-number-values" id="toc-accessedit-specific-cell-number-values"><span class="toc-section-number">2.2.4</span> Access/edit specific cell number values<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="wrangle-data.html#wrangle-data" id="toc-wrangle-data"><span class="toc-section-number">3</span> Wrangle Data<span></span></a>
<ul>
<li><a href="wrangle-data.html#joining-or-splitting" id="toc-joining-or-splitting"><span class="toc-section-number">3.1</span> Joining or Splitting<span></span></a>
<ul>
<li><a href="wrangle-data.html#whole-data-sets" id="toc-whole-data-sets"><span class="toc-section-number">3.1.1</span> Whole Data Sets<span></span></a></li>
<li><a href="wrangle-data.html#individual-columnsvariables" id="toc-individual-columnsvariables"><span class="toc-section-number">3.1.2</span> Individual Columns/Variables<span></span></a></li>
</ul></li>
<li><a href="wrangle-data.html#selectingextracting-specific-variables-with-select" id="toc-selectingextracting-specific-variables-with-select"><span class="toc-section-number">3.2</span> Selecting/extracting specific variables with <code>select()</code><span></span></a></li>
<li><a href="wrangle-data.html#advanced-filtering-techniques" id="toc-advanced-filtering-techniques"><span class="toc-section-number">3.3</span> Advanced Filtering techniques<span></span></a>
<ul>
<li><a href="wrangle-data.html#filter-based-on-partial-match" id="toc-filter-based-on-partial-match"><span class="toc-section-number">3.3.1</span> Filter based on partial match<span></span></a></li>
<li><a href="wrangle-data.html#filtering-based-on-multiple-conditions" id="toc-filtering-based-on-multiple-conditions"><span class="toc-section-number">3.3.2</span> Filtering based on multiple conditions<span></span></a></li>
<li><a href="wrangle-data.html#filtering-across-multiple-columns" id="toc-filtering-across-multiple-columns"><span class="toc-section-number">3.3.3</span> Filtering across multiple columns<span></span></a></li>
</ul></li>
<li><a href="wrangle-data.html#if-then-and-case-when" id="toc-if-then-and-case-when"><span class="toc-section-number">3.4</span> If-then and Case-when<span></span></a>
<ul>
<li><a href="wrangle-data.html#if-then" id="toc-if-then"><span class="toc-section-number">3.4.1</span> If-then<span></span></a></li>
<li><a href="wrangle-data.html#case-when" id="toc-case-when"><span class="toc-section-number">3.4.2</span> Case-when<span></span></a></li>
</ul></li>
<li><a href="wrangle-data.html#conditional-replacement-of-values" id="toc-conditional-replacement-of-values"><span class="toc-section-number">3.5</span> Conditional replacement of values<span></span></a></li>
<li><a href="wrangle-data.html#merging-variables" id="toc-merging-variables"><span class="toc-section-number">3.6</span> Merging variables<span></span></a></li>
<li><a href="wrangle-data.html#apply-a-function-to-multiple-variables-at-once" id="toc-apply-a-function-to-multiple-variables-at-once"><span class="toc-section-number">3.7</span> Apply a function to multiple variables at once<span></span></a></li>
<li><a href="wrangle-data.html#pivoting-i.e.-transposing-data" id="toc-pivoting-i.e.-transposing-data"><span class="toc-section-number">3.8</span> Pivoting (i.e., transposing) data<span></span></a>
<ul>
<li><a href="wrangle-data.html#condense-multiple-rows-into-a-single-column-pivot-wide-to-long" id="toc-condense-multiple-rows-into-a-single-column-pivot-wide-to-long"><span class="toc-section-number">3.8.1</span> Condense multiple rows into a single column (pivot wide to long)<span></span></a></li>
</ul></li>
<li><a href="wrangle-data.html#turn-row-names-into-a-columnvariable" id="toc-turn-row-names-into-a-columnvariable"><span class="toc-section-number">3.9</span> Turn row names into a column/variable<span></span></a></li>
<li><a href="wrangle-data.html#how-to-editchange-column-names" id="toc-how-to-editchange-column-names"><span class="toc-section-number">3.10</span> How to edit/change column names<span></span></a></li>
<li><a href="wrangle-data.html#re-order-columns-in-a-data-set" id="toc-re-order-columns-in-a-data-set"><span class="toc-section-number">3.11</span> Re-order columns in a data set<span></span></a></li>
<li><a href="wrangle-data.html#date-and-time-variables" id="toc-date-and-time-variables"><span class="toc-section-number">3.12</span> Date and time variables<span></span></a>
<ul>
<li><a href="wrangle-data.html#date-time-objects" id="toc-date-time-objects"><span class="toc-section-number">3.12.1</span> Date-time objects<span></span></a></li>
<li><a href="wrangle-data.html#date-only-objects" id="toc-date-only-objects"><span class="toc-section-number">3.12.2</span> Date-only objects<span></span></a></li>
<li><a href="wrangle-data.html#find-the-difference-between-two-datestimes" id="toc-find-the-difference-between-two-datestimes"><span class="toc-section-number">3.12.3</span> Find the difference between two dates/times<span></span></a></li>
</ul></li>
<li><a href="wrangle-data.html#reverse-code-a-variable" id="toc-reverse-code-a-variable"><span class="toc-section-number">3.13</span> Reverse-code a variable<span></span></a></li>
<li><a href="wrangle-data.html#dummy-coding-the-very-fast-and-easy-way" id="toc-dummy-coding-the-very-fast-and-easy-way"><span class="toc-section-number">3.14</span> Dummy coding (the very fast and easy way)<span></span></a></li>
<li><a href="wrangle-data.html#create-a-relative-ranking-among-several-variables" id="toc-create-a-relative-ranking-among-several-variables"><span class="toc-section-number">3.15</span> Create a relative ranking among several variables<span></span></a></li>
<li><a href="wrangle-data.html#manipulating-the-working-environment-and-many-things-at-once" id="toc-manipulating-the-working-environment-and-many-things-at-once"><span class="toc-section-number">3.16</span> Manipulating the working environment and many things at once<span></span></a>
<ul>
<li><a href="wrangle-data.html#stuff-the-whole-working-environment-into-a-list" id="toc-stuff-the-whole-working-environment-into-a-list"><span class="toc-section-number">3.16.1</span> Stuff the WHOLE working environment into a list<span></span></a></li>
<li><a href="wrangle-data.html#extract-everything-from-a-list-into-the-environment" id="toc-extract-everything-from-a-list-into-the-environment"><span class="toc-section-number">3.16.2</span> Extract everything from a list into the environment<span></span></a></li>
<li><a href="wrangle-data.html#delete-everything-in-the-entire-environment-except-for-one-item" id="toc-delete-everything-in-the-entire-environment-except-for-one-item"><span class="toc-section-number">3.16.3</span> Delete everything in the entire environment, except for one item<span></span></a></li>
</ul></li>
<li><a href="wrangle-data.html#wrangling-lists" id="toc-wrangling-lists"><span class="toc-section-number">3.17</span> Wrangling Lists<span></span></a>
<ul>
<li><a href="wrangle-data.html#nesting" id="toc-nesting"><span class="toc-section-number">3.17.1</span> Nesting<span></span></a></li>
<li><a href="wrangle-data.html#combiningcollapsing-list-levels-reducing" id="toc-combiningcollapsing-list-levels-reducing"><span class="toc-section-number">3.17.2</span> Combining/collapsing list levels (Reducing)<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="clean-data.html#clean-data" id="toc-clean-data"><span class="toc-section-number">4</span> Clean Data<span></span></a>
<ul>
<li><a href="clean-data.html#replace-a-value-with-na" id="toc-replace-a-value-with-na"><span class="toc-section-number">4.1</span> Replace a value with NA<span></span></a></li>
<li><a href="clean-data.html#replace-nas-with-a-value" id="toc-replace-nas-with-a-value"><span class="toc-section-number">4.2</span> Replace NA’s with a value<span></span></a></li>
<li><a href="clean-data.html#identify-columns-or-rows-with-missing-values" id="toc-identify-columns-or-rows-with-missing-values"><span class="toc-section-number">4.3</span> Identify columns or rows with Missing values<span></span></a></li>
<li><a href="clean-data.html#find-the-percentage-of-a-variable-that-is-missing" id="toc-find-the-percentage-of-a-variable-that-is-missing"><span class="toc-section-number">4.4</span> Find the percentage of a variable that is missing<span></span></a></li>
<li><a href="clean-data.html#exclude-missing-values-from-analysis" id="toc-exclude-missing-values-from-analysis"><span class="toc-section-number">4.5</span> Exclude Missing values from analysis<span></span></a></li>
<li><a href="clean-data.html#dropping-missing-values-from-the-data-set" id="toc-dropping-missing-values-from-the-data-set"><span class="toc-section-number">4.6</span> Dropping Missing values from the data set<span></span></a></li>
</ul></li>
<li><a href="working-with-factors.html#working-with-factors" id="toc-working-with-factors"><span class="toc-section-number">5</span> Working with Factors<span></span></a>
<ul>
<li><a href="working-with-factors.html#manually-recodechange-a-factors-levels" id="toc-manually-recodechange-a-factors-levels"><span class="toc-section-number">5.1</span> Manually recode/change a factor’s levels<span></span></a></li>
<li><a href="working-with-factors.html#collapse-factor-levels" id="toc-collapse-factor-levels"><span class="toc-section-number">5.2</span> Collapse factor levels<span></span></a></li>
<li><a href="working-with-factors.html#add-levels-to-a-factor" id="toc-add-levels-to-a-factor"><span class="toc-section-number">5.3</span> Add levels to a factor<span></span></a></li>
<li><a href="working-with-factors.html#drop-unused-levels" id="toc-drop-unused-levels"><span class="toc-section-number">5.4</span> Drop unused levels<span></span></a></li>
<li><a href="working-with-factors.html#change-the-order-of-a-factors-levels" id="toc-change-the-order-of-a-factors-levels"><span class="toc-section-number">5.5</span> Change the order of a factor’s levels<span></span></a></li>
</ul></li>
<li><a href="working-with-strings.html#working-with-strings" id="toc-working-with-strings"><span class="toc-section-number">6</span> Working with Strings<span></span></a>
<ul>
<li><a href="working-with-strings.html#remove-a-pattern-from-a-string" id="toc-remove-a-pattern-from-a-string"><span class="toc-section-number">6.1</span> Remove a pattern from a string<span></span></a></li>
<li><a href="working-with-strings.html#replace-one-pattern-in-a-string-with-another" id="toc-replace-one-pattern-in-a-string-with-another"><span class="toc-section-number">6.2</span> Replace one pattern in a string with another<span></span></a></li>
<li><a href="working-with-strings.html#find-i.e.-filter-for-all-instances-of-a-string" id="toc-find-i.e.-filter-for-all-instances-of-a-string"><span class="toc-section-number">6.3</span> Find (i.e., filter for) all instances of a string<span></span></a></li>
<li><a href="working-with-strings.html#drop-all-rows-from-a-data-set-that-contain-a-certain-string" id="toc-drop-all-rows-from-a-data-set-that-contain-a-certain-string"><span class="toc-section-number">6.4</span> Drop all rows from a data set that contain a certain string<span></span></a></li>
<li><a href="working-with-strings.html#force-all-letters-to-lower-case" id="toc-force-all-letters-to-lower-case"><span class="toc-section-number">6.5</span> Force all letters to lower case<span></span></a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#figures-and-graphs-with-the-ggplot-and-see-packages" id="toc-figures-and-graphs-with-the-ggplot-and-see-packages"><span class="toc-section-number">7</span> Figures and Graphs with the ggplot and see packages<span></span></a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#commands-for-ggplot-graph-types" id="toc-commands-for-ggplot-graph-types"><span class="toc-section-number">7.1</span> Commands for ggplot graph types<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#specific-commands-for-specific-types-of-analysis" id="toc-specific-commands-for-specific-types-of-analysis"><span class="toc-section-number">7.2</span> Specific Commands for Specific Types of Analysis<span></span></a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#lavaan-stuff" id="toc-lavaan-stuff"><span class="toc-section-number">7.2.1</span> lavaan stuff<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#bayes-stuff" id="toc-bayes-stuff"><span class="toc-section-number">7.2.2</span> Bayes stuff<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#histograms-and-density-curves" id="toc-histograms-and-density-curves"><span class="toc-section-number">7.2.3</span> Histograms and density curves<span></span></a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#highlight-specific-points" id="toc-highlight-specific-points"><span class="toc-section-number">7.3</span> Highlight specific points<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-labels-to-data-points" id="toc-add-labels-to-data-points"><span class="toc-section-number">7.4</span> Add labels to data points<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#plotting-multiple-graphs-at-once" id="toc-plotting-multiple-graphs-at-once"><span class="toc-section-number">7.5</span> Plotting multiple graphs at once<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#change-the-colors-bars-columns-dots-etc." id="toc-change-the-colors-bars-columns-dots-etc."><span class="toc-section-number">7.6</span> Change the colors (bars; columns; dots; etc.)<span></span></a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#fine-tuning-colors" id="toc-fine-tuning-colors"><span class="toc-section-number">7.6.1</span> Fine-tuning colors<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#more-options-with-the-see-package" id="toc-more-options-with-the-see-package"><span class="toc-section-number">7.6.2</span> More options with the see package<span></span></a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#other-aesthetic-mappings" id="toc-other-aesthetic-mappings"><span class="toc-section-number">7.7</span> Other aesthetic mappings<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#adding-and-customizing-text" id="toc-adding-and-customizing-text"><span class="toc-section-number">7.8</span> Adding and Customizing Text<span></span></a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-title-axis-labels-and-captions" id="toc-add-a-title-axis-labels-and-captions"><span class="toc-section-number">7.8.1</span> Add a title, axis labels, and captions<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#center-graph-title" id="toc-center-graph-title"><span class="toc-section-number">7.8.2</span> Center graph title<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#use-different-fonts" id="toc-use-different-fonts"><span class="toc-section-number">7.8.3</span> Use different fonts<span></span></a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#remove-gridlines" id="toc-remove-gridlines"><span class="toc-section-number">7.9</span> Remove gridlines<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#faceting" id="toc-faceting"><span class="toc-section-number">7.10</span> Faceting<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#log-transformations" id="toc-log-transformations"><span class="toc-section-number">7.11</span> Log transformations<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#changing-the-scale-of-the-axis" id="toc-changing-the-scale-of-the-axis"><span class="toc-section-number">7.12</span> Changing the scale of the axis<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-regression-line" id="toc-add-a-regression-line"><span class="toc-section-number">7.13</span> Add a regression line<span></span></a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#save-a-graph-or-figure" id="toc-save-a-graph-or-figure"><span class="toc-section-number">7.14</span> Save a graph or figure<span></span></a></li>
</ul></li>
<li><a href="making-tables-with-flextable.html#making-tables-with-flextable" id="toc-making-tables-with-flextable"><span class="toc-section-number">8</span> Making Tables with flextable<span></span></a>
<ul>
<li><a href="making-tables-with-flextable.html#apa-table-components" id="toc-apa-table-components"><span class="toc-section-number">8.1</span> APA Table Components<span></span></a></li>
<li><a href="making-tables-with-flextable.html#indent-values" id="toc-indent-values"><span class="toc-section-number">8.2</span> Indent values<span></span></a></li>
<li><a href="making-tables-with-flextable.html#add-a-horizontal-border-aka-horizontal-spanner" id="toc-add-a-horizontal-border-aka-horizontal-spanner"><span class="toc-section-number">8.3</span> Add a Horizontal border (AKA horizontal “spanner”)<span></span></a></li>
<li><a href="making-tables-with-flextable.html#change-font-and-font-size" id="toc-change-font-and-font-size"><span class="toc-section-number">8.4</span> Change font and font size<span></span></a></li>
<li><a href="making-tables-with-flextable.html#grouped-table" id="toc-grouped-table"><span class="toc-section-number">8.5</span> Grouped table<span></span></a></li>
<li><a href="making-tables-with-flextable.html#adjust-line-spacing" id="toc-adjust-line-spacing"><span class="toc-section-number">8.6</span> Adjust line spacing<span></span></a></li>
<li><a href="making-tables-with-flextable.html#set-global-options-for-all-flextables" id="toc-set-global-options-for-all-flextables"><span class="toc-section-number">8.7</span> Set global options for all flextables<span></span></a></li>
<li><a href="making-tables-with-flextable.html#complete-example" id="toc-complete-example"><span class="toc-section-number">8.8</span> Complete Example<span></span></a></li>
<li><a href="making-tables-with-flextable.html#wraper-function-to-create-apa-style-tables" id="toc-wraper-function-to-create-apa-style-tables"><span class="toc-section-number">8.9</span> Wraper-function to create APA-style tables<span></span></a></li>
</ul></li>
<li><a href="misc.-stuff.html#misc.-stuff" id="toc-misc.-stuff"><span class="toc-section-number">9</span> Misc. Stuff<span></span></a>
<ul>
<li><a href="misc.-stuff.html#scrape-web-pages-for-data-tables" id="toc-scrape-web-pages-for-data-tables"><span class="toc-section-number">9.1</span> Scrape web pages for data tables<span></span></a></li>
<li><a href="misc.-stuff.html#read-spss-files-into-r" id="toc-read-spss-files-into-r"><span class="toc-section-number">9.2</span> Read SPSS files into R<span></span></a></li>
<li><a href="misc.-stuff.html#turn-numbers-into-percentages" id="toc-turn-numbers-into-percentages"><span class="toc-section-number">9.3</span> Turn numbers into percentages<span></span></a></li>
<li><a href="misc.-stuff.html#find-all-possible-combindations-of-items-in-a-vector" id="toc-find-all-possible-combindations-of-items-in-a-vector"><span class="toc-section-number">9.4</span> Find all possible combindations of items in a vector<span></span></a></li>
<li><a href="misc.-stuff.html#download-files-from-the-internet" id="toc-download-files-from-the-internet"><span class="toc-section-number">9.5</span> Download files from the internet<span></span></a></li>
<li><a href="misc.-stuff.html#print-multiple-things-in-one-statement" id="toc-print-multiple-things-in-one-statement"><span class="toc-section-number">9.6</span> Print multiple things in one statement<span></span></a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#intermediate-r-functions-loops-and-iterative-programming" id="toc-intermediate-r-functions-loops-and-iterative-programming"><span class="toc-section-number">10</span> Intermediate R: Functions, Loops, and Iterative Programming<span></span></a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#functions" id="toc-functions"><span class="toc-section-number">10.1</span> Functions<span></span></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#for-loops" id="toc-for-loops"><span class="toc-section-number">10.2</span> For-loops<span></span></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#purrr-and-iterative-functions" id="toc-purrr-and-iterative-functions"><span class="toc-section-number">10.3</span> purrr and Iterative Functions<span></span></a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#reproducible-example-scraping-web-data" id="toc-reproducible-example-scraping-web-data"><span class="toc-section-number">10.3.1</span> Reproducible example: Scraping web data<span></span></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#non-reproducible-example-juvenile-life-without-parole-study" id="toc-non-reproducible-example-juvenile-life-without-parole-study"><span class="toc-section-number">10.3.2</span> Non-reproducible example (Juvenile Life Without Parole study)<span></span></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#example-3-readimport-several-files-at-once-with-map" id="toc-example-3-readimport-several-files-at-once-with-map"><span class="toc-section-number">10.3.3</span> Example 3: Read/Import several files at once with <code>map()</code><span></span></a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#other-purrr-commands" id="toc-other-purrr-commands"><span class="toc-section-number">10.4</span> Other purrr commands<span></span></a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#walk-and-walk2" id="toc-walk-and-walk2"><span class="toc-section-number">10.4.1</span> <code>walk</code> and <code>walk2</code><span></span></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#map2" id="toc-map2"><span class="toc-section-number">10.4.2</span> <code>map2</code><span></span></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#pmap-for-when-you-have-a-bunch-of-shit" id="toc-pmap-for-when-you-have-a-bunch-of-shit"><span class="toc-section-number">10.4.3</span> <code>pmap</code> for when you have a bunch of shit<span></span></a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#using-purrr-to-manage-many-models" id="toc-using-purrr-to-manage-many-models"><span class="toc-section-number">10.5</span> Using purrr to manage many models<span></span></a></li>
</ul></li>
<li><a href="intro-to-r-markdown.html#intro-to-r-markdown" id="toc-intro-to-r-markdown"><span class="toc-section-number">11</span> Intro to R Markdown<span></span></a>
<ul>
<li><a href="intro-to-r-markdown.html#important-code-chunk-options" id="toc-important-code-chunk-options"><span class="toc-section-number">11.1</span> Important code chunk options<span></span></a></li>
<li><a href="intro-to-r-markdown.html#writing-math-equations-and-symbols" id="toc-writing-math-equations-and-symbols"><span class="toc-section-number">11.2</span> Writing math equations and symbols<span></span></a>
<ul>
<li><a href="intro-to-r-markdown.html#greek-symbols" id="toc-greek-symbols"><span class="toc-section-number">11.2.1</span> Greek symbols<span></span></a></li>
<li><a href="intro-to-r-markdown.html#math-notation" id="toc-math-notation"><span class="toc-section-number">11.2.2</span> Math notation<span></span></a></li>
<li><a href="intro-to-r-markdown.html#statistics-notation" id="toc-statistics-notation"><span class="toc-section-number">11.2.3</span> Statistics notation<span></span></a></li>
<li><a href="intro-to-r-markdown.html#writing-in-line-code" id="toc-writing-in-line-code"><span class="toc-section-number">11.2.4</span> Writing in-line code<span></span></a></li>
</ul></li>
<li><a href="intro-to-r-markdown.html#including-graphicsinserting-pictures" id="toc-including-graphicsinserting-pictures"><span class="toc-section-number">11.3</span> Including graphics/inserting pictures<span></span></a></li>
<li><a href="intro-to-r-markdown.html#footnotes" id="toc-footnotes"><span class="toc-section-number">11.4</span> Footnotes<span></span></a></li>
<li><a href="intro-to-r-markdown.html#change-the-color-of-your-text" id="toc-change-the-color-of-your-text"><span class="toc-section-number">11.5</span> Change the color of your text<span></span></a></li>
<li><a href="intro-to-r-markdown.html#re-using-code-chunk-options" id="toc-re-using-code-chunk-options"><span class="toc-section-number">11.6</span> Re-using code chunk options<span></span></a></li>
<li><a href="intro-to-r-markdown.html#making-better-tables" id="toc-making-better-tables"><span class="toc-section-number">11.7</span> Making better tables<span></span></a></li>
<li><a href="intro-to-r-markdown.html#running-in-line-code" id="toc-running-in-line-code"><span class="toc-section-number">11.8</span> Running in-line code<span></span></a></li>
</ul></li>
<li><a href="statistics--and-psych-specific-stuff.html#statistics--and-psych-specific-stuff" id="toc-statistics--and-psych-specific-stuff"><span class="toc-section-number">12</span> Statistics- and Psych-specific Stuff<span></span></a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#create-or-sample-from-a-distribution" id="toc-create-or-sample-from-a-distribution"><span class="toc-section-number">12.1</span> Create or sample from a distribution<span></span></a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#calculating-likelihood" id="toc-calculating-likelihood"><span class="toc-section-number">12.1.1</span> Calculating Likelihood<span></span></a></li>
</ul></li>
<li><a href="statistics--and-psych-specific-stuff.html#calculating-interrater-reliability" id="toc-calculating-interrater-reliability"><span class="toc-section-number">12.2</span> Calculating Interrater reliability<span></span></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#statistical-tests-and-modeling-with-easystats" id="toc-statistical-tests-and-modeling-with-easystats"><span class="toc-section-number">12.3</span> Statistical tests and modeling with <code>easystats</code><span></span></a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#getting-parameter-estimates-from-model-objects" id="toc-getting-parameter-estimates-from-model-objects"><span class="toc-section-number">12.3.1</span> Getting parameter estimates from model objects<span></span></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#getting-model-information-and-performance-metrics" id="toc-getting-model-information-and-performance-metrics"><span class="toc-section-number">12.3.2</span> Getting model information and performance metrics<span></span></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#effect-size-info-with-effectsize" id="toc-effect-size-info-with-effectsize"><span class="toc-section-number">12.3.3</span> Effect size info with <code>effectsize</code><span></span></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#quick-detailed-and-automated-reporting-with-report" id="toc-quick-detailed-and-automated-reporting-with-report"><span class="toc-section-number">12.3.4</span> Quick, detailed, and automated reporting with <code>report</code><span></span></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#running-correlations-with-correlation" id="toc-running-correlations-with-correlation"><span class="toc-section-number">12.3.5</span> Running correlations with <code>correlation</code><span></span></a></li>
</ul></li>
</ul></li>
<li><a href="advanced-coding-tips.html#advanced-coding-tips" id="toc-advanced-coding-tips"><span class="toc-section-number">13</span> Advanced Coding Tips<span></span></a>
<ul>
<li><a href="advanced-coding-tips.html#grammar-and-syntax" id="toc-grammar-and-syntax"><span class="toc-section-number">13.1</span> Grammar and Syntax<span></span></a>
<ul>
<li><a href="advanced-coding-tips.html#regex-expressions-and-symbols" id="toc-regex-expressions-and-symbols"><span class="toc-section-number">13.1.1</span> Regex expressions and symbols<span></span></a></li>
<li><a href="advanced-coding-tips.html#the-colon-equals-operator" id="toc-the-colon-equals-operator"><span class="toc-section-number">13.1.2</span> The colon-equals (<code>:=</code>) operator<span></span></a></li>
<li><a href="advanced-coding-tips.html#user-supplied-expressions-or-named-columns-in-functions" id="toc-user-supplied-expressions-or-named-columns-in-functions"><span class="toc-section-number">13.1.3</span> User-supplied expressions or named columns in functions<span></span></a></li>
<li><a href="advanced-coding-tips.html#when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time" id="toc-when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time"><span class="toc-section-number">13.1.4</span> When a command requires a named column or data set, but you’ve already supplied it and it’s required a second time<span></span></a></li>
</ul></li>
<li><a href="advanced-coding-tips.html#creating-a-package" id="toc-creating-a-package"><span class="toc-section-number">13.2</span> Creating a package<span></span></a>
<ul>
<li><a href="advanced-coding-tips.html#documenting-package-meta-data" id="toc-documenting-package-meta-data"><span class="toc-section-number">13.2.1</span> Documenting package meta-data<span></span></a></li>
<li><a href="advanced-coding-tips.html#connecting-to-other-packages" id="toc-connecting-to-other-packages"><span class="toc-section-number">13.2.2</span> Connecting to other packages<span></span></a></li>
<li><a href="advanced-coding-tips.html#linking-git-and-github" id="toc-linking-git-and-github"><span class="toc-section-number">13.2.3</span> Linking Git and Github<span></span></a></li>
</ul></li>
<li><a href="advanced-coding-tips.html#creating-a-bookdown" id="toc-creating-a-bookdown"><span class="toc-section-number">13.3</span> Creating a bookdown<span></span></a>
<ul>
<li><a href="advanced-coding-tips.html#rendering-the-book-once-its-done" id="toc-rendering-the-book-once-its-done"><span class="toc-section-number">13.3.1</span> Rendering the book once it’s done<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="creating-a-simulated-data-set.html#creating-a-simulated-data-set" id="toc-creating-a-simulated-data-set"><span class="toc-section-number">14</span> Creating a simulated data set<span></span></a>
<ul>
<li><a href="creating-a-simulated-data-set.html#part-1-independent-samples-from-a-normal-distribution" id="toc-part-1-independent-samples-from-a-normal-distribution"><span class="toc-section-number">14.1</span> Part 1: Independent samples from a normal distribution<span></span></a></li>
<li><a href="creating-a-simulated-data-set.html#part-2-creating-data-sets-with-quantitative-and-categorical-variables" id="toc-part-2-creating-data-sets-with-quantitative-and-categorical-variables"><span class="toc-section-number">14.2</span> Part 2: Creating data sets with quantitative and categorical variables<span></span></a>
<ul>
<li><a href="creating-a-simulated-data-set.html#a.-data-with-no-difference-among-groups" id="toc-a.-data-with-no-difference-among-groups"><span class="toc-section-number">14.2.1</span> 2.a. DATA WITH <strong>NO DIFFERENCE</strong> AMONG GROUPS<span></span></a></li>
<li><a href="creating-a-simulated-data-set.html#b.-data-with-a-difference-among-groups" id="toc-b.-data-with-a-difference-among-groups"><span class="toc-section-number">14.2.2</span> 2.b. Data <strong>WITH A DIFFERENCE</strong> among groups<span></span></a></li>
<li><a href="creating-a-simulated-data-set.html#c.-data-with-multiple-quantitative-variables-with-groups" id="toc-c.-data-with-multiple-quantitative-variables-with-groups"><span class="toc-section-number">14.2.3</span> 2.c. Data with <strong>MULTIPLE QUANTITATIVE VARIABLES</strong> with groups<span></span></a></li>
</ul></li>
<li><a href="creating-a-simulated-data-set.html#part-3-repeatedly-simulate-samples-with-replicate" id="toc-part-3-repeatedly-simulate-samples-with-replicate"><span class="toc-section-number">14.3</span> Part 3: Repeatedly simulate samples with replicate()<span></span></a></li>
<li><a href="creating-a-simulated-data-set.html#part-4-repeatedly-making-whole-data-sets" id="toc-part-4-repeatedly-making-whole-data-sets"><span class="toc-section-number">14.4</span> Part 4: repeatedly making whole data sets<span></span></a></li>
<li><a href="creating-a-simulated-data-set.html#part-5-using-purrr" id="toc-part-5-using-purrr"><span class="toc-section-number">14.5</span> Part 5: Using purrr<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating a simulated data set</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intermediate-r-functions-loops-and-iterative-programming" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> Intermediate R: Functions, Loops, and Iterative Programming<a href="intermediate-r-functions-loops-and-iterative-programming.html#intermediate-r-functions-loops-and-iterative-programming" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="functions" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Functions<a href="intermediate-r-functions-loops-and-iterative-programming.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A function is a command that performs a specified operation and returns an output in accordance with that operation. You can literally make a function to do anything you want.</p>
<p><em>General structure of a basic function:</em></p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example structure</span></span>
<span id="cb202-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-3" aria-hidden="true" tabindex="-1"></a>Function_name<span class="ot">=</span><span class="cf">function</span>(argument){</span>
<span id="cb202-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-4" aria-hidden="true" tabindex="-1"></a>  Expressions</span>
<span id="cb202-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(output)</span>
<span id="cb202-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li><em>Argument</em> is your input. It is the thing you want to perform the operation on.</li>
<li><em>Expressions</em> is the actual operation (or operations) you want to perform on the supplied argument</li>
<li><em>return</em> tells R to return the result of the Expression to you when done.</li>
</ul>
<p>This example function takes an input of numbers in the form of a vector and subtracts two from each.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-1" aria-hidden="true" tabindex="-1"></a>numbers<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">80</span>)</span>
<span id="cb203-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-3" aria-hidden="true" tabindex="-1"></a>sub_2<span class="ot">=</span><span class="cf">function</span>(x){</span>
<span id="cb203-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-4" aria-hidden="true" tabindex="-1"></a>  result<span class="ot">=</span> x <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb203-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb203-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb203-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(numbers)</span></code></pre></div>
<pre><code>## [1]  0  8 10 78</code></pre>
<p>We can also supply the function with a single number and it still works…</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 98</code></pre>
<p><strong><em>Well this looks useful. So what’s the bigger picture?</em></strong></p>
<p>One of the primary advantages of functions are that they can reduce a long and complex process, or a process that involves many steps, into a <em>single line of code</em>; thus, creating your own functions is a fast way to make your life easier down the line either at some point in the far future or even in just a few minutes, if you know you will be writing the code for some process two or more times.</p>
<p>Take this script for instance. You can see from the circled parts that I needed to transform three different data sets in a similar way:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;repeat_process.jpg&quot;</span>))</span></code></pre></div>
<p><img src="pics/repeat_process.jpg" width="413" /></p>
<p>Yes, I could have just done a copy-paste of the original code and tweak it slightly each time…. But that is time consuming, produces a sloppier and longer script, and introduces a lot more room for error because of the repeated code and extra steps.</p>
<p>Better to write a single function that could be applied to all three….</p>
<p><strong><em>In short, use functions to reduce a multi-step process or a process that you’re implementing &gt;=2 times in a single script into one command. This saves you space and makes the script shorter; it saves you the trouble and effort of re-writing or adapting code from earlier sections; and importantly, reduces the chances of you making a coding error by proxy of the former two.</em></strong></p>
<p>As a quick example, I was able to replace each of the circled paragraphs of code above with a custom function that ran everything in one simple line. Now instead of 3 whole (and redundant) paragraphs, I now have 3 short lines, like so….</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-1" aria-hidden="true" tabindex="-1"></a>na_zero_helpreint<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint,</span>
<span id="cb208-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">variable_prefix =</span> <span class="st">&quot;reintegrate_&quot;</span>)</span>
<span id="cb208-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span>
<span id="cb208-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span></code></pre></div>
<p><strong>Limitations to your average, everyday functions.</strong> While reducing a whole <em>process or sequence</em> of commands is extremely useful, it still leaves a limitation. For instance, while we avoided copying and pasting whole paragraphs or processes, I still had to copy-paste the same function three times. <em>This still leaves chances for error on the table, and it still leaves us with wasted lines that make the script longer.</em></p>
<p>In general, when you want to perform some function or process <strong>multiple times on multiple items (as above where the same command is used three times on three different data frames)</strong>, you need to use a for-loop or iterating function. These can reduce further unwanted redundancies by applying the function or process iteratively. Read on for more info.</p>
</div>
<div id="for-loops" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> For-loops<a href="intermediate-r-functions-loops-and-iterative-programming.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A for loop is essentially a function that applies a function or given set of operations to multiple things at once, and returns an output of many items.</p>
<p>For example, this code finds the means of every vector/column in a dataset by repeatedly applying the same code over and over to element “i” in the given list:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb209-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb209-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb209-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb209-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb209-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb209-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-8" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">ncol</span>(df))  <span class="co"># 1.Output. Create the object you want the results of the loop stored in.</span></span>
<span id="cb209-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {            <span class="co"># 2.Sequence of operations. &quot;For each item &#39;i&#39; along data frame…&quot;</span></span>
<span id="cb209-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-11" aria-hidden="true" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])      <span class="co"># 3.Body:&quot;every individual item in &#39;output&#39; = the median of each col in df</span></span>
<span id="cb209-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb209-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-14" aria-hidden="true" tabindex="-1"></a>output</span></code></pre></div>
<pre><code>## [1]  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>Check out <a href="https://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments">this book chapter</a> for a great and detailed explanation of for-loops and functional coding.</p>
<p>Although for loops are nice, they are unwieldy. R programmers typically use iterating functions instead. Examples of iterating functions are the <code>lapply</code>, <code>vapply</code>, <code>sapply</code>, etc. family of base R commands. But these can also be confusing and the commands are not great.</p>
<p>The purrr package offers a better way to do iterating functions over base R; it’s the tidyverse way to make efficient and understandable for loops! <strong>If you have a need for a for-loop for something, see the next section instead on how to use purrr to make an iterative function. Important to understand conceptually what a for-loop is, but using them is impractical when you have purrr</strong></p>
</div>
<div id="purrr-and-iterative-functions" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> purrr and Iterative Functions<a href="intermediate-r-functions-loops-and-iterative-programming.html#purrr-and-iterative-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>All notes here come from Charlotte Wickham’s lecture tutorial below</em></p>
<ul>
<li>Part 1: <a href="https://www.youtube.com/watch?v=7UlWJWfZO9M" class="uri">https://www.youtube.com/watch?v=7UlWJWfZO9M</a></li>
<li>Part 2: <a href="https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s" class="uri">https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s</a></li>
</ul>
<p>purrr’s <code>map()</code> series of functions offer a way to apply any existing function (even functions you’ve made) to multiple things at once, be it lists, data frame columns, individual items in vector, etc. In short, they are for doing the same type of task repeatedly in a very quick and efficient manner. They work in much the same way as for-loops, but are far simpler to write, and can be applied in the same way to solve the same problems.</p>
<p><strong><em>How to use purrr</em></strong></p>
<p>The structure of <code>map()</code> commands is the same as the others in the tidyverse:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co">#option 1</span></span>
<span id="cb211-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(data, <span class="cf">function</span>)</span>
<span id="cb211-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co"># option 2</span></span>
<span id="cb211-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-5" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="cf">function</span>)</span></code></pre></div>
<p>As a quick example and to highlight why purrr is so much more efficient and easier to use than for-loops, look at the same example from before, now using <code>map()</code> instead of a <code>for</code>:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(median)</span></code></pre></div>
<pre><code>##          a          b          c          d 
##  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>A single line is all it took to get the same results! And, it follows tidyverse grammar structure.</p>
<p>Now lets get into how it works….</p>
<p><em>map() commands work like this:</em> For each element of x, do f.</p>
<p>So if you pass it object <code>x</code> and object <code>x</code> is…. - A vector, it will perform function f on every item in the vector - A data frame, it will perform function f on every <em>column</em> in the data frame - A list, it will perform function f on every <em>level in the list</em></p>
<p>Etc., etc.; the point is it applies a function repeatedly to every element in the object you supply it with.</p>
<p>So lets walk through a case example.</p>
<div id="reproducible-example-scraping-web-data" class="section level3 hasAnchor" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Reproducible example: Scraping web data<a href="intermediate-r-functions-loops-and-iterative-programming.html#reproducible-example-scraping-web-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is an example walk through showing how we can use <code>purrr</code> to speed things up dramatically and/or reduce the use of unwanted, extra code in our scripts. In this guide I’ll be building a table of LPGA Tour statistics from multiple webpages.</p>
<p>The workflow for purrr goes like this:</p>
<p>First, you want to figure out how to do each step of your process line-by-line, for a single item. The idea is to try and walk through each step of the process and see exactly what will need to be done each each step and what the code will like, before trying to code it all at once at a higher level.</p>
<p>Once you have each step for the first item figured out, then you make functions for each step that condense that code down to one command.</p>
<p>Lastly, apply each function from your individual steps to all items in your list by using <code>purr::map()</code>.</p>
<p><strong><em>Do for One</em></strong></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb214-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 1</span></span>
<span id="cb214-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure out a line-by-line process for one item/one single web page</span></span>
<span id="cb214-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-5" aria-hidden="true" tabindex="-1"></a>html1<span class="ot">=</span><span class="fu">read_html</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb214-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb214-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb214-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb214-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-9" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb214-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(html1)</span></code></pre></div>
<pre><code>##   rank                 name distance
## 1    1       Emily Pedersen  279.250
## 2    2   Bianca Pagdanganan  276.470
## 3    3 Nanna Koerstz Madsen  275.014
## 4    4            Yuka Saso  274.576
## 5    5      Brooke Matthews  274.321
## 6    6    Madelene Sagstrom  273.868</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2</span></span>
<span id="cb216-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create a custom function of the above to shorten and generalize the process</span></span>
<span id="cb216-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-3" aria-hidden="true" tabindex="-1"></a>quick_read_html<span class="ot">=</span><span class="cf">function</span>(url){</span>
<span id="cb216-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-4" aria-hidden="true" tabindex="-1"></a>  web_page<span class="ot">=</span><span class="fu">read_html</span>(url) <span class="sc">|&gt;</span> </span>
<span id="cb216-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># fortunately this node works for all four pages so it can be baked into the function</span></span>
<span id="cb216-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb216-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb216-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-8" aria-hidden="true" tabindex="-1"></a>    janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb216-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb216-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(web_page)</span>
<span id="cb216-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb216-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-15" aria-hidden="true" tabindex="-1"></a><span class="co"># test to verify it works</span></span>
<span id="cb216-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-16" aria-hidden="true" tabindex="-1"></a>test<span class="ot">=</span><span class="fu">quick_read_html</span>(<span class="at">url=</span> <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>) </span>
<span id="cb216-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test) <span class="co"># nice </span></span></code></pre></div>
<pre><code>##   rank              name putt_average
## 1    1     Danielle Kang        1.720
## 2    2          Lydia Ko        1.731
## 3    3       Hyo Joo Kim        1.733
## 4    4        Minjee Lee        1.739
## 5    5 Patty Tavatanakit        1.740
## 6    6      Nasa Hataoka        1.745</code></pre>
<p><strong><em>DO FOR ALL.</em></strong> Now create the object that contains all the elements you want to iterate over, and then pass it to your generalized function with map.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3a</span></span>
<span id="cb218-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create an object that contains ALL elements of interest</span></span>
<span id="cb218-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-3" aria-hidden="true" tabindex="-1"></a>URLs<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>,</span>
<span id="cb218-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>,</span>
<span id="cb218-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=06&quot;</span>,</span>
<span id="cb218-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=12&quot;</span>)</span>
<span id="cb218-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb218-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-9" aria-hidden="true" tabindex="-1"></a><span class="co"># use the power of map and be amazed</span></span>
<span id="cb218-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-10" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> URLs <span class="sc">|&gt;</span> <span class="fu">map</span>(quick_read_html)</span>
<span id="cb218-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>## [[1]]
##     rank                     name distance
## 1      1           Emily Pedersen  279.250
## 2      2       Bianca Pagdanganan  276.470
## 3      3     Nanna Koerstz Madsen  275.014
## 4      4                Yuka Saso  274.576
## 5      5          Brooke Matthews  274.321
## 6      6        Madelene Sagstrom  273.868
## 7      7              Maria Fassi  273.481
## 8      8                A Lim Kim  273.356
## 9      9      Maude-Aimee Leblanc  273.145
## 10    10            Lexi Thompson  273.129
## 11    11 Pauline Roussin-Bouchard  272.500
## 12    12        Patty Tavatanakit  271.628
## 13    13          Carlota Ciganda  271.488
## 14    14              Nelly Korda  271.481
## 15    15            Jessica Korda  270.967
## 16    16                Angel Yin  270.639
## 17    17         Atthaya Thitikul  270.636
## 18    18            Janie Jackson  269.484
## 19    19         Perrine Delacour  269.463
## 20    20         Brooke Henderson  268.892
## 21    21                   Yu Liu  268.721
## 22    22           Rachel Rohanna  268.531
## 23    23             Charley Hull  268.219
## 24    24          Jennifer Kupcho  268.087
## 25    25               Minjee Lee  267.602
## 26    26           Amanda Doherty  267.515
## 27    27             Alana Uriell  267.483
## 28    28              Yealimi Noh  267.367
## 29    29    Fatima Fernandez Cano  265.921
## 30    30        Albane Valenzuela  265.674
## 31    31             Hannah Green  265.239
## 32    32              Hyejin Choi  264.890
## 33    33               Gaby Lopez  264.440
## 34    34               Alison Lee  264.431
## 35    35         Stephanie Meadow  264.400
## 36    36             Nasa Hataoka  263.955
## 37    37           Cydney Clanton  263.933
## 38    38            Frida Kinhult  263.743
## 39    39            Ryann O&#39;Toole  263.704
## 40    40     Pajaree Anannarukarn  263.696
## 41    41            Sei Young Kim  263.656
## 42    42               Ally Ewing  263.645
## 43    43           Gerina Mendoza  263.422
## 44    44             Georgia Hall  263.397
## 45    45                 Xiyu Lin  263.235
## 46    46          Lauren Coughlin  262.672
## 47    47            Jeong Eun Lee  262.500
## 48    48                 Lilia Vu  262.390
## 49    49               Ruixin Liu  261.953
## 50    50                 Amy Yang  261.863
## 51    51          Giulia Molinaro  261.847
## 52    52          Sarah Schmelzel  261.649
## 53    53           Haylee Harford  260.938
## 54    54         Savannah Vilaubi  260.000
## 55    55          Sophia Schubert  259.868
## 56    56               Dewi Weber  259.638
## 57    57       Brittany Lincicome  259.400
## 58    58             Peiyun Chien  259.250
## 59    59        Lauren Stephenson  259.129
## 60    60                 Mel Reid  258.988
## 61    61   Katherine Perry-Hamski  258.966
## 62    62           Sanna Nuutinen  258.955
## 63    63              Hyo Joo Kim  258.941
## 64    64         Ariya Jutanugarn  258.849
## 65    65           Sung Hyun Park  258.833
## 66    66           Katherine Kirk  258.489
## 67    67         Jaye Marie Green  258.417
## 68    68       Jodi Ewart Shadoff  258.265
## 69    69          Lauren Hartlage  258.219
## 70    70                  Min Lee  258.106
## 71    71               Annie Park  257.770
## 72    72           Hinako Shibuno  257.743
## 73    73             Austin Ernst  257.472
## 74    74       Stephanie Kyriacou  257.000
## 75    75             Sophia Popov  256.941
## 76    76               Eun-Hee Ji  256.829
## 77    77              Ruoning Yin  256.700
## 78    78                Isi Gabsa  256.566
## 79    79          Casey Danielson  256.500
## 80    80          Matilda Castren  256.284
## 81    81                Amy Olson  255.826
## 82    82                 Gina Kim  255.667
## 83    83          Elizabeth Nagel  255.583
## 84    84                Na Rin An  255.469
## 85    86              Yu-Sang Hou  255.286
## 86    87            Agathe Laisne  254.938
## 87    88               Paula Reto  254.750
## 88    89                 Lydia Ko  254.588
## 89    90            Jennifer Song  254.562
## 90    91         Linnea Johansson  254.517
## 91    92           Allisen Corpuz  254.485
## 92    93         Esther Henseleit  254.353
## 93    94           Celine Boutier  254.333
## 94    95             Kaitlyn Papp  254.296
## 95    96             Wei-Ling Hsu  254.197
## 96    97        Pernilla Lindberg  254.053
## 97    98         Wichanee Meechai  253.568
## 98    99            Brittany Lang  253.500
## 99   100               Sarah Kemp  253.382
## 100  101              Megan Khang  253.351
## 101  102           Gemma Dryburgh  253.014
## 102  103               Jenny Shin  252.952
## 103  104                Ana Belac  252.750
## 104  105           Ashleigh Buhai  252.550
## 105  106               Robynn Ree  252.429
## 106  107           Hee Young Park  252.423
## 107  108          Angela Stanford  252.375
## 108  109         Elizabeth Szokol  252.200
## 109  110                Kelly Tan  252.190
## 110  111             Jin Young Ko  252.090
## 111  112            Jenny Coleman  251.897
## 112  113            Danielle Kang  251.471
## 113  114             Cristie Kerr  251.261
## 114  115         Sarah Jane Smith  251.200
## 115  116            Leona Maguire  251.010
## 116  117               Su-Hyun Oh  250.736
## 117  118               Lauren Kim  250.500
## 118  119        Pornanong Phatlum  250.425
## 119  120               Bronte Law  250.409
## 120  121              In Gee Chun  250.279
## 121  122            Mariajo Uribe  250.250
## 122  123          Morgane Metraux  250.161
## 123  124           Jennifer Chang  249.786
## 124  125              So Yeon Ryu  249.444
## 125  126              Emma Talley  249.354
## 126  127        Brittany Altomare  249.255
## 127  128             Youngin Chun  249.000
## 128  129      Jasmine Suwannapura  248.935
## 129  130           Anna Nordqvist  248.772
## 130  131              Marina Alex  248.674
## 131  132                  Muni He  248.352
## 132  133          Cheyenne Knight  248.279
## 133  134              Ayaka Furue  247.780
## 134  135              Chella Choi  247.160
## 135  136            Maddie Szeryk  246.292
## 136  137                Mirim Lee  246.269
## 137  138               Haeji Kang  246.167
## 138  139            Allison Emrey  245.967
## 139  140        Moriya Jutanugarn  245.553
## 140  141           Lindsey Weaver  245.400
## 141  142               Jiwon Jeon  245.188
## 142  143            Christina Kim  244.729
## 143  144          Caroline Masson  244.690
## 144  145               Andrea Lee  244.635
## 145  146             Mina Harigae  244.605
## 146  147             In-Kyung Kim  243.042
## 147  148            Lizette Salas  242.507
## 148  149            Dottie Ardina  242.382
## 149  150             Na Yeon Choi  241.981
## 150  151               Inbee Park  241.494
## 151  152          Caroline Inglis  241.132
## 152  153            Marissa Steen  240.720
## 153  154              Stacy Lewis  240.065
## 154  155        Mariah Stackhouse  239.500
## 155  156             Yae Eun Hong  238.638
## 156  157               Vivian Hou  238.125
## 157  158         Charlotte Thomas  237.328
## 158  159              Aditi Ashok  234.488
## 159  160         Dana Finkelstein  233.417
## 
## [[2]]
##     rank                     name putt_average
## 1      1            Danielle Kang        1.720
## 2      2                 Lydia Ko        1.731
## 3      3              Hyo Joo Kim        1.733
## 4      4               Minjee Lee        1.739
## 5      5        Patty Tavatanakit        1.740
## 6      6             Nasa Hataoka        1.745
## 7      7            Jeong Eun Lee        1.746
## 8      8        Madelene Sagstrom        1.753
## 9      9         Atthaya Thitikul        1.755
## 10    10           Celine Boutier        1.757
## 11    11             Georgia Hall        1.758
## 12    12            Jessica Korda        1.758
## 13    13                 Xiyu Lin        1.763
## 14    14                 Amy Yang        1.763
## 15    15               Su-Hyun Oh        1.765
## 16    16          Carlota Ciganda        1.768
## 17    17           Amanda Doherty        1.768
## 18    18       Stephanie Kyriacou        1.769
## 19    19                Yuka Saso        1.771
## 20    20             Jin Young Ko        1.772
## 21    21         Brooke Henderson        1.773
## 22    22            Leona Maguire        1.774
## 23    23     Nanna Koerstz Madsen        1.776
## 24    24             Hannah Green        1.776
## 25    25             Cristie Kerr        1.779
## 26    26           Gemma Dryburgh        1.780
## 27    27                Angel Yin        1.781
## 28    28              Nelly Korda        1.783
## 29    29      Jasmine Suwannapura        1.789
## 30    30               Alison Lee        1.789
## 31    31              Chella Choi        1.789
## 32    32            Lexi Thompson        1.789
## 33    33              Aditi Ashok        1.791
## 34    34               Andrea Lee        1.791
## 35    35               Inbee Park        1.793
## 36    36              Ayaka Furue        1.793
## 37    37             Charley Hull        1.795
## 38   38t              Hyejin Choi        1.795
## 39   38t              In Gee Chun        1.795
## 40    40                 Lilia Vu        1.795
## 41    41           Allisen Corpuz        1.795
## 42    42                Isi Gabsa        1.797
## 43    43               Gaby Lopez        1.797
## 44    44           Sung Hyun Park        1.797
## 45    45              Megan Khang        1.797
## 46    46              So Yeon Ryu        1.798
## 47    47     Pajaree Anannarukarn        1.799
## 48    48               Jenny Shin        1.801
## 49    49           Lindsey Weaver        1.802
## 50    50        Brittany Altomare        1.802
## 51    51            Ryann O&#39;Toole        1.803
## 52    52          Jennifer Kupcho        1.805
## 53    53             Yae Eun Hong        1.806
## 54    54              Marina Alex        1.809
## 55    55         Perrine Delacour        1.809
## 56    56 Pauline Roussin-Bouchard        1.809
## 57    57               Haeji Kang        1.810
## 58    58             Mina Harigae        1.810
## 59    59            Sei Young Kim        1.810
## 60    60        Lauren Stephenson        1.811
## 61    61               Eun-Hee Ji        1.811
## 62    62                   Yu Liu        1.811
## 63    63            Lizette Salas        1.812
## 64    64                Na Rin An        1.813
## 65    65            Janie Jackson        1.814
## 66    66            Frida Kinhult        1.815
## 67    67          Sarah Schmelzel        1.815
## 68    68             Kaitlyn Papp        1.815
## 69    69               Paula Reto        1.816
## 70    70                A Lim Kim        1.816
## 71    71                Kelly Tan        1.816
## 72    72          Morgane Metraux        1.817
## 73    73           Katherine Kirk        1.818
## 74    74              Stacy Lewis        1.818
## 75    75           Hinako Shibuno        1.818
## 76    76         Sarah Jane Smith        1.820
## 77    77           Ashleigh Buhai        1.820
## 78    78             Alana Uriell        1.820
## 79    79         Ariya Jutanugarn        1.821
## 80    80          Cheyenne Knight        1.821
## 81    81          Matilda Castren        1.823
## 82    82             Sophia Popov        1.824
## 83    83              Ruoning Yin        1.824
## 84    84                  Min Lee        1.824
## 85    85             Wei-Ling Hsu        1.824
## 86    86             In-Kyung Kim        1.824
## 87    87           Jennifer Chang        1.825
## 88    88              Emma Talley        1.826
## 89    89         Stephanie Meadow        1.828
## 90    90        Albane Valenzuela        1.828
## 91    91          Giulia Molinaro        1.830
## 92    92        Moriya Jutanugarn        1.830
## 93    93      Maude-Aimee Leblanc        1.831
## 94    95               Annie Park        1.832
## 95    96       Brittany Lincicome        1.832
## 96    97                Amy Olson        1.833
## 97    98         Linnea Johansson        1.834
## 98    99           Anna Nordqvist        1.834
## 99   100          Sophia Schubert        1.836
## 100  101           Sanna Nuutinen        1.837
## 101  102        Pernilla Lindberg        1.838
## 102  103         Esther Henseleit        1.840
## 103  104               Jiwon Jeon        1.841
## 104  105       Jodi Ewart Shadoff        1.843
## 105  106             Na Yeon Choi        1.845
## 106  107          Angela Stanford        1.847
## 107  108           Hee Young Park        1.847
## 108  109                 Gina Kim        1.848
## 109  110          Caroline Masson        1.849
## 110  111              Maria Fassi        1.849
## 111  112           Cydney Clanton        1.849
## 112  113            Brittany Lang        1.850
## 113  114                Ana Belac        1.850
## 114  115         Dana Finkelstein        1.851
## 115  116    Fatima Fernandez Cano        1.852
## 116  117   Katherine Perry-Hamski        1.852
## 117  118               Ruixin Liu        1.854
## 118  119               Bronte Law        1.855
## 119  120           Gerina Mendoza        1.856
## 120  121         Charlotte Thomas        1.857
## 121  122             Peiyun Chien        1.857
## 122  123              Yu-Sang Hou        1.857
## 123  124         Wichanee Meechai        1.858
## 124  125        Mariah Stackhouse        1.859
## 125  126              Yealimi Noh        1.859
## 126  127                  Muni He        1.859
## 127  128         Jaye Marie Green        1.860
## 128  129             Youngin Chun        1.860
## 129  130            Agathe Laisne        1.860
## 130  131               Dewi Weber        1.861
## 131  132            Allison Emrey        1.862
## 132  133       Bianca Pagdanganan        1.863
## 133  134            Dottie Ardina        1.864
## 134  135            Jenny Coleman        1.864
## 135  136             Austin Ernst        1.865
## 136  137          Lauren Coughlin        1.868
## 137  138               Lauren Kim        1.870
## 138  139               Ally Ewing        1.871
## 139  140               Robynn Ree        1.872
## 140  141            Jennifer Song        1.872
## 141  142         Elizabeth Szokol        1.875
## 142  143               Sarah Kemp        1.875
## 143  144           Rachel Rohanna        1.876
## 144  145        Pornanong Phatlum        1.878
## 145  146          Elizabeth Nagel        1.879
## 146  147           Emily Pedersen        1.879
## 147  148            Christina Kim        1.883
## 148  149                Mirim Lee        1.886
## 149  150          Lauren Hartlage        1.888
## 150  151           Haylee Harford        1.898
## 151  152            Mariajo Uribe        1.899
## 152  153                 Mel Reid        1.904
## 153  154            Maddie Szeryk        1.905
## 154  155          Brooke Matthews        1.905
## 155  156          Caroline Inglis        1.906
## 156  157         Savannah Vilaubi        1.912
## 157  158            Marissa Steen        1.916
## 158  159          Casey Danielson        1.942
## 159  160               Vivian Hou        1.962
## 
## [[3]]
##     rank                     name greens_hit
## 1      1       Jodi Ewart Shadoff       76.9
## 2      2            Lexi Thompson       76.8
## 3      3                 Xiyu Lin       76.3
## 4      4         Brooke Henderson       75.5
## 5      5              Hyejin Choi       75.3
## 6      6          Jennifer Kupcho       75.0
## 7      7               Minjee Lee       74.9
## 8      8               Ally Ewing       74.7
## 9      9             Jin Young Ko       74.4
## 10    10              Megan Khang       74.1
## 11    11              Nelly Korda       74.1
## 12    12                A Lim Kim       73.8
## 13    13          Lauren Coughlin       73.8
## 14   14t          Matilda Castren       73.6
## 15   14t             Charley Hull       73.6
## 16    16           Emily Pedersen       73.2
## 17    17           Anna Nordqvist       72.9
## 18    18            Jeong Eun Lee       72.8
## 19    19             Hannah Green       72.7
## 20    20              Yealimi Noh       72.7
## 21    21              Marina Alex       72.7
## 22    22              In Gee Chun       72.4
## 23    23           Celine Boutier       72.4
## 24    24         Atthaya Thitikul       72.4
## 25    25             Nasa Hataoka       72.4
## 26    26     Nanna Koerstz Madsen       72.4
## 27    27          Sarah Schmelzel       72.2
## 28    28     Pajaree Anannarukarn       72.1
## 29    29            Jessica Korda       72.0
## 30    30              Chella Choi       71.7
## 31    31              Hyo Joo Kim       71.7
## 32    32          Casey Danielson       71.7
## 33    33          Sophia Schubert       71.6
## 34    34         Perrine Delacour       71.4
## 35    35                 Lydia Ko       71.4
## 36    36          Carlota Ciganda       71.2
## 37    37             Peiyun Chien       71.1
## 38    38        Brittany Altomare       71.1
## 39    39                 Amy Yang       71.0
## 40    40              Ayaka Furue       70.9
## 41    41            Ryann O&#39;Toole       70.9
## 42    42                 Lilia Vu       70.7
## 43    43           Hinako Shibuno       70.5
## 44    44            Sei Young Kim       70.5
## 45    45        Lauren Stephenson       70.5
## 46    46            Danielle Kang       70.1
## 47    47        Madelene Sagstrom       69.9
## 48    48      Maude-Aimee Leblanc       69.9
## 49    49           Allisen Corpuz       69.9
## 50    50           Sanna Nuutinen       69.7
## 51    51              Stacy Lewis       69.7
## 52    52               Andrea Lee       69.7
## 53    53        Patty Tavatanakit       69.5
## 54    54            Leona Maguire       69.3
## 55    55        Albane Valenzuela       69.3
## 56   56t               Gaby Lopez       69.2
## 57   56t          Caroline Masson       69.2
## 58   56t               Jenny Shin       69.2
## 59   56t                Kelly Tan       69.2
## 60    60               Sarah Kemp       69.2
## 61    61         Ariya Jutanugarn       69.1
## 62    62               Ruixin Liu       69.1
## 63    63               Inbee Park       68.9
## 64    64        Moriya Jutanugarn       68.9
## 65    65           Cydney Clanton       68.9
## 66    66                  Min Lee       68.9
## 67   67t             Austin Ernst       68.8
## 68   67t              So Yeon Ryu       68.8
## 69    69               Annie Park       68.6
## 70    70               Paula Reto       68.6
## 71    71                Yuka Saso       68.5
## 72    72                   Yu Liu       68.5
## 73    73          Caroline Inglis       68.4
## 74    74                Isi Gabsa       68.3
## 75    75               Robynn Ree       68.3
## 76    76         Jaye Marie Green       68.2
## 77    77             Wei-Ling Hsu       68.1
## 78    78            Jenny Coleman       68.1
## 79    79           Haylee Harford       68.1
## 80    80                 Gina Kim       68.0
## 81    81             Kaitlyn Papp       67.9
## 82    82          Cheyenne Knight       67.8
## 83    83              Ruoning Yin       67.8
## 84    84              Emma Talley       67.8
## 85    85         Stephanie Meadow       67.6
## 86    86            Janie Jackson       67.6
## 87    87               Alison Lee       67.5
## 88    89         Esther Henseleit       67.5
## 89    90            Lizette Salas       67.4
## 90    91               Dewi Weber       67.4
## 91    92       Brittany Lincicome       67.4
## 92    93               Eun-Hee Ji       67.4
## 93    94      Jasmine Suwannapura       67.4
## 94    95               Bronte Law       67.3
## 95    96            Jennifer Song       67.0
## 96    97         Wichanee Meechai       66.9
## 97   98t                Na Rin An       66.7
## 98   98t        Pernilla Lindberg       66.7
## 99   98t         Elizabeth Szokol       66.7
## 100  101           Ashleigh Buhai       66.4
## 101  102               Su-Hyun Oh       66.4
## 102  103           Gerina Mendoza       66.3
## 103  104        Pornanong Phatlum       66.3
## 104  105          Giulia Molinaro       66.2
## 105  106       Bianca Pagdanganan       66.2
## 106 107t   Katherine Perry-Hamski       66.1
## 107 107t             Alana Uriell       66.1
## 108 109t       Stephanie Kyriacou       66.0
## 109 109t          Elizabeth Nagel       66.0
## 110  111             Georgia Hall       66.0
## 111  112          Morgane Metraux       65.8
## 112  113           Jennifer Chang       65.7
## 113  114           Sung Hyun Park       65.7
## 114  115             Mina Harigae       65.5
## 115  116         Charlotte Thomas       65.5
## 116  117           Lindsey Weaver       65.3
## 117  118             Na Yeon Choi       65.2
## 118  119               Haeji Kang       65.2
## 119  120              Maria Fassi       65.2
## 120  121                 Mel Reid       65.0
## 121  122          Lauren Hartlage       64.9
## 122  123         Dana Finkelstein       64.8
## 123  124                Amy Olson       64.8
## 124  125            Dottie Ardina       64.7
## 125  126             In-Kyung Kim       64.6
## 126  127 Pauline Roussin-Bouchard       64.5
## 127  128            Brittany Lang       64.3
## 128  129           Amanda Doherty       64.2
## 129  130            Frida Kinhult       64.0
## 130  131             Sophia Popov       63.9
## 131  132                Angel Yin       63.8
## 132  133                Ana Belac       63.7
## 133  134         Linnea Johansson       63.6
## 134  135                Mirim Lee       63.5
## 135  136            Christina Kim       63.4
## 136  137            Marissa Steen       63.3
## 137  138             Cristie Kerr       63.3
## 138  139    Fatima Fernandez Cano       63.2
## 139  140           Hee Young Park       63.0
## 140 141t                  Muni He       63.0
## 141 141t            Agathe Laisne       63.0
## 142  143           Gemma Dryburgh       62.9
## 143  144           Rachel Rohanna       62.7
## 144  145           Katherine Kirk       62.3
## 145 146t              Aditi Ashok       61.1
## 146 146t               Jiwon Jeon       61.1
## 147  148            Mariajo Uribe       60.6
## 148  149             Yae Eun Hong       60.3
## 149  150               Vivian Hou       60.2
## 150  151         Sarah Jane Smith       59.6
## 151  152        Mariah Stackhouse       59.0
## 152  153         Savannah Vilaubi       58.9
## 153  154          Brooke Matthews       58.7
## 154  155               Lauren Kim       58.7
## 155  156              Yu-Sang Hou       58.3
## 156 157t             Youngin Chun       57.4
## 157 157t          Angela Stanford       57.4
## 158  159            Allison Emrey       55.2
## 159  160            Maddie Szeryk       53.7
## 
## [[4]]
##     rank                     name rounds score_average_actual
## 1      1               Minjee Lee     44               69.136
## 2      2         Brooke Henderson     47               69.532
## 3      3            Lexi Thompson     35               69.600
## 4      4              Hyo Joo Kim     34               69.676
## 5      5         Atthaya Thitikul     55               69.691
## 6      6             Jin Young Ko     39               69.718
## 7      7                 Lydia Ko     51               69.804
## 8      8              Nelly Korda     27               69.815
## 9      9              Hyejin Choi     50               69.900
## 10    10                 Xiyu Lin     51               70.000
## 11    11             Hannah Green     44               70.068
## 12    12             Nasa Hataoka     56               70.107
## 13    13           Celine Boutier     54               70.130
## 14    14            Danielle Kang     34               70.206
## 15    15        Madelene Sagstrom     53               70.340
## 16    16                 Amy Yang     40               70.375
## 17    17     Nanna Koerstz Madsen     37               70.378
## 18    18              In Gee Chun     52               70.500
## 19    19          Jennifer Kupcho     52               70.558
## 20    20              Megan Khang     47               70.574
## 21    21              Chella Choi     47               70.617
## 22    22             Charley Hull     32               70.656
## 23    23        Patty Tavatanakit     39               70.718
## 24    24               Andrea Lee     26               70.769
## 25    25               Inbee Park     42               70.833
## 26    26          Carlota Ciganda     43               70.860
## 27    27            Leona Maguire     51               70.863
## 28    28              Marina Alex     46               70.913
## 29    29          Sarah Schmelzel     47               70.915
## 30    30            Jessica Korda     30               70.933
## 31    31     Pajaree Anannarukarn     51               70.941
## 32    32            Sei Young Kim     32               70.969
## 33    33              Ayaka Furue     50               70.980
## 34   34t       Jodi Ewart Shadoff     42               71.000
## 35   34t                Yuka Saso     46               71.000
## 36    36            Ryann O&#39;Toole     49               71.041
## 37    37             Georgia Hall     39               71.051
## 38    38        Brittany Altomare     49               71.061
## 39    39            Jeong Eun Lee     32               71.063
## 40    40               Alison Lee     51               71.078
## 41    41        Albane Valenzuela     43               71.093
## 42    42                A Lim Kim     52               71.154
## 43    43      Jasmine Suwannapura     46               71.174
## 44    44           Allisen Corpuz     33               71.212
## 45    45           Anna Nordqvist     46               71.239
## 46    46              So Yeon Ryu     36               71.250
## 47    47                 Lilia Vu     41               71.268
## 48    48          Cheyenne Knight     43               71.302
## 49    49              Stacy Lewis     46               71.304
## 50    50               Eun-Hee Ji     38               71.316
## 51    51               Gaby Lopez     42               71.333
## 52    52               Jenny Shin     42               71.381
## 53    53         Perrine Delacour     40               71.400
## 54    54             Wei-Ling Hsu     38               71.447
## 55    55               Su-Hyun Oh     36               71.472
## 56    56                Kelly Tan     42               71.476
## 57    57               Paula Reto     44               71.500
## 58    58           Hinako Shibuno     37               71.514
## 59   60t           Gemma Dryburgh     35               71.600
## 60   60t         Stephanie Meadow     40               71.600
## 61    62            Lizette Salas     36               71.611
## 62    63           Lindsey Weaver     40               71.650
## 63    64        Lauren Stephenson     35               71.714
## 64    65        Moriya Jutanugarn     47               71.723
## 65    66              Emma Talley     41               71.732
## 66    67             Mina Harigae     38               71.737
## 67    68           Ashleigh Buhai     40               71.775
## 68    69             Kaitlyn Papp     27               71.778
## 69    70               Ruixin Liu     32               71.781
## 70    71       Brittany Lincicome     30               71.800
## 71    72          Matilda Castren     44               71.818
## 72    73          Caroline Masson     42               71.833
## 73    74                   Yu Liu     43               71.837
## 74    75                  Min Lee     33               71.848
## 75    76              Aditi Ashok     40               71.850
## 76    77       Stephanie Kyriacou     27               71.852
## 77    78           Jennifer Chang     28               71.893
## 78    79               Ally Ewing     38               71.895
## 79    80          Sophia Schubert     34               71.912
## 80    81              Yealimi Noh     45               71.933
## 81    82            Frida Kinhult     37               71.946
## 82    83         Ariya Jutanugarn     43               71.977
## 83    84                Na Rin An     41               72.024
## 84    85             Alana Uriell     29               72.034
## 85    86                Angel Yin     37               72.054
## 86    87                Isi Gabsa     38               72.079
## 87    88               Bronte Law     33               72.121
## 88    89          Lauren Coughlin     29               72.138
## 89    90           Amanda Doherty     34               72.147
## 90   91t             Peiyun Chien     30               72.200
## 91   91t         Dana Finkelstein     30               72.200
## 92    93               Annie Park     37               72.243
## 93    94           Sanna Nuutinen     22               72.273
## 94    95        Pornanong Phatlum     40               72.275
## 95    96           Emily Pedersen     34               72.294
## 96    97             Cristie Kerr     23               72.304
## 97    98               Sarah Kemp     38               72.316
## 98    99               Robynn Ree     21               72.333
## 99   100         Wichanee Meechai     44               72.341
## 100  101        Pernilla Lindberg     38               72.368
## 101  102                 Gina Kim     21               72.381
## 102  103            Dottie Ardina     17               72.412
## 103  104         Charlotte Thomas     32               72.438
## 104  105             Austin Ernst     18               72.444
## 105  106      Maude-Aimee Leblanc     38               72.447
## 106  107 Pauline Roussin-Bouchard     33               72.455
## 107  108                Amy Olson     35               72.457
## 108  109             In-Kyung Kim     24               72.458
## 109  110         Esther Henseleit     34               72.471
## 110  111         Jaye Marie Green     36               72.472
## 111  112            Brittany Lang     23               72.478
## 112 113t          Giulia Molinaro     36               72.500
## 113 113t              Ruoning Yin     20               72.500
## 114  115          Morgane Metraux     31               72.645
## 115  116            Jennifer Song     37               72.649
## 116  117               Haeji Kang     30               72.667
## 117  118              Maria Fassi     26               72.692
## 118  119           Katherine Kirk     24               72.708
## 119  120                Ana Belac     28               72.714
## 120  121               Dewi Weber     29               72.759
## 121  122          Caroline Inglis     19               72.789
## 122 123t       Bianca Pagdanganan     33               72.818
## 123 123t           Sung Hyun Park     33               72.818
## 124 125t             Yae Eun Hong     29               72.828
## 125 125t   Katherine Perry-Hamski     29               72.828
## 126  127            Jenny Coleman     39               72.872
## 127  128         Sarah Jane Smith     15               72.933
## 128  129           Gerina Mendoza     32               72.938
## 129  130           Cydney Clanton     30               72.967
## 130  131            Janie Jackson     31               73.065
## 131  132                  Muni He     27               73.074
## 132  133             Sophia Popov     34               73.088
## 133  134                 Mel Reid     40               73.125
## 134  135            Agathe Laisne     24               73.208
## 135  136           Haylee Harford     16               73.250
## 136  137         Linnea Johansson     29               73.276
## 137  138           Hee Young Park     26               73.346
## 138 139t          Casey Danielson     20               73.400
## 139 139t           Rachel Rohanna     25               73.400
## 140  141          Brooke Matthews     14               73.500
## 141  142             Na Yeon Choi     27               73.519
## 142  143               Jiwon Jeon     16               73.563
## 143  144         Elizabeth Szokol     10               73.600
## 144  145            Christina Kim     24               73.667
## 145  146    Fatima Fernandez Cano     19               73.789
## 146  147            Marissa Steen     25               73.840
## 147  148        Mariah Stackhouse      8               73.875
## 148  149          Elizabeth Nagel     18               73.889
## 149  150          Angela Stanford     24               74.125
## 150  151              Yu-Sang Hou     14               74.214
## 151 152t          Lauren Hartlage     16               74.250
## 152 152t               Lauren Kim     16               74.250
## 153  154            Mariajo Uribe     10               74.300
## 154  155         Savannah Vilaubi     15               74.400
## 155  156                Mirim Lee     26               74.462
## 156  157            Allison Emrey     30               74.500
## 157  158             Youngin Chun      9               74.556
## 158  159            Maddie Szeryk     12               74.917
## 159  160               Vivian Hou     12               76.000</code></pre>
<p>All done!! And just like that, we’ve downloaded four different web pages, extracted the tabled info, and formatted them without copying and pasting any code. The same process for all four was only used one time to write the initial function. Just apply some final formatting to clean it up a bit and combine the separate data frames into a single, unified one.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-1" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> lpga_data <span class="sc">%&gt;%</span> </span>
<span id="cb220-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reduce</span>(left_join, <span class="at">by=</span><span class="st">&quot;name&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Combine all list levels into a single tibble, matching by the &quot;Name&quot; column</span></span>
<span id="cb220-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;rank.&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb220-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;score_average&quot;</span><span class="ot">=</span><span class="st">&quot;score_average_actual&quot;</span>)</span>
<span id="cb220-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb220-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-6" aria-hidden="true" tabindex="-1"></a><span class="co"># VOILA! </span></span>
<span id="cb220-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>##                   name distance putt_average greens_hit rounds score_average
## 1       Emily Pedersen  279.250        1.879       73.2     34        72.294
## 2   Bianca Pagdanganan  276.470        1.863       66.2     33        72.818
## 3 Nanna Koerstz Madsen  275.014        1.776       72.4     37        70.378
## 4            Yuka Saso  274.576        1.771       68.5     46        71.000
## 5      Brooke Matthews  274.321        1.905       58.7     14        73.500
## 6    Madelene Sagstrom  273.868        1.753       69.9     53        70.340</code></pre>
</div>
<div id="non-reproducible-example-juvenile-life-without-parole-study" class="section level3 hasAnchor" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> Non-reproducible example (Juvenile Life Without Parole study)<a href="intermediate-r-functions-loops-and-iterative-programming.html#non-reproducible-example-juvenile-life-without-parole-study" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the Juvenile Lifers study, there were a series of questions that participants rated on a scale of 0-100 in terms of difficulty. Part of our analysis involved taking the ratings on those variables and giving them relative rankings, so that each of the 6 variables in the series was rated from the least to most difficult, by participant.</p>
<p>Now if we only needed to compute these rankings once this wouldn’t have been any big deal; however, we needed to do it <strong>three times</strong>.</p>
<p>Much of the same code and the same process would need to be copied and pasted, resulting in a very long, messy, harder to read script. With purrr however, we can reduce the redundancies to a minimum, saving time and reducing the chances of mistakes.</p>
<p><strong><em>Step 1.</em></strong> Just like before, the first step is to find a line-by-line solution for a single item, and then to generalize this into a shortcut function that can be applied to the any item “i” in a series of items.</p>
<p>For the sake of brevity, I’m going to skip most of that and just include the functions below.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;C:/Github Repos/Studies/JLWOP/Data and Models/jlwop_reentry_survey.RData&quot;</span>)</span>
<span id="cb222-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="do">#### CREATE THE DATA SETS WE NEED####</span></span>
<span id="cb222-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span>jlwop_reentry_survey <span class="co"># analysis 1 keeps the data as-is</span></span>
<span id="cb222-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span>jlwop_reentry_survey <span class="sc">%&gt;%</span> <span class="co"># supplementary analysis replaces the NA&#39;s with 0</span></span>
<span id="cb222-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(barrier_housing<span class="sc">:</span>barrier_identification), replace_na,<span class="dv">0</span>))</span>
<span id="cb222-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(jlwop_reentry_survey) <span class="co"># remove old data set to avoid confusion</span></span>
<span id="cb222-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-12" aria-hidden="true" tabindex="-1"></a><span class="do">#### Functions ####</span></span>
<span id="cb222-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-14" aria-hidden="true" tabindex="-1"></a><span class="co"># transformation function to wrangle the data into proper formatting</span></span>
<span id="cb222-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-15" aria-hidden="true" tabindex="-1"></a>rotate_data<span class="ot">=</span><span class="cf">function</span>(data, variable_prefix){</span>
<span id="cb222-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb222-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-17" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb222-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb222-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols=</span> <span class="fu">starts_with</span>(variable_prefix), <span class="co"># collect all the desired variables (i.e., columns)....</span></span>
<span id="cb222-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="co">#...and put them into a new categorical variable called &quot;variable&quot;</span></span>
<span id="cb222-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;participant_score&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># ...and store their values in a new variable called &quot;participant_score&quot;</span></span>
<span id="cb222-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(unique,participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb222-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb222-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(unique, participant_score, variable)) <span class="sc">%&gt;%</span> <span class="co"># keep only these 3 variables</span></span>
<span id="cb222-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(variable, <span class="at">.before =</span> participant_score) <span class="co"># put the newly created variable up front</span></span>
<span id="cb222-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-27" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb222-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb222-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-31" aria-hidden="true" tabindex="-1"></a><span class="co"># creating the rankings for each variable; then transform data back to original structure</span></span>
<span id="cb222-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-32" aria-hidden="true" tabindex="-1"></a>rank_and_unpivot<span class="ot">=</span><span class="cf">function</span>(data){</span>
<span id="cb222-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-33" aria-hidden="true" tabindex="-1"></a>  data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb222-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unique) <span class="sc">%&gt;%</span> <span class="co"># group the scores so they can be ranked by participant</span></span>
<span id="cb222-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank1=</span><span class="fu">dense_rank</span>(participant_score), <span class="co"># create ranking variable</span></span>
<span id="cb222-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-36" aria-hidden="true" tabindex="-1"></a>               <span class="at">rank=</span><span class="fu">max</span>(rank1,<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="dv">1</span> <span class="sc">-</span> rank1) <span class="sc">%&gt;%</span> <span class="co"># fix ranks by flipping to ascending order</span></span>
<span id="cb222-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank=</span><span class="fu">factor</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># convert rank to factor structure</span></span>
<span id="cb222-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rank1)</span>
<span id="cb222-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot back to wide</span></span>
<span id="cb222-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-42" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb222-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> rank<span class="sc">:</span>participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb222-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># un-group the data and delete the generated names</span></span>
<span id="cb222-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-46" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb222-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-47" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong><em>Step 2.</em></strong> Again, like before, we want to combine all elements of interest into some object. Once we have that, we then pass said object to <code>map()</code> and supply the map call with our custom function.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-1" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank, <span class="at">na_zero=</span>na_zero) <span class="sc">%&gt;%</span> <span class="co"># create lists</span></span>
<span id="cb223-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f=</span>rotate_data, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># apply custom function along whole list</span></span>
<span id="cb223-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rank_and_unpivot) <span class="co"># again!!  DO IT AGAIN! With another function this time.</span></span>
<span id="cb223-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-5" aria-hidden="true" tabindex="-1"></a><span class="co"># extract list elements to make them data frames again</span></span>
<span id="cb223-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-6" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(dfs, <span class="fu">globalenv</span>())</span>
<span id="cb223-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(dfs) <span class="co">#discard list. It has fulfilled its purpose.</span></span></code></pre></div>
<p>And just like that, we’re done!</p>
</div>
<div id="example-3-readimport-several-files-at-once-with-map" class="section level3 hasAnchor" number="10.3.3">
<h3><span class="header-section-number">10.3.3</span> Example 3: Read/Import several files at once with <code>map()</code><a href="intermediate-r-functions-loops-and-iterative-programming.html#example-3-readimport-several-files-at-once-with-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Multiple ways you can do this….</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="do">################### Option 1: read all into the global environment, keeping them as SEPERATE df&#39;s ###############</span></span>
<span id="cb224-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-2" aria-hidden="true" tabindex="-1"></a>legaldmlab<span class="sc">::</span><span class="fu">read_all</span>(<span class="at">path=</span><span class="st">&quot;Data Repository/Stats Data Repository/JASP files&quot;</span>, <span class="at">extension =</span> <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb224-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1.A: Squish ALL OBJECTS in the working environment into a list</span></span>
<span id="cb224-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Again, note the &quot;ALL OBJECTS&quot; part; make sure there are no functions or other things in the environment when you run this.</span></span>
<span id="cb224-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-6" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">mget</span>(<span class="fu">ls</span>())</span>
<span id="cb224-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-9" aria-hidden="true" tabindex="-1"></a><span class="do">############# Option 2: Read in all files as a LIST of df&#39;s, then stitch in the names #####################################</span></span>
<span id="cb224-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-11" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>, <span class="st">&quot;/&quot;</span>), </span>
<span id="cb224-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-12" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list.files</span>(<span class="at">path=</span>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>))</span>
<span id="cb224-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-14" aria-hidden="true" tabindex="-1"></a>files_list<span class="ot">=</span>files <span class="sc">|&gt;</span> </span>
<span id="cb224-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(readr<span class="sc">::</span>read_csv)</span>
<span id="cb224-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(files_list)<span class="ot">=</span><span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>)) <span class="sc">|&gt;</span> <span class="co">#specify file path as a string</span></span>
<span id="cb224-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># pass the path string to list files; search in this location for files with this extension</span></span>
<span id="cb224-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="at">pattern=</span><span class="st">&quot;.csv&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>) <span class="co"># remove this pattern to save only the name</span></span>
<span id="cb224-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2.A: Extract each data frame and put everything into the global environment</span></span>
<span id="cb224-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-23" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(cog_data, <span class="fu">globalenv</span>())</span></code></pre></div>
</div>
</div>
<div id="other-purrr-commands" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Other purrr commands<a href="intermediate-r-functions-loops-and-iterative-programming.html#other-purrr-commands" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Note that <code>map()</code> always returns a list, and depending on the output that you want, you may need to use a variation of <code>map()</code>. These variations are as follows:</p>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Return</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>map_lgl()</code></td>
<td>logical vector</td>
</tr>
<tr class="even">
<td><code>map_int()</code></td>
<td>integer vector</td>
</tr>
<tr class="odd">
<td><code>map_dbl()</code></td>
<td>double vector</td>
</tr>
<tr class="even">
<td><code>map_chr()</code></td>
<td>character vector</td>
</tr>
<tr class="odd">
<td><code>walk()</code></td>
<td>only returns the side effects of a function</td>
</tr>
</tbody>
</table>
<div id="walk-and-walk2" class="section level3 hasAnchor" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> <code>walk</code> and <code>walk2</code><a href="intermediate-r-functions-loops-and-iterative-programming.html#walk-and-walk2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Walk() is useful for when you just want to plot something or write a save file to your disk, etc. It does not give you any return to store something in the environment. You use it to write/read files, open graphics windows, and so on.</p>
<p><strong><em>Example: Writing multiple files at once</em></strong></p>
<p>Utilize <code>purrr::walk2()</code> to apply a function iteratively on TWO objects simultaneously. To save multiple .csv files with <code>walk2</code>, we need two distinct lists: 1. A list of data frames that we wish to export, 2. and the file paths, complete with the file names and extensions, for each file to be written.</p>
<p>First create and define both list items. Then apply <code>walk2()</code> to pluck an element from list 1 and its corresponding element from list 2, and apply the <code>write_csv</code> function in for-loop fashion.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DEMO 1: Writing multiple plots at once</span></span>
<span id="cb225-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create list one, the list of objects</span></span>
<span id="cb225-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-4" aria-hidden="true" tabindex="-1"></a>figs <span class="ot">=</span> <span class="fu">list</span>(<span class="at">scatter_plot=</span>scatter_plot, </span>
<span id="cb225-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">multi_plot=</span>multi_plot)</span>
<span id="cb225-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-7" aria-hidden="true" tabindex="-1"></a><span class="co"># create list 2, the list of file names</span></span>
<span id="cb225-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-8" aria-hidden="true" tabindex="-1"></a>fig_names <span class="ot">=</span> figs <span class="sc">|&gt;</span></span>
<span id="cb225-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb225-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(paste0, <span class="st">&quot;.png&quot;</span>)</span>
<span id="cb225-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-12" aria-hidden="true" tabindex="-1"></a><span class="co"># pass both to purrr to use ggsave iteratively over both lists once and save all graphs with one command</span></span>
<span id="cb225-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-13" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(figs, fig_names, <span class="sc">~</span><span class="fu">ggsave</span>(<span class="at">plot =</span> figs,</span>
<span id="cb225-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">filename =</span> fig_names </span>
<span id="cb225-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-15" aria-hidden="true" tabindex="-1"></a>                               <span class="at">path=</span>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Figures and Tables&quot;</span>),</span>
<span id="cb225-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-16" aria-hidden="true" tabindex="-1"></a>                               <span class="at">device =</span> <span class="st">&quot;png&quot;</span>, <span class="at">dpi =</span> <span class="dv">300</span>))</span></code></pre></div>
<p>A second demo, this time using <code>write.csv</code> to save/export multiple CSV files at once</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DEMO 2: Wrinting multiple .csv files at once</span></span>
<span id="cb226-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="do">### Custom function ####</span></span>
<span id="cb226-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create needed function that grabs file names and stitches them together with the correct path and extension</span></span>
<span id="cb226-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Included in legaldmlab package</span></span>
<span id="cb226-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-6" aria-hidden="true" tabindex="-1"></a>bundle_paths<span class="ot">=</span><span class="cf">function</span>(df_list, output_location, file_type){</span>
<span id="cb226-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-7" aria-hidden="true" tabindex="-1"></a>  names<span class="ot">=</span><span class="fu">names</span>(df_list)</span>
<span id="cb226-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-8" aria-hidden="true" tabindex="-1"></a>  paths<span class="ot">=</span><span class="fu">rep</span>(here<span class="sc">::</span><span class="fu">here</span>(output_location), <span class="fu">length</span>(names))</span>
<span id="cb226-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-9" aria-hidden="true" tabindex="-1"></a>  extension<span class="ot">=</span><span class="fu">rep</span>(<span class="fu">c</span>(file_type), <span class="fu">length</span>(names))</span>
<span id="cb226-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb226-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-11" aria-hidden="true" tabindex="-1"></a>  fixed_names<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;/&quot;</span>,names)</span>
<span id="cb226-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb226-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-13" aria-hidden="true" tabindex="-1"></a>  path_bundle<span class="ot">=</span><span class="fu">list</span>(paths,fixed_names, extension) <span class="sc">%&gt;%</span> </span>
<span id="cb226-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pmap</span>(., paste0)</span>
<span id="cb226-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb226-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(path_bundle)</span>
<span id="cb226-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb226-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-19" aria-hidden="true" tabindex="-1"></a><span class="do">#### Exporting the .csv files for SPSS/JASP/etc. ####</span></span>
<span id="cb226-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Define list 1</span></span>
<span id="cb226-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-21" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank,</span>
<span id="cb226-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero=</span>na_zero,</span>
<span id="cb226-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero_helpreint=</span>na_zero_helpreint)</span>
<span id="cb226-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-25" aria-hidden="true" tabindex="-1"></a><span class="co"># list 2</span></span>
<span id="cb226-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-26" aria-hidden="true" tabindex="-1"></a>paths_csv<span class="ot">=</span><span class="fu">bundle_paths</span>(<span class="at">df_list =</span> dfs, <span class="at">folder_location =</span> <span class="st">&quot;JLWOP/Data and Models&quot;</span>, <span class="at">file_type =</span> <span class="st">&quot;.sav&quot;</span>)</span>
<span id="cb226-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over all elements in list 1 and corresponding element in list 2;</span></span>
<span id="cb226-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-30" aria-hidden="true" tabindex="-1"></a><span class="co"># and apply the the write_csv function to each</span></span>
<span id="cb226-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-31" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(<span class="at">.x=</span>dfs, <span class="at">.y=</span> paths, <span class="at">.f=</span>haven<span class="sc">::</span>write_sav)</span>
<span id="cb226-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-34" aria-hidden="true" tabindex="-1"></a><span class="do">#### .RData file for R users ####</span></span>
<span id="cb226-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine multiple data frames into a single .RData file and export</span></span>
<span id="cb226-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-36" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;na_blank&quot;</span>, <span class="st">&quot;na_zero&quot;</span>, <span class="st">&quot;na_zero_helpreint&quot;</span>), </span>
<span id="cb226-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-37" aria-hidden="true" tabindex="-1"></a>     <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;JLWOP&quot;</span>, <span class="st">&quot;Data and Models&quot;</span>,<span class="st">&quot;ranking_data.RData&quot;</span>))</span></code></pre></div>
</div>
<div id="map2" class="section level3 hasAnchor" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> <code>map2</code><a href="intermediate-r-functions-loops-and-iterative-programming.html#map2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb227-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_a.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_a.png" width="594" /></p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb228-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_b.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_b.png" width="816" /></p>
</div>
<div id="pmap-for-when-you-have-a-bunch-of-shit" class="section level3 hasAnchor" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> <code>pmap</code> for when you have a bunch of shit<a href="intermediate-r-functions-loops-and-iterative-programming.html#pmap-for-when-you-have-a-bunch-of-shit" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This function is for iterating over <em>three or more</em> elements. As soon as you have &gt;2 items you have to iterate over, you need <code>pmap()</code>, which acts on <strong>a list object called <code>.i</code></strong> instead of a list object.</p>
<p>The list <code>.i</code> is a list of all the objects you want to iterate over. If you give it a list of 18 items, it iterates over all 18. If the list only has two things, it only acts on those two.</p>
<p>She says its easiest to imagine the list as a data frame, and the columns of the data frame like the elements of that list.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb229-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap.png" width="466" /></p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb230-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap_2.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap_2.png" width="600" /></p>
</div>
</div>
<div id="using-purrr-to-manage-many-models" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Using purrr to manage many models<a href="intermediate-r-functions-loops-and-iterative-programming.html#using-purrr-to-manage-many-models" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Below is the full script I copied from Hadley Wickham’s lecture, which you can watch <a href="https://www.youtube.com/watch?v=rz3_FDVt9eg">here</a></p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dplyr,purrr,tidyverse,gapminder)</span>
<span id="cb231-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="do">#### Workflow for managing many models in R ####</span></span>
<span id="cb231-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Nest data with {tidyr}</span></span>
<span id="cb231-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Use {purrr} to map a modeling function</span></span>
<span id="cb231-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Use {broom} to inspect your tidy data</span></span>
<span id="cb231-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-9" aria-hidden="true" tabindex="-1"></a>gapminder<span class="ot">=</span>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb231-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year1950=</span> year<span class="dv">-1950</span>) <span class="co">#the number of years it&#39;s been since 1950</span></span>
<span id="cb231-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-12" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb231-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-13" aria-hidden="true" tabindex="-1"></a><span class="do">#### Step 1. Nest the data. ####</span></span>
<span id="cb231-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-15" aria-hidden="true" tabindex="-1"></a><span class="co"># A nested data frame has one column per country. You&#39;re essentially </span></span>
<span id="cb231-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-16" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a Russian doll; a data frame inside of a larger data frame.</span></span>
<span id="cb231-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-18" aria-hidden="true" tabindex="-1"></a>by_country<span class="ot">=</span>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb231-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent,country) <span class="sc">%&gt;%</span> <span class="co"># variables to keep at the top level</span></span>
<span id="cb231-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="co"># smush everything else into a df, and store this mini-df in its own column</span></span>
<span id="cb231-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-22" aria-hidden="true" tabindex="-1"></a><span class="co"># with this, you can have an entire table per row; a whole data frame for each country</span></span>
<span id="cb231-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Essentially condensing a list into a table</span></span>
<span id="cb231-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-24" aria-hidden="true" tabindex="-1"></a>by_country<span class="sc">$</span>data[[<span class="dv">1</span>]]</span>
<span id="cb231-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-27" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb231-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-29" aria-hidden="true" tabindex="-1"></a><span class="do">#### Step 2. Use purrr to map stuff. ####</span></span>
<span id="cb231-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 12:50</span></span>
<span id="cb231-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-32" aria-hidden="true" tabindex="-1"></a>country_model<span class="ot">=</span><span class="cf">function</span>(df){</span>
<span id="cb231-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(lifeExp <span class="sc">~</span> year1950, <span class="at">data =</span> df)</span>
<span id="cb231-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb231-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-36" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span> by_country <span class="sc">%&gt;%</span> </span>
<span id="cb231-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb231-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod=</span><span class="fu">map</span>(data,country_model)</span>
<span id="cb231-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb231-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-42" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb231-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent,country) <span class="sc">%&gt;%</span> </span>
<span id="cb231-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb231-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb231-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod=</span> data <span class="sc">%&gt;%</span> <span class="fu">map</span>(country_model)</span>
<span id="cb231-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb231-48"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-49"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-49" aria-hidden="true" tabindex="-1"></a><span class="co"># 27:11</span></span>
<span id="cb231-50"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-51"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-51" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb231-52"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-52" aria-hidden="true" tabindex="-1"></a><span class="do">##### Step 3. ####</span></span>
<span id="cb231-53"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-54"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-54" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates another nested df inside of your main data frame that has the summary stats of each model</span></span>
<span id="cb231-55"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-55" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span>models <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb231-56"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">tidy=</span><span class="fu">map</span>(mod, broom<span class="sc">::</span>tidy), <span class="co"># tidy() gives model estimates</span></span>
<span id="cb231-57"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">glance=</span><span class="fu">map</span>(mod,broom<span class="sc">::</span>glance), <span class="co"># glance() gives model summaries</span></span>
<span id="cb231-58"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">augment=</span><span class="fu">map</span>(mod,broom<span class="sc">::</span>augment) <span class="co"># model coefficients</span></span>
<span id="cb231-59"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb231-60"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-61"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-61" aria-hidden="true" tabindex="-1"></a><span class="co"># What can you do with this nest of data frames? </span></span>
<span id="cb231-62"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-62" aria-hidden="true" tabindex="-1"></a><span class="co"># The reverse of step 1; un-nest it to unpack everything!</span></span>
<span id="cb231-63"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 34:40</span></span>
<span id="cb231-64"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Keeps a massive list of related information neatly organized!</span></span>
<span id="cb231-65"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-66"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-66" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,data) <span class="co"># back to where we started</span></span>
<span id="cb231-67"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-67" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,glance, <span class="at">.drop =</span> <span class="cn">TRUE</span>) </span>
<span id="cb231-68"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-68" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,tidy) </span></code></pre></div>
<p>…and here is a version I made of the above to manage many Latent Growth Curve models.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CONDENSED MASTER TABLE VERSION -----------------------------------------------------------------------------</span></span>
<span id="cb232-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Models table that has all models condensed</span></span>
<span id="cb232-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-4" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="ot">=</span><span class="fu">tibble</span>(</span>
<span id="cb232-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">#### Define model names ####</span></span>
<span id="cb232-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">model_name=</span><span class="fu">c</span>(<span class="st">&quot;Linear&quot;</span>, <span class="st">&quot;Quadratic&quot;</span>, <span class="st">&quot;Latent_Basis&quot;</span>),</span>
<span id="cb232-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">##### List model specifications for lavaan ####</span></span>
<span id="cb232-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">model_spec=</span><span class="fu">list</span>(</span>
<span id="cb232-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">linear_model=</span> <span class="st">&#39;</span></span>
<span id="cb232-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-13" aria-hidden="true" tabindex="-1"></a><span class="st">  # intercept and slope with fixed coefficients</span></span>
<span id="cb232-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-14" aria-hidden="true" tabindex="-1"></a><span class="st">  i =~ 1*panss_total_400 + 1*panss_total_1000 + 1*panss_total_1600 + 1*panss_total_2200 + 1*panss_total_2800 +  1*panss_total_3400 + 1*panss_total_5200</span></span>
<span id="cb232-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-15" aria-hidden="true" tabindex="-1"></a><span class="st">  s =~ 0*panss_total_400 + 3*panss_total_1000 + 6*panss_total_1600 + 9*panss_total_2200 + 12*panss_total_2800 + 15*panss_total_3400 + 24*panss_total_5200</span></span>
<span id="cb232-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-16" aria-hidden="true" tabindex="-1"></a><span class="st">  &#39;</span>,</span>
<span id="cb232-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">quadratic_model=</span> <span class="st">&#39;</span></span>
<span id="cb232-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-19" aria-hidden="true" tabindex="-1"></a><span class="st">  # intercept and slope with fixed coefficients</span></span>
<span id="cb232-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-20" aria-hidden="true" tabindex="-1"></a><span class="st">  i =~ 1*panss_total_400 + 1*panss_total_1000 + 1*panss_total_1600 + 1*panss_total_2200 + 1*panss_total_2800 +  1*panss_total_3400</span></span>
<span id="cb232-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-21" aria-hidden="true" tabindex="-1"></a><span class="st">  s =~ 0*panss_total_400 + 3*panss_total_1000 + 6*panss_total_1600 + 9*panss_total_2200 + 12*panss_total_2800 + 15*panss_total_3400 + 24*panss_total_5200</span></span>
<span id="cb232-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-22" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb232-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-23" aria-hidden="true" tabindex="-1"></a><span class="st">  qs =~ 0*panss_total_400 + 9*panss_total_1000 + 36*panss_total_1600 + 81*panss_total_2200 + 144*panss_total_2800 + 225*panss_total_3400 + 576*panss_total_5200</span></span>
<span id="cb232-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-24" aria-hidden="true" tabindex="-1"></a><span class="st">  &#39;</span>,</span>
<span id="cb232-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">latentBasis_model=</span> <span class="st">&#39;</span></span>
<span id="cb232-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-27" aria-hidden="true" tabindex="-1"></a><span class="st">  # intercept and slope with fixed coefficients</span></span>
<span id="cb232-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-28" aria-hidden="true" tabindex="-1"></a><span class="st">  i =~ 1*panss_total_400 + 1*panss_total_1000 + 1*panss_total_1600 + 1*panss_total_2200 + 1*panss_total_2800 +  1*panss_total_3400 + 1*panss_total_5200</span></span>
<span id="cb232-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-29" aria-hidden="true" tabindex="-1"></a><span class="st">  s =~ 0*panss_total_400 + NA*panss_total_1000 + NA*panss_total_1600 + NA*panss_total_2200 + NA*panss_total_2800 + NA*panss_total_3400 + 1*panss_total_5200</span></span>
<span id="cb232-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-30" aria-hidden="true" tabindex="-1"></a><span class="st">  &#39;</span></span>
<span id="cb232-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-31" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb232-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-33" aria-hidden="true" tabindex="-1"></a>  <span class="do">#### Fit all models at once with purrr ####</span></span>
<span id="cb232-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">fitted_model=</span>model_spec <span class="sc">|&gt;</span> <span class="fu">map</span>(lavaan<span class="sc">::</span>growth, <span class="at">data=</span>panss_sem_data, <span class="at">missing=</span><span class="st">&quot;FIML&quot;</span>),</span>
<span id="cb232-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb232-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-40" aria-hidden="true" tabindex="-1"></a><span class="do">#### Add parameter estimates and fit stats ####</span></span>
<span id="cb232-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-41" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="ot">=</span>models_noCovs <span class="sc">|&gt;</span> </span>
<span id="cb232-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tidy_parameters=</span><span class="fu">map</span>(fitted_model, tidy, <span class="at">conf.int=</span>.<span class="dv">95</span>), <span class="co">#parameter estimates</span></span>
<span id="cb232-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">global_fit=</span><span class="fu">map</span>(fitted_model, performance<span class="sc">::</span>model_performance)) <span class="co">#global fit of models</span></span>
<span id="cb232-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-45" aria-hidden="true" tabindex="-1"></a><span class="do">#### Clean up stuff ####</span></span>
<span id="cb232-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-46" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="sc">$</span>tidy_parameters<span class="ot">=</span>models_noCovs<span class="sc">$</span>tidy_parameters <span class="sc">|&gt;</span> </span>
<span id="cb232-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(select,<span class="sc">-</span><span class="fu">c</span>(std.lv<span class="sc">:</span>std.nox, op)) <span class="sc">|&gt;</span> <span class="co"># remove extra columns</span></span>
<span id="cb232-48"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(mutate, <span class="at">estimate=</span><span class="fu">round</span>(estimate, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">|&gt;</span> <span class="co"># round numbers</span></span>
<span id="cb232-49"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(mutate, (<span class="fu">across</span>(<span class="fu">c</span>(std.error<span class="sc">:</span>p.value, conf.low, conf.high), round, <span class="dv">3</span>)))</span>
<span id="cb232-50"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-51"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-51" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="sc">$</span>global_fit<span class="ot">=</span>models_noCovs<span class="sc">$</span>global_fit <span class="sc">|&gt;</span> </span>
<span id="cb232-52"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(select, <span class="fu">c</span>(Chi2<span class="sc">:</span>p_Chi2, RMSEA<span class="sc">:</span>SRMR, CFI, AIC))</span></code></pre></div>
<p>Note how the functions inside <code>map</code> take on a slightly different form, but work the same.</p>
<p>Using this framework, you can easily drill down into any column and be sure that you’re accessing the right thing. Everything is always kept together, and always acted upon in the same way. This minimizes mistakes.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb233-1" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="sc">$</span>tidy_parameters<span class="sc">$</span>latent_Basis_model</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="misc.-stuff.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="intro-to-r-markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/edit/master/10-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/blob/master/10-functions.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
