<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set</title>
  <meta name="description" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Intermediate R: Functions, Loops, and Iterative Programming | Creating a simulated data set" />
  
  
  

<meta name="author" content="Ryan Schneider" />


<meta name="date" content="2022-11-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="misc.-stuff.html"/>
<link rel="next" href="intro-to-r-markdown.html"/>
<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Compendium</a></li>

<li class="divider"></li>
<li><a href="index.html#a-monument-to-my-madness" id="toc-a-monument-to-my-madness"><span class="toc-section-number">1</span> A Monument to my Madness</a>
<ul>
<li><a href="index.html#what-this-book-is-and-what-it-is-not" id="toc-what-this-book-is-and-what-it-is-not"><span class="toc-section-number">1.1</span> What this book is, and what it is not</a></li>
</ul></li>
<li><a href="introduction-r-basics.html#introduction-r-basics" id="toc-introduction-r-basics"><span class="toc-section-number">2</span> Introduction: R Basics</a>
<ul>
<li><a href="introduction-r-basics.html#importing-data" id="toc-importing-data"><span class="toc-section-number">2.1</span> Importing Data</a>
<ul>
<li><a href="introduction-r-basics.html#spreadsheets" id="toc-spreadsheets"><span class="toc-section-number">2.1.1</span> Spreadsheets</a></li>
</ul></li>
<li><a href="introduction-r-basics.html#exporting-i.e.-saving-data-and-output" id="toc-exporting-i.e.-saving-data-and-output"><span class="toc-section-number">2.2</span> Exporting (i.e., saving) Data and Output</a>
<ul>
<li><a href="introduction-r-basics.html#exporting-to-.csv" id="toc-exporting-to-.csv"><span class="toc-section-number">2.2.1</span> Exporting to .CSV</a></li>
<li><a href="introduction-r-basics.html#export-to-.rdata-and-load-the-data-again-later" id="toc-export-to-.rdata-and-load-the-data-again-later"><span class="toc-section-number">2.2.2</span> Export to .RData (and load the data again later)</a></li>
<li><a href="introduction-r-basics.html#export-to-excel" id="toc-export-to-excel"><span class="toc-section-number">2.2.3</span> Export to Excel</a></li>
<li><a href="introduction-r-basics.html#accessedit-specific-cell-number-values" id="toc-accessedit-specific-cell-number-values"><span class="toc-section-number">2.2.4</span> Access/edit specific cell number values</a></li>
</ul></li>
</ul></li>
<li><a href="wrangle-data.html#wrangle-data" id="toc-wrangle-data"><span class="toc-section-number">3</span> Wrangle Data</a>
<ul>
<li><a href="wrangle-data.html#joining-or-splitting" id="toc-joining-or-splitting"><span class="toc-section-number">3.1</span> Joining or Splitting</a>
<ul>
<li><a href="wrangle-data.html#whole-data-sets" id="toc-whole-data-sets"><span class="toc-section-number">3.1.1</span> Whole Data Sets</a></li>
<li><a href="wrangle-data.html#individual-columnsvariables" id="toc-individual-columnsvariables"><span class="toc-section-number">3.1.2</span> Individual Columns/Variables</a></li>
</ul></li>
<li><a href="wrangle-data.html#selectingextracting-specific-variables-with-select" id="toc-selectingextracting-specific-variables-with-select"><span class="toc-section-number">3.2</span> Selecting/extracting specific variables with <code>select()</code></a></li>
<li><a href="wrangle-data.html#advanced-filtering-techniques" id="toc-advanced-filtering-techniques"><span class="toc-section-number">3.3</span> Advanced Filtering techniques</a>
<ul>
<li><a href="wrangle-data.html#filter-based-on-partial-match" id="toc-filter-based-on-partial-match"><span class="toc-section-number">3.3.1</span> Filter based on partial match</a></li>
<li><a href="wrangle-data.html#filtering-based-on-multiple-conditions" id="toc-filtering-based-on-multiple-conditions"><span class="toc-section-number">3.3.2</span> Filtering based on multiple conditions</a></li>
<li><a href="wrangle-data.html#filtering-across-multiple-columns" id="toc-filtering-across-multiple-columns"><span class="toc-section-number">3.3.3</span> Filtering across multiple columns</a></li>
</ul></li>
<li><a href="wrangle-data.html#if-then-and-case-when" id="toc-if-then-and-case-when"><span class="toc-section-number">3.4</span> If-then and Case-when</a>
<ul>
<li><a href="wrangle-data.html#if-then" id="toc-if-then"><span class="toc-section-number">3.4.1</span> If-then</a></li>
<li><a href="wrangle-data.html#case-when" id="toc-case-when"><span class="toc-section-number">3.4.2</span> Case-when</a></li>
</ul></li>
<li><a href="wrangle-data.html#conditional-replacement-of-values" id="toc-conditional-replacement-of-values"><span class="toc-section-number">3.5</span> Conditional replacement of values</a></li>
<li><a href="wrangle-data.html#merging-variables" id="toc-merging-variables"><span class="toc-section-number">3.6</span> Merging variables</a></li>
<li><a href="wrangle-data.html#apply-a-function-to-multiple-variables-at-once" id="toc-apply-a-function-to-multiple-variables-at-once"><span class="toc-section-number">3.7</span> Apply a function to multiple variables at once</a></li>
<li><a href="wrangle-data.html#pivoting-i.e.-transposing-data" id="toc-pivoting-i.e.-transposing-data"><span class="toc-section-number">3.8</span> Pivoting (i.e., transposing) data</a>
<ul>
<li><a href="wrangle-data.html#condense-multiple-rows-into-a-single-column-pivot-wide-to-long" id="toc-condense-multiple-rows-into-a-single-column-pivot-wide-to-long"><span class="toc-section-number">3.8.1</span> Condense multiple rows into a single column (pivot wide to long)</a></li>
</ul></li>
<li><a href="wrangle-data.html#turn-row-names-into-a-columnvariable" id="toc-turn-row-names-into-a-columnvariable"><span class="toc-section-number">3.9</span> Turn row names into a column/variable</a></li>
<li><a href="wrangle-data.html#how-to-editchange-column-names" id="toc-how-to-editchange-column-names"><span class="toc-section-number">3.10</span> How to edit/change column names</a></li>
<li><a href="wrangle-data.html#re-order-columns-in-a-data-set" id="toc-re-order-columns-in-a-data-set"><span class="toc-section-number">3.11</span> Re-order columns in a data set</a></li>
<li><a href="wrangle-data.html#date-and-time-variables" id="toc-date-and-time-variables"><span class="toc-section-number">3.12</span> Date and time variables</a>
<ul>
<li><a href="wrangle-data.html#date-time-objects" id="toc-date-time-objects"><span class="toc-section-number">3.12.1</span> Date-time objects</a></li>
<li><a href="wrangle-data.html#date-only-objects" id="toc-date-only-objects"><span class="toc-section-number">3.12.2</span> Date-only objects</a></li>
<li><a href="wrangle-data.html#find-the-difference-between-two-datestimes" id="toc-find-the-difference-between-two-datestimes"><span class="toc-section-number">3.12.3</span> Find the difference between two dates/times</a></li>
</ul></li>
<li><a href="wrangle-data.html#reverse-code-a-variable" id="toc-reverse-code-a-variable"><span class="toc-section-number">3.13</span> Reverse-code a variable</a></li>
<li><a href="wrangle-data.html#dummy-coding-the-very-fast-and-easy-way" id="toc-dummy-coding-the-very-fast-and-easy-way"><span class="toc-section-number">3.14</span> Dummy coding (the very fast and easy way)</a></li>
<li><a href="wrangle-data.html#create-a-relative-ranking-among-several-variables" id="toc-create-a-relative-ranking-among-several-variables"><span class="toc-section-number">3.15</span> Create a relative ranking among several variables</a></li>
<li><a href="wrangle-data.html#manipulating-the-working-environment-and-many-things-at-once" id="toc-manipulating-the-working-environment-and-many-things-at-once"><span class="toc-section-number">3.16</span> Manipulating the working environment and many things at once</a>
<ul>
<li><a href="wrangle-data.html#stuff-the-whole-working-environment-into-a-list" id="toc-stuff-the-whole-working-environment-into-a-list"><span class="toc-section-number">3.16.1</span> Stuff the WHOLE working environment into a list</a></li>
<li><a href="wrangle-data.html#extract-everything-from-a-list-into-the-environment" id="toc-extract-everything-from-a-list-into-the-environment"><span class="toc-section-number">3.16.2</span> Extract everything from a list into the environment</a></li>
<li><a href="wrangle-data.html#delete-everything-in-the-entire-environment-except-for-one-item" id="toc-delete-everything-in-the-entire-environment-except-for-one-item"><span class="toc-section-number">3.16.3</span> Delete everything in the entire environment, except for one item</a></li>
</ul></li>
<li><a href="wrangle-data.html#wrangling-lists" id="toc-wrangling-lists"><span class="toc-section-number">3.17</span> Wrangling Lists</a>
<ul>
<li><a href="wrangle-data.html#nesting" id="toc-nesting"><span class="toc-section-number">3.17.1</span> Nesting</a></li>
<li><a href="wrangle-data.html#combiningcollapsing-list-levels-reducing" id="toc-combiningcollapsing-list-levels-reducing"><span class="toc-section-number">3.17.2</span> Combining/collapsing list levels (Reducing)</a></li>
</ul></li>
</ul></li>
<li><a href="clean-data.html#clean-data" id="toc-clean-data"><span class="toc-section-number">4</span> Clean Data</a>
<ul>
<li><a href="clean-data.html#replace-a-value-with-na" id="toc-replace-a-value-with-na"><span class="toc-section-number">4.1</span> Replace a value with NA</a></li>
<li><a href="clean-data.html#replace-nas-with-a-value" id="toc-replace-nas-with-a-value"><span class="toc-section-number">4.2</span> Replace NA’s with a value</a></li>
<li><a href="clean-data.html#identify-columns-or-rows-with-missing-values" id="toc-identify-columns-or-rows-with-missing-values"><span class="toc-section-number">4.3</span> Identify columns or rows with Missing values</a></li>
<li><a href="clean-data.html#find-the-percentage-of-a-variable-that-is-missing" id="toc-find-the-percentage-of-a-variable-that-is-missing"><span class="toc-section-number">4.4</span> Find the percentage of a variable that is missing</a></li>
<li><a href="clean-data.html#exclude-missing-values-from-analysis" id="toc-exclude-missing-values-from-analysis"><span class="toc-section-number">4.5</span> Exclude Missing values from analysis</a></li>
<li><a href="clean-data.html#dropping-missing-values-from-the-data-set" id="toc-dropping-missing-values-from-the-data-set"><span class="toc-section-number">4.6</span> Dropping Missing values from the data set</a></li>
</ul></li>
<li><a href="working-with-factors.html#working-with-factors" id="toc-working-with-factors"><span class="toc-section-number">5</span> Working with Factors</a>
<ul>
<li><a href="working-with-factors.html#manually-recodechange-a-factors-levels" id="toc-manually-recodechange-a-factors-levels"><span class="toc-section-number">5.1</span> Manually recode/change a factor’s levels</a></li>
<li><a href="working-with-factors.html#collapse-factor-levels" id="toc-collapse-factor-levels"><span class="toc-section-number">5.2</span> Collapse factor levels</a></li>
<li><a href="working-with-factors.html#add-levels-to-a-factor" id="toc-add-levels-to-a-factor"><span class="toc-section-number">5.3</span> Add levels to a factor</a></li>
<li><a href="working-with-factors.html#drop-unused-levels" id="toc-drop-unused-levels"><span class="toc-section-number">5.4</span> Drop unused levels</a></li>
<li><a href="working-with-factors.html#change-the-order-of-a-factors-levels" id="toc-change-the-order-of-a-factors-levels"><span class="toc-section-number">5.5</span> Change the order of a factor’s levels</a></li>
</ul></li>
<li><a href="working-with-strings.html#working-with-strings" id="toc-working-with-strings"><span class="toc-section-number">6</span> Working with Strings</a>
<ul>
<li><a href="working-with-strings.html#remove-a-pattern-from-a-string" id="toc-remove-a-pattern-from-a-string"><span class="toc-section-number">6.1</span> Remove a pattern from a string</a></li>
<li><a href="working-with-strings.html#replace-one-pattern-in-a-string-with-another" id="toc-replace-one-pattern-in-a-string-with-another"><span class="toc-section-number">6.2</span> Replace one pattern in a string with another</a></li>
<li><a href="working-with-strings.html#find-i.e.-filter-for-all-instances-of-a-string" id="toc-find-i.e.-filter-for-all-instances-of-a-string"><span class="toc-section-number">6.3</span> Find (i.e., filter for) all instances of a string</a></li>
<li><a href="working-with-strings.html#drop-all-rows-from-a-data-set-that-contain-a-certain-string" id="toc-drop-all-rows-from-a-data-set-that-contain-a-certain-string"><span class="toc-section-number">6.4</span> Drop all rows from a data set that contain a certain string</a></li>
<li><a href="working-with-strings.html#force-all-letters-to-lower-case" id="toc-force-all-letters-to-lower-case"><span class="toc-section-number">6.5</span> Force all letters to lower case</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#figures-and-graphs-with-the-ggplot-and-see-packages" id="toc-figures-and-graphs-with-the-ggplot-and-see-packages"><span class="toc-section-number">7</span> Figures and Graphs with the ggplot and see packages</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#commands-for-ggplot-graph-types" id="toc-commands-for-ggplot-graph-types"><span class="toc-section-number">7.1</span> Commands for ggplot graph types</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#specific-commands-for-specific-types-of-analysis" id="toc-specific-commands-for-specific-types-of-analysis"><span class="toc-section-number">7.2</span> Specific Commands for Specific Types of Analysis</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#lavaan-stuff" id="toc-lavaan-stuff"><span class="toc-section-number">7.2.1</span> lavaan stuff</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#bayes-stuff" id="toc-bayes-stuff"><span class="toc-section-number">7.2.2</span> Bayes stuff</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#histograms-and-density-curves" id="toc-histograms-and-density-curves"><span class="toc-section-number">7.2.3</span> Histograms and density curves</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#highlight-specific-points" id="toc-highlight-specific-points"><span class="toc-section-number">7.3</span> Highlight specific points</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-labels-to-data-points" id="toc-add-labels-to-data-points"><span class="toc-section-number">7.4</span> Add labels to data points</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#plotting-multiple-graphs-at-once" id="toc-plotting-multiple-graphs-at-once"><span class="toc-section-number">7.5</span> Plotting multiple graphs at once</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#change-the-colors-bars-columns-dots-etc." id="toc-change-the-colors-bars-columns-dots-etc."><span class="toc-section-number">7.6</span> Change the colors (bars; columns; dots; etc.)</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#fine-tuning-colors" id="toc-fine-tuning-colors"><span class="toc-section-number">7.6.1</span> Fine-tuning colors</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#more-options-with-the-see-package" id="toc-more-options-with-the-see-package"><span class="toc-section-number">7.6.2</span> More options with the see package</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#other-aesthetic-mappings" id="toc-other-aesthetic-mappings"><span class="toc-section-number">7.7</span> Other aesthetic mappings</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#adding-and-customizing-text" id="toc-adding-and-customizing-text"><span class="toc-section-number">7.8</span> Adding and Customizing Text</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-title-axis-labels-and-captions" id="toc-add-a-title-axis-labels-and-captions"><span class="toc-section-number">7.8.1</span> Add a title, axis labels, and captions</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#center-graph-title" id="toc-center-graph-title"><span class="toc-section-number">7.8.2</span> Center graph title</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#use-different-fonts" id="toc-use-different-fonts"><span class="toc-section-number">7.8.3</span> Use different fonts</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#remove-gridlines" id="toc-remove-gridlines"><span class="toc-section-number">7.9</span> Remove gridlines</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#faceting" id="toc-faceting"><span class="toc-section-number">7.10</span> Faceting</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#log-transformations" id="toc-log-transformations"><span class="toc-section-number">7.11</span> Log transformations</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#changing-the-scale-of-the-axis" id="toc-changing-the-scale-of-the-axis"><span class="toc-section-number">7.12</span> Changing the scale of the axis</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-regression-line" id="toc-add-a-regression-line"><span class="toc-section-number">7.13</span> Add a regression line</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#save-a-graph-or-figure" id="toc-save-a-graph-or-figure"><span class="toc-section-number">7.14</span> Save a graph or figure</a></li>
</ul></li>
<li><a href="making-tables-with-flextable.html#making-tables-with-flextable" id="toc-making-tables-with-flextable"><span class="toc-section-number">8</span> Making Tables with flextable</a>
<ul>
<li><a href="making-tables-with-flextable.html#apa-table-components" id="toc-apa-table-components"><span class="toc-section-number">8.1</span> APA Table Components</a></li>
<li><a href="making-tables-with-flextable.html#indent-values" id="toc-indent-values"><span class="toc-section-number">8.2</span> Indent values</a></li>
<li><a href="making-tables-with-flextable.html#add-a-horizontal-border-aka-horizontal-spanner" id="toc-add-a-horizontal-border-aka-horizontal-spanner"><span class="toc-section-number">8.3</span> Add a Horizontal border (AKA horizontal “spanner”)</a></li>
<li><a href="making-tables-with-flextable.html#change-font-and-font-size" id="toc-change-font-and-font-size"><span class="toc-section-number">8.4</span> Change font and font size</a></li>
<li><a href="making-tables-with-flextable.html#grouped-table" id="toc-grouped-table"><span class="toc-section-number">8.5</span> Grouped table</a></li>
<li><a href="making-tables-with-flextable.html#adjust-line-spacing" id="toc-adjust-line-spacing"><span class="toc-section-number">8.6</span> Adjust line spacing</a></li>
<li><a href="making-tables-with-flextable.html#set-global-options-for-all-flextables" id="toc-set-global-options-for-all-flextables"><span class="toc-section-number">8.7</span> Set global options for all flextables</a></li>
<li><a href="making-tables-with-flextable.html#complete-example" id="toc-complete-example"><span class="toc-section-number">8.8</span> Complete Example</a></li>
<li><a href="making-tables-with-flextable.html#wraper-function-to-create-apa-style-tables" id="toc-wraper-function-to-create-apa-style-tables"><span class="toc-section-number">8.9</span> Wraper-function to create APA-style tables</a></li>
</ul></li>
<li><a href="misc.-stuff.html#misc.-stuff" id="toc-misc.-stuff"><span class="toc-section-number">9</span> Misc. Stuff</a>
<ul>
<li><a href="misc.-stuff.html#scrape-web-pages-for-data-tables" id="toc-scrape-web-pages-for-data-tables"><span class="toc-section-number">9.1</span> Scrape web pages for data tables</a></li>
<li><a href="misc.-stuff.html#read-spss-files-into-r" id="toc-read-spss-files-into-r"><span class="toc-section-number">9.2</span> Read SPSS files into R</a></li>
<li><a href="misc.-stuff.html#turn-numbers-into-percentages" id="toc-turn-numbers-into-percentages"><span class="toc-section-number">9.3</span> Turn numbers into percentages</a></li>
<li><a href="misc.-stuff.html#find-all-possible-combindations-of-items-in-a-vector" id="toc-find-all-possible-combindations-of-items-in-a-vector"><span class="toc-section-number">9.4</span> Find all possible combindations of items in a vector</a></li>
<li><a href="misc.-stuff.html#download-files-from-the-internet" id="toc-download-files-from-the-internet"><span class="toc-section-number">9.5</span> Download files from the internet</a></li>
<li><a href="misc.-stuff.html#print-multiple-things-in-one-statement" id="toc-print-multiple-things-in-one-statement"><span class="toc-section-number">9.6</span> Print multiple things in one statement</a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#intermediate-r-functions-loops-and-iterative-programming" id="toc-intermediate-r-functions-loops-and-iterative-programming"><span class="toc-section-number">10</span> Intermediate R: Functions, Loops, and Iterative Programming</a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#functions" id="toc-functions"><span class="toc-section-number">10.1</span> Functions</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#for-loops" id="toc-for-loops"><span class="toc-section-number">10.2</span> For-loops</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#purrr-and-iterative-functions" id="toc-purrr-and-iterative-functions"><span class="toc-section-number">10.3</span> purrr and Iterative Functions</a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#reproducible-example-scraping-web-data" id="toc-reproducible-example-scraping-web-data"><span class="toc-section-number">10.3.1</span> Reproducible example: Scraping web data</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#non-reproducible-example-juvenile-life-without-parole-study" id="toc-non-reproducible-example-juvenile-life-without-parole-study"><span class="toc-section-number">10.3.2</span> Non-reproducible example (Juvenile Life Without Parole study)</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#example-3-readimport-several-files-at-once-with-map" id="toc-example-3-readimport-several-files-at-once-with-map"><span class="toc-section-number">10.3.3</span> Example 3: Read/Import several files at once with <code>map()</code></a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#other-purrr-commands" id="toc-other-purrr-commands"><span class="toc-section-number">10.4</span> Other purrr commands</a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#walk-and-walk2" id="toc-walk-and-walk2"><span class="toc-section-number">10.4.1</span> <code>walk</code> and <code>walk2</code></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#map2" id="toc-map2"><span class="toc-section-number">10.4.2</span> <code>map2</code></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#pmap-for-when-you-have-a-bunch-of-shit" id="toc-pmap-for-when-you-have-a-bunch-of-shit"><span class="toc-section-number">10.4.3</span> <code>pmap</code> for when you have a bunch of shit</a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#using-purrr-to-manage-many-models" id="toc-using-purrr-to-manage-many-models"><span class="toc-section-number">10.5</span> Using purrr to manage many models</a></li>
</ul></li>
<li><a href="intro-to-r-markdown.html#intro-to-r-markdown" id="toc-intro-to-r-markdown"><span class="toc-section-number">11</span> Intro to R Markdown</a>
<ul>
<li><a href="intro-to-r-markdown.html#important-code-chunk-options" id="toc-important-code-chunk-options"><span class="toc-section-number">11.1</span> Important code chunk options</a></li>
<li><a href="intro-to-r-markdown.html#writing-math-equations-and-symbols" id="toc-writing-math-equations-and-symbols"><span class="toc-section-number">11.2</span> Writing math equations and symbols</a>
<ul>
<li><a href="intro-to-r-markdown.html#greek-symbols" id="toc-greek-symbols"><span class="toc-section-number">11.2.1</span> Greek symbols</a></li>
<li><a href="intro-to-r-markdown.html#math-notation" id="toc-math-notation"><span class="toc-section-number">11.2.2</span> Math notation</a></li>
<li><a href="intro-to-r-markdown.html#statistics-notation" id="toc-statistics-notation"><span class="toc-section-number">11.2.3</span> Statistics notation</a></li>
<li><a href="intro-to-r-markdown.html#writing-in-line-code" id="toc-writing-in-line-code"><span class="toc-section-number">11.2.4</span> Writing in-line code</a></li>
</ul></li>
<li><a href="intro-to-r-markdown.html#including-graphicsinserting-pictures" id="toc-including-graphicsinserting-pictures"><span class="toc-section-number">11.3</span> Including graphics/inserting pictures</a></li>
<li><a href="intro-to-r-markdown.html#footnotes" id="toc-footnotes"><span class="toc-section-number">11.4</span> Footnotes</a></li>
<li><a href="intro-to-r-markdown.html#change-the-color-of-your-text" id="toc-change-the-color-of-your-text"><span class="toc-section-number">11.5</span> Change the color of your text</a></li>
<li><a href="intro-to-r-markdown.html#re-using-code-chunk-options" id="toc-re-using-code-chunk-options"><span class="toc-section-number">11.6</span> Re-using code chunk options</a></li>
<li><a href="intro-to-r-markdown.html#making-better-tables" id="toc-making-better-tables"><span class="toc-section-number">11.7</span> Making better tables</a></li>
<li><a href="intro-to-r-markdown.html#running-in-line-code" id="toc-running-in-line-code"><span class="toc-section-number">11.8</span> Running in-line code</a></li>
</ul></li>
<li><a href="statistics--and-psych-specific-stuff.html#statistics--and-psych-specific-stuff" id="toc-statistics--and-psych-specific-stuff"><span class="toc-section-number">12</span> Statistics- and Psych-specific Stuff</a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#create-or-sample-from-a-distribution" id="toc-create-or-sample-from-a-distribution"><span class="toc-section-number">12.1</span> Create or sample from a distribution</a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#calculating-likelihood" id="toc-calculating-likelihood"><span class="toc-section-number">12.1.1</span> Calculating Likelihood</a></li>
</ul></li>
<li><a href="statistics--and-psych-specific-stuff.html#calculating-interrater-reliability" id="toc-calculating-interrater-reliability"><span class="toc-section-number">12.2</span> Calculating Interrater reliability</a></li>
<li><a href="statistics--and-psych-specific-stuff.html#statistical-tests-and-modeling-with-easystats" id="toc-statistical-tests-and-modeling-with-easystats"><span class="toc-section-number">12.3</span> Statistical tests and modeling with <code>easystats</code></a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#getting-parameter-estimates-from-model-objects" id="toc-getting-parameter-estimates-from-model-objects"><span class="toc-section-number">12.3.1</span> Getting parameter estimates from model objects</a></li>
<li><a href="statistics--and-psych-specific-stuff.html#getting-model-information-and-performance-metrics" id="toc-getting-model-information-and-performance-metrics"><span class="toc-section-number">12.3.2</span> Getting model information and performance metrics</a></li>
<li><a href="statistics--and-psych-specific-stuff.html#effect-size-info-with-effectsize" id="toc-effect-size-info-with-effectsize"><span class="toc-section-number">12.3.3</span> Effect size info with <code>effectsize</code></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#quick-detailed-and-automated-reporting-with-report" id="toc-quick-detailed-and-automated-reporting-with-report"><span class="toc-section-number">12.3.4</span> Quick, detailed, and automated reporting with <code>report</code></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#running-correlations-with-correlation" id="toc-running-correlations-with-correlation"><span class="toc-section-number">12.3.5</span> Running correlations with <code>correlation</code></a></li>
</ul></li>
</ul></li>
<li><a href="advanced-coding-tips.html#advanced-coding-tips" id="toc-advanced-coding-tips"><span class="toc-section-number">13</span> Advanced Coding Tips</a>
<ul>
<li><a href="advanced-coding-tips.html#grammar-and-syntax" id="toc-grammar-and-syntax"><span class="toc-section-number">13.1</span> Grammar and Syntax</a>
<ul>
<li><a href="advanced-coding-tips.html#regex-expressions-and-symbols" id="toc-regex-expressions-and-symbols"><span class="toc-section-number">13.1.1</span> Regex expressions and symbols</a></li>
<li><a href="advanced-coding-tips.html#the-colon-equals-operator" id="toc-the-colon-equals-operator"><span class="toc-section-number">13.1.2</span> The colon-equals (<code>:=</code>) operator</a></li>
<li><a href="advanced-coding-tips.html#user-supplied-expressions-or-named-columns-in-functions" id="toc-user-supplied-expressions-or-named-columns-in-functions"><span class="toc-section-number">13.1.3</span> User-supplied expressions or named columns in functions</a></li>
<li><a href="advanced-coding-tips.html#when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time" id="toc-when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time"><span class="toc-section-number">13.1.4</span> When a command requires a named column or data set, but you’ve already supplied it and it’s required a second time</a></li>
</ul></li>
<li><a href="advanced-coding-tips.html#creating-a-package" id="toc-creating-a-package"><span class="toc-section-number">13.2</span> Creating a package</a>
<ul>
<li><a href="advanced-coding-tips.html#documenting-package-meta-data" id="toc-documenting-package-meta-data"><span class="toc-section-number">13.2.1</span> Documenting package meta-data</a></li>
<li><a href="advanced-coding-tips.html#connecting-to-other-packages" id="toc-connecting-to-other-packages"><span class="toc-section-number">13.2.2</span> Connecting to other packages</a></li>
<li><a href="advanced-coding-tips.html#linking-git-and-github" id="toc-linking-git-and-github"><span class="toc-section-number">13.2.3</span> Linking Git and Github</a></li>
</ul></li>
<li><a href="advanced-coding-tips.html#creating-a-bookdown" id="toc-creating-a-bookdown"><span class="toc-section-number">13.3</span> Creating a bookdown</a>
<ul>
<li><a href="advanced-coding-tips.html#rendering-the-book-once-its-done" id="toc-rendering-the-book-once-its-done"><span class="toc-section-number">13.3.1</span> Rendering the book once it’s done</a></li>
</ul></li>
</ul></li>
<li><a href="creating-a-simulated-data-set.html#creating-a-simulated-data-set" id="toc-creating-a-simulated-data-set"><span class="toc-section-number">14</span> Creating a simulated data set</a>
<ul>
<li><a href="creating-a-simulated-data-set.html#part-1-independent-samples-from-a-normal-distribution" id="toc-part-1-independent-samples-from-a-normal-distribution"><span class="toc-section-number">14.1</span> Part 1: Independent samples from a normal distribution</a></li>
<li><a href="creating-a-simulated-data-set.html#part-2-creating-data-sets-with-quantitative-and-categorical-variables" id="toc-part-2-creating-data-sets-with-quantitative-and-categorical-variables"><span class="toc-section-number">14.2</span> Part 2: Creating data sets with quantitative and categorical variables</a>
<ul>
<li><a href="creating-a-simulated-data-set.html#a.-data-with-no-difference-among-groups" id="toc-a.-data-with-no-difference-among-groups"><span class="toc-section-number">14.2.1</span> 2.a. DATA WITH <strong>NO DIFFERENCE</strong> AMONG GROUPS</a></li>
<li><a href="creating-a-simulated-data-set.html#b.-data-with-a-difference-among-groups" id="toc-b.-data-with-a-difference-among-groups"><span class="toc-section-number">14.2.2</span> 2.b. Data <strong>WITH A DIFFERENCE</strong> among groups</a></li>
<li><a href="creating-a-simulated-data-set.html#c.-data-with-multiple-quantitative-variables-with-groups" id="toc-c.-data-with-multiple-quantitative-variables-with-groups"><span class="toc-section-number">14.2.3</span> 2.c. Data with <strong>MULTIPLE QUANTITATIVE VARIABLES</strong> with groups</a></li>
</ul></li>
<li><a href="creating-a-simulated-data-set.html#part-3-repeatedly-simulate-samples-with-replicate" id="toc-part-3-repeatedly-simulate-samples-with-replicate"><span class="toc-section-number">14.3</span> Part 3: Repeatedly simulate samples with replicate()</a></li>
<li><a href="creating-a-simulated-data-set.html#part-4-repeatedly-making-whole-data-sets" id="toc-part-4-repeatedly-making-whole-data-sets"><span class="toc-section-number">14.4</span> Part 4: repeatedly making whole data sets</a></li>
<li><a href="creating-a-simulated-data-set.html#part-5-using-purrr" id="toc-part-5-using-purrr"><span class="toc-section-number">14.5</span> Part 5: Using purrr</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating a simulated data set</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intermediate-r-functions-loops-and-iterative-programming" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> Intermediate R: Functions, Loops, and Iterative Programming<a href="intermediate-r-functions-loops-and-iterative-programming.html#intermediate-r-functions-loops-and-iterative-programming" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="functions" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Functions<a href="intermediate-r-functions-loops-and-iterative-programming.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A function is a command that performs a specified operation and returns an output in accordance with that operation. You can literally make a function to do anything you want.</p>
<p><em>General structure of a basic function:</em></p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example structure</span></span>
<span id="cb202-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-3" aria-hidden="true" tabindex="-1"></a>Function_name<span class="ot">=</span><span class="cf">function</span>(argument){</span>
<span id="cb202-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-4" aria-hidden="true" tabindex="-1"></a>  Expressions</span>
<span id="cb202-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(output)</span>
<span id="cb202-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb202-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li><em>Argument</em> is your input. It is the thing you want to perform the operation on.</li>
<li><em>Expressions</em> is the actual operation (or operations) you want to perform on the supplied argument</li>
<li><em>return</em> tells R to return the result of the Expression to you when done.</li>
</ul>
<p>This example function takes an input of numbers in the form of a vector and subtracts two from each.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-1" aria-hidden="true" tabindex="-1"></a>numbers<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">80</span>)</span>
<span id="cb203-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-3" aria-hidden="true" tabindex="-1"></a>sub_2<span class="ot">=</span><span class="cf">function</span>(x){</span>
<span id="cb203-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-4" aria-hidden="true" tabindex="-1"></a>  result<span class="ot">=</span> x <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb203-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb203-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb203-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb203-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(numbers)</span></code></pre></div>
<pre><code>## [1]  0  8 10 78</code></pre>
<p>We can also supply the function with a single number and it still works…</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sub_2</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 98</code></pre>
<p><strong><em>Well this looks useful. So what’s the bigger picture?</em></strong></p>
<p>One of the primary advantages of functions are that they can reduce a long and complex process, or a process that involves many steps, into a <em>single line of code</em>; thus, creating your own functions is a fast way to make your life easier down the line either at some point in the far future or even in just a few minutes, if you know you will be writing the code for some process two or more times.</p>
<p>Take this script for instance. You can see from the circled parts that I needed to transform three different data sets in a similar way:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb207-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;repeat_process.jpg&quot;</span>))</span></code></pre></div>
<p><img src="pics/repeat_process.jpg" width="413" /></p>
<p>Yes, I could have just done a copy-paste of the original code and tweak it slightly each time…. But that is time consuming, produces a sloppier and longer script, and introduces a lot more room for error because of the repeated code and extra steps.</p>
<p>Better to write a single function that could be applied to all three….</p>
<p><strong><em>In short, use functions to reduce a multi-step process or a process that you’re implementing &gt;=2 times in a single script into one command. This saves you space and makes the script shorter; it saves you the trouble and effort of re-writing or adapting code from earlier sections; and importantly, reduces the chances of you making a coding error by proxy of the former two.</em></strong></p>
<p>As a quick example, I was able to replace each of the circled paragraphs of code above with a custom function that ran everything in one simple line. Now instead of 3 whole (and redundant) paragraphs, I now have 3 short lines, like so….</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-1" aria-hidden="true" tabindex="-1"></a>na_zero_helpreint<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint,</span>
<span id="cb208-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">variable_prefix =</span> <span class="st">&quot;reintegrate_&quot;</span>)</span>
<span id="cb208-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span>
<span id="cb208-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb208-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span><span class="fu">rotate_data</span>(<span class="at">data =</span> na_zero_helpreint, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier_&quot;</span>)</span></code></pre></div>
<p><strong>Limitations to your average, everyday functions.</strong> While reducing a whole <em>process or sequence</em> of commands is extremely useful, it still leaves a limitation. For instance, while we avoided copying and pasting whole paragraphs or processes, I still had to copy-paste the same function three times. <em>This still leaves chances for error on the table, and it still leaves us with wasted lines that make the script longer.</em></p>
<p>In general, when you want to perform some function or process <strong>multiple times on multiple items (as above where the same command is used three times on three different data frames)</strong>, you need to use a for-loop or iterating function. These can reduce further unwanted redundancies by applying the function or process iteratively. Read on for more info.</p>
</div>
<div id="for-loops" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> For-loops<a href="intermediate-r-functions-loops-and-iterative-programming.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A for loop is essentially a function that applies a function or given set of operations to multiple things at once, and returns an output of many items.</p>
<p>For example, this code finds the means of every vector/column in a dataset by repeatedly applying the same code over and over to element “i” in the given list:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb209-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb209-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb209-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb209-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb209-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb209-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-8" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">ncol</span>(df))  <span class="co"># 1.Output. Create the object you want the results of the loop stored in.</span></span>
<span id="cb209-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {            <span class="co"># 2.Sequence of operations. &quot;For each item &#39;i&#39; along data frame…&quot;</span></span>
<span id="cb209-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-11" aria-hidden="true" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])      <span class="co"># 3.Body:&quot;every individual item in &#39;output&#39; = the median of each col in df</span></span>
<span id="cb209-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb209-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb209-14" aria-hidden="true" tabindex="-1"></a>output</span></code></pre></div>
<pre><code>## [1]  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>Check out <a href="https://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments">this book chapter</a> for a great and detailed explanation of for-loops and functional coding.</p>
<p>Although for loops are nice, they are unwieldy. R programmers typically use iterating functions instead. Examples of iterating functions are the <code>lapply</code>, <code>vapply</code>, <code>sapply</code>, etc. family of base R commands. But these can also be confusing and the commands are not great.</p>
<p>The purrr package offers a better way to do iterating functions over base R; it’s the tidyverse way to make efficient and understandable for loops! <strong>If you have a need for a for-loop for something, see the next section instead on how to use purrr to make an iterative function. Important to understand conceptually what a for-loop is, but using them is impractical when you have purrr</strong></p>
</div>
<div id="purrr-and-iterative-functions" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> purrr and Iterative Functions<a href="intermediate-r-functions-loops-and-iterative-programming.html#purrr-and-iterative-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>All notes here come from Charlotte Wickham’s lecture tutorial below</em></p>
<ul>
<li>Part 1: <a href="https://www.youtube.com/watch?v=7UlWJWfZO9M" class="uri">https://www.youtube.com/watch?v=7UlWJWfZO9M</a></li>
<li>Part 2: <a href="https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s" class="uri">https://www.youtube.com/watch?v=b0ozKTUho0A&amp;t=1210s</a></li>
</ul>
<p>purrr’s <code>map()</code> series of functions offer a way to apply any existing function (even functions you’ve made) to multiple things at once, be it lists, data frame columns, individual items in vector, etc. In short, they are for doing the same type of task repeatedly in a very quick and efficient manner. They work in much the same way as for-loops, but are far simpler to write, and can be applied in the same way to solve the same problems.</p>
<p><strong><em>How to use purrr</em></strong></p>
<p>The structure of <code>map()</code> commands is the same as the others in the tidyverse:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co">#option 1</span></span>
<span id="cb211-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(data, <span class="cf">function</span>)</span>
<span id="cb211-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co"># option 2</span></span>
<span id="cb211-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb211-5" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="cf">function</span>)</span></code></pre></div>
<p>As a quick example and to highlight why purrr is so much more efficient and easier to use than for-loops, look at the same example from before, now using <code>map()</code> instead of a <code>for</code>:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb212-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">map_dbl</span>(median)</span></code></pre></div>
<pre><code>##          a          b          c          d 
##  0.3771802 -0.5176346  0.4171879  0.5704655</code></pre>
<p>A single line is all it took to get the same results! And, it follows tidyverse grammar structure.</p>
<p>Now lets get into how it works….</p>
<p><em>map() commands work like this:</em> For each element of x, do f.</p>
<p>So if you pass it object <code>x</code> and object <code>x</code> is…. - A vector, it will perform function f on every item in the vector - A data frame, it will perform function f on every <em>column</em> in the data frame - A list, it will perform function f on every <em>level in the list</em></p>
<p>Etc., etc.; the point is it applies a function repeatedly to every element in the object you supply it with.</p>
<p>So lets walk through a case example.</p>
<div id="reproducible-example-scraping-web-data" class="section level3 hasAnchor" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Reproducible example: Scraping web data<a href="intermediate-r-functions-loops-and-iterative-programming.html#reproducible-example-scraping-web-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is an example walk through showing how we can use <code>purrr</code> to speed things up dramatically and/or reduce the use of unwanted, extra code in our scripts. In this guide I’ll be building a table of LPGA Tour statistics from multiple webpages.</p>
<p>The workflow for purrr goes like this:</p>
<p>First, you want to figure out how to do each step of your process line-by-line, for a single item. The idea is to try and walk through each step of the process and see exactly what will need to be done each each step and what the code will like, before trying to code it all at once at a higher level.</p>
<p>Once you have each step for the first item figured out, then you make functions for each step that condense that code down to one command.</p>
<p>Lastly, apply each function from your individual steps to all items in your list by using <code>purr::map()</code>.</p>
<p><strong><em>Do for One</em></strong></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb214-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 1</span></span>
<span id="cb214-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure out a line-by-line process for one item/one single web page</span></span>
<span id="cb214-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-5" aria-hidden="true" tabindex="-1"></a>html1<span class="ot">=</span><span class="fu">read_html</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb214-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb214-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb214-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb214-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-9" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb214-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb214-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(html1)</span></code></pre></div>
<pre><code>##   rank               name distance
## 1    1        Maria Fassi  279.255
## 2    2 Bianca Pagdanganan  277.052
## 3    3          Yuka Saso  275.614
## 4    4    Brooke Matthews  275.279
## 5    5          A Lim Kim  274.741
## 6    6     Emily Pedersen  274.669</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># STEP 2</span></span>
<span id="cb216-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create a custom function of the above to shorten and generalize the process</span></span>
<span id="cb216-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-3" aria-hidden="true" tabindex="-1"></a>quick_read_html<span class="ot">=</span><span class="cf">function</span>(url){</span>
<span id="cb216-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-4" aria-hidden="true" tabindex="-1"></a>  web_page<span class="ot">=</span><span class="fu">read_html</span>(url) <span class="sc">|&gt;</span> </span>
<span id="cb216-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;table.shsTable.shsBorderTable&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># fortunately this node works for all four pages so it can be baked into the function</span></span>
<span id="cb216-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb216-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb216-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-8" aria-hidden="true" tabindex="-1"></a>    janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb216-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb216-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(web_page)</span>
<span id="cb216-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb216-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-15" aria-hidden="true" tabindex="-1"></a><span class="co"># test to verify it works</span></span>
<span id="cb216-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-16" aria-hidden="true" tabindex="-1"></a>test<span class="ot">=</span><span class="fu">quick_read_html</span>(<span class="at">url=</span> <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>) </span>
<span id="cb216-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb216-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test) <span class="co"># nice </span></span></code></pre></div>
<pre><code>##   rank              name putt_average
## 1    1          Lydia Ko        1.722
## 2    2       Hyo Joo Kim        1.735
## 3    3     Danielle Kang        1.738
## 4    4      Nasa Hataoka        1.745
## 5    5 Madelene Sagstrom        1.748
## 6    6      Georgia Hall        1.751</code></pre>
<p><strong><em>DO FOR ALL.</em></strong> Now create the object that contains all the elements you want to iterate over, and then pass it to your generalized function with map.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3a</span></span>
<span id="cb218-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="co"># create an object that contains ALL elements of interest</span></span>
<span id="cb218-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-3" aria-hidden="true" tabindex="-1"></a>URLs<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=04&quot;</span>,</span>
<span id="cb218-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=08&quot;</span>,</span>
<span id="cb218-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=06&quot;</span>,</span>
<span id="cb218-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;https://scores.nbcsports.com/golf/averages.asp?tour=LPGA&amp;rank=12&quot;</span>)</span>
<span id="cb218-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4</span></span>
<span id="cb218-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-9" aria-hidden="true" tabindex="-1"></a><span class="co"># use the power of map and be amazed</span></span>
<span id="cb218-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-10" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> URLs <span class="sc">|&gt;</span> <span class="fu">map</span>(quick_read_html)</span>
<span id="cb218-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb218-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>## [[1]]
##     rank                     name distance
## 1      1              Maria Fassi  279.255
## 2      2       Bianca Pagdanganan  277.052
## 3      3                Yuka Saso  275.614
## 4      4          Brooke Matthews  275.279
## 5      5                A Lim Kim  274.741
## 6      6           Emily Pedersen  274.669
## 7      7        Madelene Sagstrom  273.399
## 8      8            Lexi Thompson  272.842
## 9      9      Maude-Aimee Leblanc  272.377
## 10    10              Nelly Korda  272.280
## 11    11     Nanna Koerstz Madsen  271.985
## 12    12            Jessica Korda  271.827
## 13    13 Pauline Roussin-Bouchard  271.775
## 14    14           Rachel Rohanna  270.774
## 15    15        Patty Tavatanakit  269.945
## 16    16          Carlota Ciganda  269.691
## 17    17             Alana Uriell  269.509
## 18    18         Atthaya Thitikul  269.005
## 19    19             Weiwei Zhang  268.636
## 20    20            Janie Jackson  268.045
## 21    21               Minjee Lee  267.715
## 22    22           Amanda Doherty  267.700
## 23    23           Cydney Clanton  267.360
## 24    24                   Yu Liu  267.199
## 25    25                Angel Yin  267.148
## 26    26         Brooke Henderson  267.079
## 27    27         Perrine Delacour  266.850
## 28    28             Charley Hull  266.445
## 29    29          Jennifer Kupcho  266.273
## 30    30              Alena Sharp  265.935
## 31    31             Georgia Hall  265.679
## 32    32               Ally Ewing  265.455
## 33    33            Sei Young Kim  265.424
## 34    34             Nasa Hataoka  265.242
## 35    35        Albane Valenzuela  265.212
## 36    36              Yealimi Noh  264.686
## 37    37               Gaby Lopez  264.419
## 38    38                 Lilia Vu  264.006
## 39    39            Frida Kinhult  263.857
## 40    40              Hyejin Choi  263.734
## 41    41            Ryann O&#39;Toole  263.613
## 42    42             Hannah Green  263.506
## 43    43            Celine Herbin  263.327
## 44    44               Ruixin Liu  263.017
## 45    45         Stephanie Meadow  263.007
## 46    46          Daniela Darquea  263.000
## 47    47   Katherine Perry-Hamski  262.543
## 48    48           Sung Hyun Park  262.396
## 49    49               Alison Lee  262.273
## 50    50                 Xiyu Lin  262.250
## 51    51         Savannah Vilaubi  261.867
## 52    52               Dewi Weber  261.824
## 53    53     Pajaree Anannarukarn  261.638
## 54    54             Peiyun Chien  261.546
## 55    55           Gerina Mendoza  261.511
## 56    56    Fatima Fernandez Cano  261.406
## 57    57           Haylee Harford  261.155
## 58    58                 Amy Yang  261.154
## 59    59          Sarah Schmelzel  260.633
## 60    60                Amy Olson  259.643
## 61    61       Jodi Ewart Shadoff  258.975
## 62    62          Lauren Hartlage  258.975
## 63    63             Lindy Duncan  258.962
## 64    64          Lauren Coughlin  258.862
## 65    65       Brittany Lincicome  258.719
## 66    66         Ariya Jutanugarn  258.675
## 67    67                 Mel Reid  258.521
## 68    68          Giulia Molinaro  258.509
## 69    69           Katherine Kirk  258.489
## 70    70         Jaye Marie Green  258.417
## 71    71          Sophia Schubert  258.403
## 72    72              Ruoning Yin  258.279
## 73    73               Eun-Hee Ji  258.129
## 74    74               Annie Park  258.117
## 75    75       Stephanie Kyriacou  258.115
## 76    76                  Min Lee  257.983
## 77    77        Lauren Stephenson  257.947
## 78    78            Jeong Eun Lee  257.747
## 79    79           Hinako Shibuno  257.648
## 80    80                 Gina Kim  257.613
## 81    81          Elizabeth Nagel  257.520
## 82    82             Mi Hyang Lee  257.506
## 83    83          Matilda Castren  257.467
## 84    84                Isi Gabsa  257.085
## 85    85               Paula Reto  256.840
## 86    86             Sophia Popov  256.762
## 87    87           Sanna Nuutinen  256.574
## 88    88         Elizabeth Szokol  255.967
## 89    89            Brittany Lang  255.885
## 90    90          Angela Stanford  255.857
## 91    91              Megan Khang  255.679
## 92    92           Karis Davidson  255.359
## 93    93                 Lydia Ko  255.343
## 94    94              Hyo Joo Kim  255.325
## 95    95          Casey Danielson  255.064
## 96    96                Ana Belac  255.020
## 97    97             Tiffany Chan  254.689
## 98    98            Agathe Laisne  254.659
## 99    99               Jenny Shin  254.644
## 100  100               Robynn Ree  254.513
## 101  102        Pernilla Lindberg  254.091
## 102  103         Esther Henseleit  254.080
## 103  104           Celine Boutier  254.000
## 104  105                Na Rin An  253.696
## 105  106            Jenny Coleman  253.656
## 106  107              Yu-Sang Hou  253.643
## 107  108            Jennifer Song  253.579
## 108  109         Linnea Johansson  253.509
## 109  110           Jennifer Chang  253.375
## 110  111             Wei-Ling Hsu  253.229
## 111  112           Allisen Corpuz  252.925
## 112  113        Pornanong Phatlum  252.874
## 113  114         Wichanee Meechai  252.580
## 114  115                Kelly Tan  252.446
## 115  116             Kaitlyn Papp  252.365
## 116  117               Sarah Kemp  252.222
## 117  118          Morgane Metraux  252.139
## 118  119           Ashleigh Buhai  251.692
## 119  120                  Muni He  251.633
## 120  121            Danielle Kang  251.172
## 121  122               Bronte Law  250.623
## 122  123        Moriya Jutanugarn  250.589
## 123  124            Leona Maguire  250.306
## 124  125              Marina Alex  250.259
## 125  126               Lauren Kim  250.139
## 126  127           Gemma Dryburgh  249.841
## 127  128         Sarah Jane Smith  249.389
## 128  129             Jin Young Ko  249.282
## 129  130              In Gee Chun  249.077
## 130  131             Cristie Kerr  248.966
## 131  132              So Yeon Ryu  248.712
## 132  133              Ayaka Furue  248.645
## 133  134            Christina Kim  248.489
## 134  135            Maddie Szeryk  248.324
## 135  136            Allison Emrey  247.010
## 136  137               Su-Hyun Oh  246.942
## 137  138      Jasmine Suwannapura  246.813
## 138  139              Emma Talley  246.571
## 139  140          Caroline Masson  246.448
## 140  141        Mariah Stackhouse  246.425
## 141  142           Anna Nordqvist  246.409
## 142  143              Chella Choi  246.323
## 143  144                Mirim Lee  246.269
## 144  145             Mina Harigae  245.803
## 145  146        Brittany Altomare  245.701
## 146  147          Cheyenne Knight  245.276
## 147  148          Caroline Inglis  245.109
## 148  149               Haeji Kang  245.081
## 149  150             Na Yeon Choi  243.988
## 150  151               Brianna Do  243.839
## 151  152           Lindsey Weaver  243.211
## 152  153               Inbee Park  242.287
## 153  154             In-Kyung Kim  242.244
## 154  155              Stacy Lewis  241.671
## 155  156               Andrea Lee  241.328
## 156  157            Marissa Steen  240.720
## 157  158            Lizette Salas  240.642
## 158  159         Charlotte Thomas  238.644
## 159  160               Vivian Hou  238.543
## 160  161             Yae Eun Hong  238.306
## 161  162         Dana Finkelstein  235.241
## 162  163              Aditi Ashok  235.105
## 
## [[2]]
##     rank                     name putt_average
## 1      1                 Lydia Ko        1.722
## 2      2              Hyo Joo Kim        1.735
## 3      3            Danielle Kang        1.738
## 4      4             Nasa Hataoka        1.745
## 5      5        Madelene Sagstrom        1.748
## 6      6             Georgia Hall        1.751
## 7      7                Yuka Saso        1.752
## 8      8           Celine Boutier        1.753
## 9      9                 Lilia Vu        1.757
## 10    10                 Xiyu Lin        1.759
## 11    11            Leona Maguire        1.759
## 12    12               Andrea Lee        1.760
## 13    13       Stephanie Kyriacou        1.761
## 14    14            Jeong Eun Lee        1.761
## 15    15           Karis Davidson        1.764
## 16    16          Carlota Ciganda        1.765
## 17    17              Nelly Korda        1.766
## 18    18           Amanda Doherty        1.766
## 19    19         Brooke Henderson        1.767
## 20    20             Hannah Green        1.768
## 21    21            Jessica Korda        1.770
## 22    22         Atthaya Thitikul        1.771
## 23    23              Ruoning Yin        1.772
## 24    24                 Amy Yang        1.772
## 25    25              Hyejin Choi        1.775
## 26    26             Charley Hull        1.777
## 27    27              Ayaka Furue        1.778
## 28    28               Gaby Lopez        1.780
## 29    29        Patty Tavatanakit        1.781
## 30    30          Cheyenne Knight        1.783
## 31    31               Su-Hyun Oh        1.784
## 32    32             Kaitlyn Papp        1.785
## 33    33               Minjee Lee        1.786
## 34    34             Jin Young Ko        1.787
## 35    35         Sarah Jane Smith        1.787
## 36    36            Sei Young Kim        1.788
## 37    37              Megan Khang        1.788
## 38    38                Angel Yin        1.789
## 39    39              Chella Choi        1.789
## 40    40            Frida Kinhult        1.790
## 41    41               Eun-Hee Ji        1.791
## 42    42             Yae Eun Hong        1.793
## 43    43               Paula Reto        1.793
## 44    44            Ryann O&#39;Toole        1.793
## 45    45 Pauline Roussin-Bouchard        1.793
## 46    46                A Lim Kim        1.794
## 47    47     Nanna Koerstz Madsen        1.794
## 48    48             Cristie Kerr        1.795
## 49    49           Gemma Dryburgh        1.795
## 50    50            Lexi Thompson        1.795
## 51    51                Na Rin An        1.796
## 52    52               Inbee Park        1.797
## 53    53               Alison Lee        1.798
## 54    54                   Yu Liu        1.798
## 55    55        Lauren Stephenson        1.799
## 56    56                Isi Gabsa        1.799
## 57    57              So Yeon Ryu        1.800
## 58    58              Alena Sharp        1.801
## 59    59             Mina Harigae        1.801
## 60    60              In Gee Chun        1.801
## 61    61          Morgane Metraux        1.802
## 62    62           Allisen Corpuz        1.802
## 63    63      Jasmine Suwannapura        1.803
## 64    64               Haeji Kang        1.804
## 65    65           Ashleigh Buhai        1.804
## 66    66     Pajaree Anannarukarn        1.804
## 67    67         Perrine Delacour        1.805
## 68    68      Maude-Aimee Leblanc        1.805
## 69    69          Sarah Schmelzel        1.806
## 70    70        Brittany Altomare        1.807
## 71    71              Aditi Ashok        1.808
## 72    72            Lizette Salas        1.808
## 73    73           Jennifer Chang        1.808
## 74    74          Caroline Inglis        1.808
## 75    75        Moriya Jutanugarn        1.808
## 76    76               Jenny Shin        1.809
## 77    77         Ariya Jutanugarn        1.809
## 78    78              Stacy Lewis        1.810
## 79    79                Kelly Tan        1.811
## 80    80              Marina Alex        1.812
## 81    81             Weiwei Zhang        1.813
## 82    82          Jennifer Kupcho        1.813
## 83    83              Emma Talley        1.814
## 84    84         Elizabeth Szokol        1.814
## 85    85         Linnea Johansson        1.814
## 86    86            Allison Emrey        1.814
## 87    87           Sung Hyun Park        1.814
## 88    88         Esther Henseleit        1.815
## 89    89           Hinako Shibuno        1.816
## 90    90             Tiffany Chan        1.816
## 91    91       Jodi Ewart Shadoff        1.816
## 92    92           Katherine Kirk        1.818
## 93    93        Pernilla Lindberg        1.818
## 94    94             Alana Uriell        1.819
## 95    95           Lindsey Weaver        1.819
## 96    96   Katherine Perry-Hamski        1.822
## 97    97          Caroline Masson        1.823
## 98    98        Albane Valenzuela        1.823
## 99    99             Mi Hyang Lee        1.823
## 100  100            Janie Jackson        1.824
## 101  101             Sophia Popov        1.824
## 102  102         Wichanee Meechai        1.824
## 103  103         Stephanie Meadow        1.825
## 104  104                  Min Lee        1.827
## 105  105          Matilda Castren        1.827
## 106  106           Sanna Nuutinen        1.827
## 107  107               Annie Park        1.827
## 108  108               Ruixin Liu        1.828
## 109  109              Yu-Sang Hou        1.832
## 110  110              Maria Fassi        1.834
## 111  111        Pornanong Phatlum        1.835
## 112  112                Amy Olson        1.836
## 113  113           Anna Nordqvist        1.836
## 114  114             Lindy Duncan        1.837
## 115  115         Charlotte Thomas        1.837
## 116  116             Wei-Ling Hsu        1.838
## 117  117            Maddie Szeryk        1.838
## 118  118               Sarah Kemp        1.838
## 119  119             In-Kyung Kim        1.838
## 120  120          Angela Stanford        1.839
## 121  121          Sophia Schubert        1.839
## 122  122          Daniela Darquea        1.839
## 123  123                 Gina Kim        1.839
## 124  124              Yealimi Noh        1.840
## 125  125                Ana Belac        1.840
## 126  126           Gerina Mendoza        1.840
## 127  127           Cydney Clanton        1.841
## 128  128           Rachel Rohanna        1.841
## 129  129               Brianna Do        1.841
## 130  130            Celine Herbin        1.841
## 131  131            Brittany Lang        1.842
## 132  132            Christina Kim        1.843
## 133  133         Dana Finkelstein        1.844
## 134  134          Elizabeth Nagel        1.844
## 135  135       Bianca Pagdanganan        1.844
## 136  136           Emily Pedersen        1.845
## 137  137          Lauren Coughlin        1.846
## 138  138                  Muni He        1.847
## 139  140             Na Yeon Choi        1.848
## 140  141            Agathe Laisne        1.850
## 141  142       Brittany Lincicome        1.851
## 142  143            Jennifer Song        1.853
## 143  144               Ally Ewing        1.854
## 144  145          Giulia Molinaro        1.854
## 145  146             Peiyun Chien        1.857
## 146  147               Dewi Weber        1.858
## 147  148               Bronte Law        1.859
## 148  149         Jaye Marie Green        1.860
## 149  150          Lauren Hartlage        1.861
## 150  151           Haylee Harford        1.862
## 151  152               Robynn Ree        1.867
## 152  153        Mariah Stackhouse        1.868
## 153  154          Brooke Matthews        1.868
## 154  155    Fatima Fernandez Cano        1.869
## 155  156            Jenny Coleman        1.870
## 156  157               Lauren Kim        1.874
## 157  158         Savannah Vilaubi        1.884
## 158  159                Mirim Lee        1.886
## 159  160          Casey Danielson        1.897
## 160  161               Vivian Hou        1.900
## 161  162                 Mel Reid        1.901
## 162  163            Marissa Steen        1.916
## 
## [[3]]
##     rank                     name greens_hit
## 1      1               Ally Ewing       77.7
## 2      2            Lexi Thompson       77.2
## 3      3       Jodi Ewart Shadoff       76.5
## 4      4              Hyejin Choi       76.5
## 5      5         Brooke Henderson       76.3
## 6      6               Minjee Lee       76.2
## 7      7                 Xiyu Lin       75.9
## 8      8              Megan Khang       75.4
## 9      9              Nelly Korda       75.4
## 10    10         Atthaya Thitikul       74.9
## 11    11           Anna Nordqvist       74.6
## 12    12                A Lim Kim       74.4
## 13    13             Hannah Green       74.3
## 14    14           Celine Boutier       73.9
## 15    15              In Gee Chun       73.6
## 16    16                 Lilia Vu       73.5
## 17    17           Emily Pedersen       73.5
## 18    18            Sei Young Kim       73.5
## 19    19          Jennifer Kupcho       73.4
## 20    20          Daniela Darquea       73.3
## 21    21          Matilda Castren       73.1
## 22    22          Lauren Coughlin       73.1
## 23    23             Peiyun Chien       73.1
## 24    24             Charley Hull       73.0
## 25    25               Andrea Lee       72.9
## 26    26                 Lydia Ko       72.9
## 27    27           Allisen Corpuz       72.8
## 28    28             Nasa Hataoka       72.6
## 29    29     Pajaree Anannarukarn       72.6
## 30    30            Jeong Eun Lee       72.6
## 31    31          Sarah Schmelzel       72.5
## 32    32              Chella Choi       72.5
## 33    33              Hyo Joo Kim       72.4
## 34    34              Ayaka Furue       72.4
## 35    35                 Amy Yang       72.4
## 36    36              Marina Alex       72.3
## 37    37            Jessica Korda       72.1
## 38    38             Lindy Duncan       72.0
## 39    39            Danielle Kang       71.9
## 40    40             Wei-Ling Hsu       71.8
## 41    41             Jin Young Ko       71.5
## 42    42          Carlota Ciganda       71.5
## 43    43         Perrine Delacour       71.3
## 44    44            Ryann O&#39;Toole       70.8
## 45    45              Yealimi Noh       70.8
## 46    46            Lizette Salas       70.8
## 47    47        Moriya Jutanugarn       70.7
## 48    48        Albane Valenzuela       70.7
## 49    49               Alison Lee       70.6
## 50   50t          Caroline Masson       70.6
## 51   50t        Lauren Stephenson       70.6
## 52    52         Elizabeth Szokol       70.6
## 53    53         Ariya Jutanugarn       70.5
## 54    54            Leona Maguire       70.4
## 55   55t          Cheyenne Knight       70.4
## 56   55t               Gaby Lopez       70.4
## 57   55t          Sophia Schubert       70.4
## 58    58     Nanna Koerstz Madsen       70.3
## 59    59          Casey Danielson       70.2
## 60    60        Madelene Sagstrom       70.1
## 61    61               Jenny Shin       70.1
## 62   62t                 Gina Kim       70.1
## 63   62t              Alena Sharp       70.1
## 64    64               Dewi Weber       70.1
## 65    65              So Yeon Ryu       70.0
## 66    66           Haylee Harford       70.0
## 67    67                Na Rin An       69.9
## 68    68        Pornanong Phatlum       69.8
## 69    69        Brittany Altomare       69.8
## 70    70                Kelly Tan       69.7
## 71    71               Sarah Kemp       69.6
## 72    72           Hinako Shibuno       69.4
## 73    73       Stephanie Kyriacou       69.4
## 74    74               Ruixin Liu       69.4
## 75    75          Caroline Inglis       69.2
## 76    76              Ruoning Yin       69.1
## 77    77             Mina Harigae       69.1
## 78    78               Inbee Park       69.0
## 79    79             Mi Hyang Lee       69.0
## 80    80               Annie Park       68.9
## 81    81           Jennifer Chang       68.9
## 82    82              Stacy Lewis       68.9
## 83    83         Esther Henseleit       68.7
## 84    84             Georgia Hall       68.7
## 85    85           Ashleigh Buhai       68.6
## 86    86               Paula Reto       68.6
## 87    87                Yuka Saso       68.6
## 88    88        Patty Tavatanakit       68.6
## 89    89                   Yu Liu       68.6
## 90    90      Maude-Aimee Leblanc       68.5
## 91    91                  Min Lee       68.4
## 92   92t      Jasmine Suwannapura       68.4
## 93   92t              Emma Talley       68.4
## 94    94           Cydney Clanton       68.3
## 95    95         Wichanee Meechai       68.3
## 96    96         Jaye Marie Green       68.2
## 97    97                Amy Olson       68.2
## 98    98               Eun-Hee Ji       68.2
## 99    99          Giulia Molinaro       68.2
## 100  100            Jenny Coleman       68.1
## 101  101              Maria Fassi       68.0
## 102  102           Lindsey Weaver       67.9
## 103  103          Morgane Metraux       67.9
## 104  104               Bronte Law       67.9
## 105  106           Sung Hyun Park       67.9
## 106  107        Pernilla Lindberg       67.8
## 107  108 Pauline Roussin-Bouchard       67.8
## 108  109            Celine Herbin       67.6
## 109  110            Frida Kinhult       67.6
## 110  111                Isi Gabsa       67.6
## 111  112               Haeji Kang       67.6
## 112  113       Brittany Lincicome       67.5
## 113  114             Weiwei Zhang       67.4
## 114  115         Stephanie Meadow       67.2
## 115  116         Dana Finkelstein       67.1
## 116  117           Gemma Dryburgh       67.1
## 117  118               Robynn Ree       67.0
## 118  119           Gerina Mendoza       66.7
## 119  120            Jennifer Song       66.6
## 120  121             Na Yeon Choi       66.1
## 121  122       Bianca Pagdanganan       66.0
## 122  123            Janie Jackson       66.0
## 123  124           Amanda Doherty       65.6
## 124  125           Sanna Nuutinen       65.6
## 125  126           Karis Davidson       65.5
## 126  127             Alana Uriell       65.3
## 127  128          Lauren Hartlage       65.1
## 128  129                  Muni He       65.1
## 129  130        Mariah Stackhouse       65.0
## 130  131               Vivian Hou       65.0
## 131  132                Angel Yin       65.0
## 132  133            Agathe Laisne       64.9
## 133  134         Charlotte Thomas       64.8
## 134  135           Rachel Rohanna       64.8
## 135  136             Sophia Popov       64.7
## 136  137                Ana Belac       64.7
## 137  138             Kaitlyn Papp       64.6
## 138  139            Christina Kim       64.3
## 139  140                 Mel Reid       64.3
## 140  141            Brittany Lang       64.1
## 141  142         Linnea Johansson       64.0
## 142  143          Elizabeth Nagel       64.0
## 143  144    Fatima Fernandez Cano       63.5
## 144  145               Su-Hyun Oh       63.5
## 145  146                Mirim Lee       63.5
## 146  147             Cristie Kerr       63.4
## 147  148            Marissa Steen       63.3
## 148  149             Tiffany Chan       63.3
## 149  150   Katherine Perry-Hamski       63.0
## 150  151              Aditi Ashok       63.0
## 151  152             In-Kyung Kim       62.8
## 152  153              Yu-Sang Hou       62.7
## 153  154               Brianna Do       62.5
## 154  155            Maddie Szeryk       62.4
## 155  156           Katherine Kirk       62.3
## 156  157          Angela Stanford       61.5
## 157  158          Brooke Matthews       60.8
## 158  159         Savannah Vilaubi       60.6
## 159  160            Allison Emrey       59.7
## 160  161               Lauren Kim       58.6
## 161  162             Yae Eun Hong       58.5
## 162  163         Sarah Jane Smith       57.0
## 
## [[4]]
##     rank                     name rounds score_average_actual
## 1      1                 Lydia Ko     85               68.988
## 2      2              Hyo Joo Kim     59               69.390
## 3      3         Atthaya Thitikul     96               69.458
## 4      4         Brooke Henderson     76               69.513
## 5      5                 Xiyu Lin     88               69.545
## 6      6              Nelly Korda     50               69.660
## 7      7               Minjee Lee     72               69.694
## 8      8            Lexi Thompson     60               69.700
## 9      9            Danielle Kang     61               69.721
## 10    10              Hyejin Choi     94               69.723
## 11    11             Hannah Green     79               69.823
## 12    12           Celine Boutier     86               69.860
## 13    13               Andrea Lee     67               69.925
## 14    14             Nasa Hataoka     95               69.937
## 15    15        Madelene Sagstrom     79               70.127
## 16    16             Charley Hull     55               70.145
## 17    17              Megan Khang     81               70.148
## 18    18            Sei Young Kim     72               70.194
## 19    19              In Gee Chun     71               70.197
## 20    20                 Lilia Vu     84               70.202
## 21    21              Ayaka Furue     94               70.340
## 22    22             Georgia Hall     70               70.357
## 23    23            Jessica Korda     49               70.388
## 24    24                 Amy Yang     65               70.415
## 25    25            Leona Maguire     80               70.450
## 26    26              Chella Choi     84               70.464
## 27    27       Jodi Ewart Shadoff     81               70.506
## 28    28                A Lim Kim    101               70.535
## 29    29          Carlota Ciganda     76               70.579
## 30    30          Jennifer Kupcho     86               70.593
## 31    31               Alison Lee     86               70.616
## 32    32             Jin Young Ko     55               70.673
## 33    33          Cheyenne Knight     78               70.692
## 34    34                Yuka Saso     88               70.727
## 35    35            Jeong Eun Lee     75               70.747
## 36    36          Daniela Darquea     32               70.750
## 37    37            Lizette Salas     69               70.754
## 38    38          Sarah Schmelzel     79               70.759
## 39    39               Gaby Lopez     78               70.808
## 40    40              Marina Alex     79               70.823
## 41    41           Allisen Corpuz     73               70.877
## 42    42     Nanna Koerstz Madsen     65               70.892
## 43    43              Ruoning Yin     43               70.930
## 44    44               Inbee Park     48               70.938
## 45    45                Na Rin An     85               70.976
## 46    46               Eun-Hee Ji     66               70.985
## 47   47t               Ally Ewing     67               71.000
## 48   47t           Anna Nordqvist     78               71.000
## 49    49            Frida Kinhult     70               71.014
## 50    50           Karis Davidson     32               71.063
## 51    51     Pajaree Anannarukarn     87               71.080
## 52    52            Ryann O&#39;Toole     80               71.088
## 53    53        Albane Valenzuela     78               71.090
## 54    54              So Yeon Ryu     66               71.091
## 55    55        Moriya Jutanugarn     88               71.114
## 56    56               Paula Reto     82               71.122
## 57    57        Brittany Altomare     82               71.134
## 58    58               Ruixin Liu     60               71.167
## 59    59               Jenny Shin     68               71.176
## 60    60           Ashleigh Buhai     73               71.192
## 61    61          Caroline Masson     67               71.194
## 62    62      Jasmine Suwannapura     78               71.205
## 63    63           Gemma Dryburgh     82               71.220
## 64    64             Wei-Ling Hsu     72               71.236
## 65    65       Stephanie Kyriacou     66               71.242
## 66    66              Alena Sharp     31               71.258
## 67    67           Emily Pedersen     73               71.301
## 68    68              Stacy Lewis     73               71.315
## 69    69         Ariya Jutanugarn     85               71.341
## 70    70        Lauren Stephenson     67               71.343
## 71    71             Mina Harigae     71               71.352
## 72    72           Hinako Shibuno     71               71.366
## 73    73             Lindy Duncan     26               71.385
## 74   74t           Jennifer Chang     60               71.400
## 75   74t         Perrine Delacour     50               71.400
## 76    76        Pornanong Phatlum     88               71.455
## 77    77           Amanda Doherty     60               71.467
## 78    78          Matilda Castren     76               71.474
## 79    79              Emma Talley     78               71.474
## 80    80 Pauline Roussin-Bouchard     71               71.479
## 81    81                   Yu Liu     73               71.507
## 82    82          Lauren Coughlin     65               71.508
## 83    83          Caroline Inglis     46               71.543
## 84    84         Stephanie Meadow     76               71.592
## 85    85               Haeji Kang     62               71.613
## 86    86              Yealimi Noh     79               71.646
## 87    88               Sarah Kemp     63               71.651
## 88    89         Wichanee Meechai     88               71.682
## 89    90                Kelly Tan     74               71.743
## 90    91        Patty Tavatanakit     64               71.750
## 91    92           Lindsey Weaver     65               71.754
## 92    93         Dana Finkelstein     54               71.759
## 93    94             Peiyun Chien     60               71.783
## 94    95         Esther Henseleit     69               71.812
## 95    96         Elizabeth Szokol     30               71.833
## 96    97                Angel Yin     72               71.861
## 97    98                Isi Gabsa     59               71.881
## 98    99                  Min Lee     60               71.883
## 99   100            Brittany Lang     39               71.923
## 100  101              Maria Fassi     55               71.927
## 101  102             Mi Hyang Lee     46               71.935
## 102  103       Brittany Lincicome     32               71.938
## 103  104        Pernilla Lindberg     55               71.945
## 104  105         Charlotte Thomas     59               71.949
## 105  106          Sophia Schubert     72               71.986
## 106 107t              Aditi Ashok     72               72.000
## 107 107t          Morgane Metraux     61               72.000
## 108 107t               Dewi Weber     54               72.000
## 109  110               Bronte Law     57               72.035
## 110  111                 Gina Kim     31               72.065
## 111  112                Amy Olson     58               72.086
## 112  113               Annie Park     64               72.125
## 113  114             Kaitlyn Papp     48               72.146
## 114  115      Maude-Aimee Leblanc     65               72.215
## 115  116            Jennifer Song     64               72.219
## 116  117           Haylee Harford     42               72.238
## 117  118             Alana Uriell     53               72.264
## 118  119           Sung Hyun Park     55               72.273
## 119  120           Gerina Mendoza     47               72.277
## 120  121               Su-Hyun Oh     60               72.283
## 121  122            Celine Herbin     29               72.345
## 122  123             Cristie Kerr     29               72.379
## 123  124         Linnea Johansson     55               72.382
## 124  125             Tiffany Chan     31               72.419
## 125  126             Yae Eun Hong     54               72.463
## 126  127          Giulia Molinaro     56               72.464
## 127  128         Jaye Marie Green     36               72.472
## 128  129       Bianca Pagdanganan     48               72.521
## 129  130                  Muni He     49               72.531
## 130  131               Robynn Ree     38               72.553
## 131  132            Maddie Szeryk     34               72.559
## 132  133                Ana Belac     50               72.620
## 133  134           Katherine Kirk     24               72.708
## 134  135             Weiwei Zhang     22               72.727
## 135  136        Mariah Stackhouse     20               72.750
## 136 137t   Katherine Perry-Hamski     47               72.809
## 137 137t           Rachel Rohanna     47               72.809
## 138  139             In-Kyung Kim     40               72.850
## 139  140           Cydney Clanton     50               72.880
## 140  141         Sarah Jane Smith     27               72.889
## 141  142          Brooke Matthews     34               72.912
## 142  143            Janie Jackson     55               72.927
## 143  144          Lauren Hartlage     40               72.950
## 144 145t             Na Yeon Choi     42               72.952
## 145 145t             Sophia Popov     42               72.952
## 146 147t          Casey Danielson     39               73.000
## 147 147t              Yu-Sang Hou     28               73.000
## 148 147t            Christina Kim     45               73.000
## 149 147t            Agathe Laisne     41               73.000
## 150  151            Allison Emrey     52               73.019
## 151  152           Sanna Nuutinen     47               73.043
## 152  153                 Mel Reid     47               73.128
## 153  154            Jenny Coleman     61               73.131
## 154  155          Angela Stanford     42               73.143
## 155  156               Brianna Do     28               73.464
## 156  157            Marissa Steen     25               73.840
## 157  158          Elizabeth Nagel     25               73.920
## 158  159               Vivian Hou     23               74.087
## 159  160         Savannah Vilaubi     30               74.133
## 160  161    Fatima Fernandez Cano     32               74.188
## 161  162               Lauren Kim     18               74.333
## 162  163                Mirim Lee     26               74.462</code></pre>
<p>All done!! And just like that, we’ve downloaded four different web pages, extracted the tabled info, and formatted them without copying and pasting any code. The same process for all four was only used one time to write the initial function. Just apply some final formatting to clean it up a bit and combine the separate data frames into a single, unified one.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-1" aria-hidden="true" tabindex="-1"></a>lpga_data<span class="ot">=</span> lpga_data <span class="sc">%&gt;%</span> </span>
<span id="cb220-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reduce</span>(left_join, <span class="at">by=</span><span class="st">&quot;name&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Combine all list levels into a single tibble, matching by the &quot;Name&quot; column</span></span>
<span id="cb220-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;rank.&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb220-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;score_average&quot;</span><span class="ot">=</span><span class="st">&quot;score_average_actual&quot;</span>)</span>
<span id="cb220-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb220-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-6" aria-hidden="true" tabindex="-1"></a><span class="co"># VOILA! </span></span>
<span id="cb220-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb220-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lpga_data)</span></code></pre></div>
<pre><code>##                 name distance putt_average greens_hit rounds score_average
## 1        Maria Fassi  279.255        1.834       68.0     55        71.927
## 2 Bianca Pagdanganan  277.052        1.844       66.0     48        72.521
## 3          Yuka Saso  275.614        1.752       68.6     88        70.727
## 4    Brooke Matthews  275.279        1.868       60.8     34        72.912
## 5          A Lim Kim  274.741        1.794       74.4    101        70.535
## 6     Emily Pedersen  274.669        1.845       73.5     73        71.301</code></pre>
</div>
<div id="non-reproducible-example-juvenile-life-without-parole-study" class="section level3 hasAnchor" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> Non-reproducible example (Juvenile Life Without Parole study)<a href="intermediate-r-functions-loops-and-iterative-programming.html#non-reproducible-example-juvenile-life-without-parole-study" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the Juvenile Lifers study, there were a series of questions that participants rated on a scale of 0-100 in terms of difficulty. Part of our analysis involved taking the ratings on those variables and giving them relative rankings, so that each of the 6 variables in the series was rated from the least to most difficult, by participant.</p>
<p>Now if we only needed to compute these rankings once this wouldn’t have been any big deal; however, we needed to do it <strong>three times</strong>.</p>
<p>Much of the same code and the same process would need to be copied and pasted, resulting in a very long, messy, harder to read script. With purrr however, we can reduce the redundancies to a minimum, saving time and reducing the chances of mistakes.</p>
<p><strong><em>Step 1.</em></strong> Just like before, the first step is to find a line-by-line solution for a single item, and then to generalize this into a shortcut function that can be applied to the any item “i” in a series of items.</p>
<p>For the sake of brevity, I’m going to skip most of that and just include the functions below.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;C:/Github Repos/Studies/JLWOP/Data and Models/jlwop_reentry_survey.RData&quot;</span>)</span>
<span id="cb222-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="do">#### CREATE THE DATA SETS WE NEED####</span></span>
<span id="cb222-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-4" aria-hidden="true" tabindex="-1"></a>na_blank<span class="ot">=</span>jlwop_reentry_survey <span class="co"># analysis 1 keeps the data as-is</span></span>
<span id="cb222-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-6" aria-hidden="true" tabindex="-1"></a>na_zero<span class="ot">=</span>jlwop_reentry_survey <span class="sc">%&gt;%</span> <span class="co"># supplementary analysis replaces the NA&#39;s with 0</span></span>
<span id="cb222-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(barrier_housing<span class="sc">:</span>barrier_identification), replace_na,<span class="dv">0</span>))</span>
<span id="cb222-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(jlwop_reentry_survey) <span class="co"># remove old data set to avoid confusion</span></span>
<span id="cb222-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-12" aria-hidden="true" tabindex="-1"></a><span class="do">#### Functions ####</span></span>
<span id="cb222-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-14" aria-hidden="true" tabindex="-1"></a><span class="co"># transformation function to wrangle the data into proper formatting</span></span>
<span id="cb222-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-15" aria-hidden="true" tabindex="-1"></a>rotate_data<span class="ot">=</span><span class="cf">function</span>(data, variable_prefix){</span>
<span id="cb222-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb222-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-17" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb222-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb222-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols=</span> <span class="fu">starts_with</span>(variable_prefix), <span class="co"># collect all the desired variables (i.e., columns)....</span></span>
<span id="cb222-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="co">#...and put them into a new categorical variable called &quot;variable&quot;</span></span>
<span id="cb222-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;participant_score&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># ...and store their values in a new variable called &quot;participant_score&quot;</span></span>
<span id="cb222-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(unique,participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb222-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb222-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(unique, participant_score, variable)) <span class="sc">%&gt;%</span> <span class="co"># keep only these 3 variables</span></span>
<span id="cb222-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(variable, <span class="at">.before =</span> participant_score) <span class="co"># put the newly created variable up front</span></span>
<span id="cb222-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-27" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb222-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb222-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-31" aria-hidden="true" tabindex="-1"></a><span class="co"># creating the rankings for each variable; then transform data back to original structure</span></span>
<span id="cb222-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-32" aria-hidden="true" tabindex="-1"></a>rank_and_unpivot<span class="ot">=</span><span class="cf">function</span>(data){</span>
<span id="cb222-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-33" aria-hidden="true" tabindex="-1"></a>  data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb222-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unique) <span class="sc">%&gt;%</span> <span class="co"># group the scores so they can be ranked by participant</span></span>
<span id="cb222-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank1=</span><span class="fu">dense_rank</span>(participant_score), <span class="co"># create ranking variable</span></span>
<span id="cb222-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-36" aria-hidden="true" tabindex="-1"></a>               <span class="at">rank=</span><span class="fu">max</span>(rank1,<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="dv">1</span> <span class="sc">-</span> rank1) <span class="sc">%&gt;%</span> <span class="co"># fix ranks by flipping to ascending order</span></span>
<span id="cb222-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank=</span><span class="fu">factor</span>(rank)) <span class="sc">%&gt;%</span> <span class="co"># convert rank to factor structure</span></span>
<span id="cb222-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rank1)</span>
<span id="cb222-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot back to wide</span></span>
<span id="cb222-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-42" aria-hidden="true" tabindex="-1"></a>data<span class="ot">=</span>data <span class="sc">%&gt;%</span> </span>
<span id="cb222-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable, <span class="at">values_from =</span> rank<span class="sc">:</span>participant_score) <span class="sc">%&gt;%</span> </span>
<span id="cb222-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># un-group the data and delete the generated names</span></span>
<span id="cb222-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-46" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(data)</span>
<span id="cb222-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb222-47" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong><em>Step 2.</em></strong> Again, like before, we want to combine all elements of interest into some object. Once we have that, we then pass said object to <code>map()</code> and supply the map call with our custom function.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-1" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank, <span class="at">na_zero=</span>na_zero) <span class="sc">%&gt;%</span> <span class="co"># create lists</span></span>
<span id="cb223-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f=</span>rotate_data, <span class="at">variable_prefix =</span> <span class="st">&quot;barrier&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># apply custom function along whole list</span></span>
<span id="cb223-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rank_and_unpivot) <span class="co"># again!!  DO IT AGAIN! With another function this time.</span></span>
<span id="cb223-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-5" aria-hidden="true" tabindex="-1"></a><span class="co"># extract list elements to make them data frames again</span></span>
<span id="cb223-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-6" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(dfs, <span class="fu">globalenv</span>())</span>
<span id="cb223-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb223-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(dfs) <span class="co">#discard list. It has fulfilled its purpose.</span></span></code></pre></div>
<p>And just like that, we’re done!</p>
</div>
<div id="example-3-readimport-several-files-at-once-with-map" class="section level3 hasAnchor" number="10.3.3">
<h3><span class="header-section-number">10.3.3</span> Example 3: Read/Import several files at once with <code>map()</code><a href="intermediate-r-functions-loops-and-iterative-programming.html#example-3-readimport-several-files-at-once-with-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Multiple ways you can do this….</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="do">################### Option 1: read all into the global environment, keeping them as SEPERATE df&#39;s ###############</span></span>
<span id="cb224-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-2" aria-hidden="true" tabindex="-1"></a>legaldmlab<span class="sc">::</span><span class="fu">read_all</span>(<span class="at">path=</span><span class="st">&quot;Data Repository/Stats Data Repository/JASP files&quot;</span>, <span class="at">extension =</span> <span class="st">&quot;.csv&quot;</span>)</span>
<span id="cb224-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1.A: Squish ALL OBJECTS in the working environment into a list</span></span>
<span id="cb224-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Again, note the &quot;ALL OBJECTS&quot; part; make sure there are no functions or other things in the environment when you run this.</span></span>
<span id="cb224-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-6" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">mget</span>(<span class="fu">ls</span>())</span>
<span id="cb224-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-9" aria-hidden="true" tabindex="-1"></a><span class="do">############# Option 2: Read in all files as a LIST of df&#39;s, then stitch in the names #####################################</span></span>
<span id="cb224-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-11" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>, <span class="st">&quot;/&quot;</span>), </span>
<span id="cb224-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-12" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list.files</span>(<span class="at">path=</span>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>))</span>
<span id="cb224-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-14" aria-hidden="true" tabindex="-1"></a>files_list<span class="ot">=</span>files <span class="sc">|&gt;</span> </span>
<span id="cb224-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(readr<span class="sc">::</span>read_csv)</span>
<span id="cb224-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(files_list)<span class="ot">=</span><span class="fu">file.path</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data Repository&quot;</span>, <span class="st">&quot;Stats Data Repository&quot;</span>, <span class="st">&quot;JASP files&quot;</span>)) <span class="sc">|&gt;</span> <span class="co">#specify file path as a string</span></span>
<span id="cb224-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>) <span class="sc">|&gt;</span> <span class="co"># pass the path string to list files; search in this location for files with this extension</span></span>
<span id="cb224-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="at">pattern=</span><span class="st">&quot;.csv&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>) <span class="co"># remove this pattern to save only the name</span></span>
<span id="cb224-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2.A: Extract each data frame and put everything into the global environment</span></span>
<span id="cb224-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb224-23" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(cog_data, <span class="fu">globalenv</span>())</span></code></pre></div>
</div>
</div>
<div id="other-purrr-commands" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Other purrr commands<a href="intermediate-r-functions-loops-and-iterative-programming.html#other-purrr-commands" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Note that <code>map()</code> always returns a list, and depending on the output that you want, you may need to use a variation of <code>map()</code>. These variations are as follows:</p>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Return</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>map_lgl()</code></td>
<td>logical vector</td>
</tr>
<tr class="even">
<td><code>map_int()</code></td>
<td>integer vector</td>
</tr>
<tr class="odd">
<td><code>map_dbl()</code></td>
<td>double vector</td>
</tr>
<tr class="even">
<td><code>map_chr()</code></td>
<td>character vector</td>
</tr>
<tr class="odd">
<td><code>walk()</code></td>
<td>only returns the side effects of a function</td>
</tr>
</tbody>
</table>
<div id="walk-and-walk2" class="section level3 hasAnchor" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> <code>walk</code> and <code>walk2</code><a href="intermediate-r-functions-loops-and-iterative-programming.html#walk-and-walk2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Walk() is useful for when you just want to plot something or write a save file to your disk, etc. It does not give you any return to store something in the environment. You use it to write/read files, open graphics windows, and so on.</p>
<p><strong><em>Example: Writing multiple files at once</em></strong></p>
<p>Utilize <code>purrr::walk2()</code> to apply a function iteratively on TWO objects simultaneously. To save multiple .csv files with <code>walk2</code>, we need two distinct lists: 1. A list of data frames that we wish to export, 2. and the file paths, complete with the file names and extensions, for each file to be written.</p>
<p>First create and define both list items. Then apply <code>walk2()</code> to pluck an element from list 1 and its corresponding element from list 2, and apply the <code>write_csv</code> function in for-loop fashion.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DEMO 1: Writing multiple plots at once</span></span>
<span id="cb225-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create list one, the list of objects</span></span>
<span id="cb225-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-4" aria-hidden="true" tabindex="-1"></a>figs <span class="ot">=</span> <span class="fu">list</span>(<span class="at">scatter_plot=</span>scatter_plot, </span>
<span id="cb225-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">multi_plot=</span>multi_plot)</span>
<span id="cb225-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-7" aria-hidden="true" tabindex="-1"></a><span class="co"># create list 2, the list of file names</span></span>
<span id="cb225-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-8" aria-hidden="true" tabindex="-1"></a>fig_names <span class="ot">=</span> figs <span class="sc">|&gt;</span></span>
<span id="cb225-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb225-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(paste0, <span class="st">&quot;.png&quot;</span>)</span>
<span id="cb225-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-12" aria-hidden="true" tabindex="-1"></a><span class="co"># pass both to purrr to use ggsave iteratively over both lists once and save all graphs with one command</span></span>
<span id="cb225-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-13" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(figs, fig_names, <span class="sc">~</span><span class="fu">ggsave</span>(<span class="at">plot =</span> figs,</span>
<span id="cb225-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">filename =</span> fig_names </span>
<span id="cb225-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-15" aria-hidden="true" tabindex="-1"></a>                               <span class="at">path=</span>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Figures and Tables&quot;</span>),</span>
<span id="cb225-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb225-16" aria-hidden="true" tabindex="-1"></a>                               <span class="at">device =</span> <span class="st">&quot;png&quot;</span>, <span class="at">dpi =</span> <span class="dv">300</span>))</span></code></pre></div>
<p>A second demo, this time using <code>write.csv</code> to save/export multiple CSV files at once</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DEMO 2: Wrinting multiple .csv files at once</span></span>
<span id="cb226-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="do">### Custom function ####</span></span>
<span id="cb226-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create needed function that grabs file names and stitches them together with the correct path and extension</span></span>
<span id="cb226-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Included in legaldmlab package</span></span>
<span id="cb226-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-6" aria-hidden="true" tabindex="-1"></a>bundle_paths<span class="ot">=</span><span class="cf">function</span>(df_list, output_location, file_type){</span>
<span id="cb226-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-7" aria-hidden="true" tabindex="-1"></a>  names<span class="ot">=</span><span class="fu">names</span>(df_list)</span>
<span id="cb226-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-8" aria-hidden="true" tabindex="-1"></a>  paths<span class="ot">=</span><span class="fu">rep</span>(here<span class="sc">::</span><span class="fu">here</span>(output_location), <span class="fu">length</span>(names))</span>
<span id="cb226-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-9" aria-hidden="true" tabindex="-1"></a>  extension<span class="ot">=</span><span class="fu">rep</span>(<span class="fu">c</span>(file_type), <span class="fu">length</span>(names))</span>
<span id="cb226-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb226-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-11" aria-hidden="true" tabindex="-1"></a>  fixed_names<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;/&quot;</span>,names)</span>
<span id="cb226-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb226-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-13" aria-hidden="true" tabindex="-1"></a>  path_bundle<span class="ot">=</span><span class="fu">list</span>(paths,fixed_names, extension) <span class="sc">%&gt;%</span> </span>
<span id="cb226-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pmap</span>(., paste0)</span>
<span id="cb226-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb226-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(path_bundle)</span>
<span id="cb226-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb226-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-19" aria-hidden="true" tabindex="-1"></a><span class="do">#### Exporting the .csv files for SPSS/JASP/etc. ####</span></span>
<span id="cb226-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Define list 1</span></span>
<span id="cb226-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-21" aria-hidden="true" tabindex="-1"></a>dfs<span class="ot">=</span><span class="fu">list</span>(<span class="at">na_blank=</span>na_blank,</span>
<span id="cb226-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero=</span>na_zero,</span>
<span id="cb226-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">na_zero_helpreint=</span>na_zero_helpreint)</span>
<span id="cb226-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-25" aria-hidden="true" tabindex="-1"></a><span class="co"># list 2</span></span>
<span id="cb226-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-26" aria-hidden="true" tabindex="-1"></a>paths_csv<span class="ot">=</span><span class="fu">bundle_paths</span>(<span class="at">df_list =</span> dfs, <span class="at">folder_location =</span> <span class="st">&quot;JLWOP/Data and Models&quot;</span>, <span class="at">file_type =</span> <span class="st">&quot;.sav&quot;</span>)</span>
<span id="cb226-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over all elements in list 1 and corresponding element in list 2;</span></span>
<span id="cb226-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-30" aria-hidden="true" tabindex="-1"></a><span class="co"># and apply the the write_csv function to each</span></span>
<span id="cb226-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-31" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(<span class="at">.x=</span>dfs, <span class="at">.y=</span> paths, <span class="at">.f=</span>haven<span class="sc">::</span>write_sav)</span>
<span id="cb226-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-34" aria-hidden="true" tabindex="-1"></a><span class="do">#### .RData file for R users ####</span></span>
<span id="cb226-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine multiple data frames into a single .RData file and export</span></span>
<span id="cb226-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-36" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">&quot;na_blank&quot;</span>, <span class="st">&quot;na_zero&quot;</span>, <span class="st">&quot;na_zero_helpreint&quot;</span>), </span>
<span id="cb226-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb226-37" aria-hidden="true" tabindex="-1"></a>     <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;JLWOP&quot;</span>, <span class="st">&quot;Data and Models&quot;</span>,<span class="st">&quot;ranking_data.RData&quot;</span>))</span></code></pre></div>
</div>
<div id="map2" class="section level3 hasAnchor" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> <code>map2</code><a href="intermediate-r-functions-loops-and-iterative-programming.html#map2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb227-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_a.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_a.png" width="594" /></p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb228-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;map2_b.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/map2_b.png" width="816" /></p>
</div>
<div id="pmap-for-when-you-have-a-bunch-of-shit" class="section level3 hasAnchor" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> <code>pmap</code> for when you have a bunch of shit<a href="intermediate-r-functions-loops-and-iterative-programming.html#pmap-for-when-you-have-a-bunch-of-shit" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This function is for iterating over <em>three or more</em> elements. As soon as you have &gt;2 items you have to iterate over, you need <code>pmap()</code>, which acts on <strong>a list object called <code>.i</code></strong> instead of a list object.</p>
<p>The list <code>.i</code> is a list of all the objects you want to iterate over. If you give it a list of 18 items, it iterates over all 18. If the list only has two things, it only acts on those two.</p>
<p>She says its easiest to imagine the list as a data frame, and the columns of the data frame like the elements of that list.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb229-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap.png" width="466" /></p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb230-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;pics&quot;</span>, <span class="st">&quot;pmap_2.png&quot;</span>))</span></code></pre></div>
<p><img src="pics/pmap_2.png" width="600" /></p>
</div>
</div>
<div id="using-purrr-to-manage-many-models" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Using purrr to manage many models<a href="intermediate-r-functions-loops-and-iterative-programming.html#using-purrr-to-manage-many-models" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Below is the full script I copied from Hadley Wickham’s lecture, which you can watch <a href="https://www.youtube.com/watch?v=rz3_FDVt9eg">here</a></p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dplyr,purrr,tidyverse,gapminder)</span>
<span id="cb231-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="do">#### Workflow for managing many models in R ####</span></span>
<span id="cb231-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Nest data with {tidyr}</span></span>
<span id="cb231-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Use {purrr} to map a modeling function</span></span>
<span id="cb231-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Use {broom} to inspect your tidy data</span></span>
<span id="cb231-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-9" aria-hidden="true" tabindex="-1"></a>gapminder<span class="ot">=</span>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb231-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year1950=</span> year<span class="dv">-1950</span>) <span class="co">#the number of years it&#39;s been since 1950</span></span>
<span id="cb231-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-12" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb231-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-13" aria-hidden="true" tabindex="-1"></a><span class="do">#### Step 1. Nest the data. ####</span></span>
<span id="cb231-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-15" aria-hidden="true" tabindex="-1"></a><span class="co"># A nested data frame has one column per country. You&#39;re essentially </span></span>
<span id="cb231-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-16" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a Russian doll; a data frame inside of a larger data frame.</span></span>
<span id="cb231-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-18" aria-hidden="true" tabindex="-1"></a>by_country<span class="ot">=</span>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb231-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent,country) <span class="sc">%&gt;%</span> <span class="co"># variables to keep at the top level</span></span>
<span id="cb231-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="co"># smush everything else into a df, and store this mini-df in its own column</span></span>
<span id="cb231-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-22" aria-hidden="true" tabindex="-1"></a><span class="co"># with this, you can have an entire table per row; a whole data frame for each country</span></span>
<span id="cb231-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Essentially condensing a list into a table</span></span>
<span id="cb231-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-24" aria-hidden="true" tabindex="-1"></a>by_country<span class="sc">$</span>data[[<span class="dv">1</span>]]</span>
<span id="cb231-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-27" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb231-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-29" aria-hidden="true" tabindex="-1"></a><span class="do">#### Step 2. Use purrr to map stuff. ####</span></span>
<span id="cb231-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 12:50</span></span>
<span id="cb231-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-32" aria-hidden="true" tabindex="-1"></a>country_model<span class="ot">=</span><span class="cf">function</span>(df){</span>
<span id="cb231-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(lifeExp <span class="sc">~</span> year1950, <span class="at">data =</span> df)</span>
<span id="cb231-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb231-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-36" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span> by_country <span class="sc">%&gt;%</span> </span>
<span id="cb231-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb231-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod=</span><span class="fu">map</span>(data,country_model)</span>
<span id="cb231-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb231-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-42" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb231-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent,country) <span class="sc">%&gt;%</span> </span>
<span id="cb231-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb231-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb231-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod=</span> data <span class="sc">%&gt;%</span> <span class="fu">map</span>(country_model)</span>
<span id="cb231-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb231-48"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-49"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-49" aria-hidden="true" tabindex="-1"></a><span class="co"># 27:11</span></span>
<span id="cb231-50"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-51"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-51" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb231-52"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-52" aria-hidden="true" tabindex="-1"></a><span class="do">##### Step 3. ####</span></span>
<span id="cb231-53"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-54"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-54" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates another nested df inside of your main data frame that has the summary stats of each model</span></span>
<span id="cb231-55"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-55" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span>models <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb231-56"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">tidy=</span><span class="fu">map</span>(mod, broom<span class="sc">::</span>tidy), <span class="co"># tidy() gives model estimates</span></span>
<span id="cb231-57"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">glance=</span><span class="fu">map</span>(mod,broom<span class="sc">::</span>glance), <span class="co"># glance() gives model summaries</span></span>
<span id="cb231-58"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">augment=</span><span class="fu">map</span>(mod,broom<span class="sc">::</span>augment) <span class="co"># model coefficients</span></span>
<span id="cb231-59"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb231-60"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-61"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-61" aria-hidden="true" tabindex="-1"></a><span class="co"># What can you do with this nest of data frames? </span></span>
<span id="cb231-62"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-62" aria-hidden="true" tabindex="-1"></a><span class="co"># The reverse of step 1; un-nest it to unpack everything!</span></span>
<span id="cb231-63"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 34:40</span></span>
<span id="cb231-64"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Keeps a massive list of related information neatly organized!</span></span>
<span id="cb231-65"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-66"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-66" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,data) <span class="co"># back to where we started</span></span>
<span id="cb231-67"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-67" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,glance, <span class="at">.drop =</span> <span class="cn">TRUE</span>) </span>
<span id="cb231-68"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb231-68" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,tidy) </span></code></pre></div>
<p>…and here is a version I made of the above to manage many Latent Growth Curve models.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CONDENSED MASTER TABLE VERSION -----------------------------------------------------------------------------</span></span>
<span id="cb232-2"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Models table that has all models condensed</span></span>
<span id="cb232-3"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-4" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="ot">=</span><span class="fu">tibble</span>(</span>
<span id="cb232-5"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-6"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">#### Define model names ####</span></span>
<span id="cb232-7"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">model_name=</span><span class="fu">c</span>(<span class="st">&quot;Linear&quot;</span>, <span class="st">&quot;Quadratic&quot;</span>, <span class="st">&quot;Latent_Basis&quot;</span>),</span>
<span id="cb232-8"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-9"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">##### List model specifications for lavaan ####</span></span>
<span id="cb232-10"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">model_spec=</span><span class="fu">list</span>(</span>
<span id="cb232-11"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-12"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">linear_model=</span> <span class="st">&#39;</span></span>
<span id="cb232-13"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-13" aria-hidden="true" tabindex="-1"></a><span class="st">  # intercept and slope with fixed coefficients</span></span>
<span id="cb232-14"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-14" aria-hidden="true" tabindex="-1"></a><span class="st">  i =~ 1*panss_total_400 + 1*panss_total_1000 + 1*panss_total_1600 + 1*panss_total_2200 + 1*panss_total_2800 +  1*panss_total_3400 + 1*panss_total_5200</span></span>
<span id="cb232-15"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-15" aria-hidden="true" tabindex="-1"></a><span class="st">  s =~ 0*panss_total_400 + 3*panss_total_1000 + 6*panss_total_1600 + 9*panss_total_2200 + 12*panss_total_2800 + 15*panss_total_3400 + 24*panss_total_5200</span></span>
<span id="cb232-16"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-16" aria-hidden="true" tabindex="-1"></a><span class="st">  &#39;</span>,</span>
<span id="cb232-17"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-18"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">quadratic_model=</span> <span class="st">&#39;</span></span>
<span id="cb232-19"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-19" aria-hidden="true" tabindex="-1"></a><span class="st">  # intercept and slope with fixed coefficients</span></span>
<span id="cb232-20"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-20" aria-hidden="true" tabindex="-1"></a><span class="st">  i =~ 1*panss_total_400 + 1*panss_total_1000 + 1*panss_total_1600 + 1*panss_total_2200 + 1*panss_total_2800 +  1*panss_total_3400</span></span>
<span id="cb232-21"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-21" aria-hidden="true" tabindex="-1"></a><span class="st">  s =~ 0*panss_total_400 + 3*panss_total_1000 + 6*panss_total_1600 + 9*panss_total_2200 + 12*panss_total_2800 + 15*panss_total_3400 + 24*panss_total_5200</span></span>
<span id="cb232-22"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-22" aria-hidden="true" tabindex="-1"></a><span class="st">  </span></span>
<span id="cb232-23"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-23" aria-hidden="true" tabindex="-1"></a><span class="st">  qs =~ 0*panss_total_400 + 9*panss_total_1000 + 36*panss_total_1600 + 81*panss_total_2200 + 144*panss_total_2800 + 225*panss_total_3400 + 576*panss_total_5200</span></span>
<span id="cb232-24"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-24" aria-hidden="true" tabindex="-1"></a><span class="st">  &#39;</span>,</span>
<span id="cb232-25"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-26"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">latentBasis_model=</span> <span class="st">&#39;</span></span>
<span id="cb232-27"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-27" aria-hidden="true" tabindex="-1"></a><span class="st">  # intercept and slope with fixed coefficients</span></span>
<span id="cb232-28"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-28" aria-hidden="true" tabindex="-1"></a><span class="st">  i =~ 1*panss_total_400 + 1*panss_total_1000 + 1*panss_total_1600 + 1*panss_total_2200 + 1*panss_total_2800 +  1*panss_total_3400 + 1*panss_total_5200</span></span>
<span id="cb232-29"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-29" aria-hidden="true" tabindex="-1"></a><span class="st">  s =~ 0*panss_total_400 + NA*panss_total_1000 + NA*panss_total_1600 + NA*panss_total_2200 + NA*panss_total_2800 + NA*panss_total_3400 + 1*panss_total_5200</span></span>
<span id="cb232-30"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-30" aria-hidden="true" tabindex="-1"></a><span class="st">  &#39;</span></span>
<span id="cb232-31"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-31" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb232-32"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-33"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-33" aria-hidden="true" tabindex="-1"></a>  <span class="do">#### Fit all models at once with purrr ####</span></span>
<span id="cb232-34"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">fitted_model=</span>model_spec <span class="sc">|&gt;</span> <span class="fu">map</span>(lavaan<span class="sc">::</span>growth, <span class="at">data=</span>panss_sem_data, <span class="at">missing=</span><span class="st">&quot;FIML&quot;</span>),</span>
<span id="cb232-35"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb232-36"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb232-37"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-38"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-39"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-40"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-40" aria-hidden="true" tabindex="-1"></a><span class="do">#### Add parameter estimates and fit stats ####</span></span>
<span id="cb232-41"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-41" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="ot">=</span>models_noCovs <span class="sc">|&gt;</span> </span>
<span id="cb232-42"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tidy_parameters=</span><span class="fu">map</span>(fitted_model, tidy, <span class="at">conf.int=</span>.<span class="dv">95</span>), <span class="co">#parameter estimates</span></span>
<span id="cb232-43"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">global_fit=</span><span class="fu">map</span>(fitted_model, performance<span class="sc">::</span>model_performance)) <span class="co">#global fit of models</span></span>
<span id="cb232-44"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-45"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-45" aria-hidden="true" tabindex="-1"></a><span class="do">#### Clean up stuff ####</span></span>
<span id="cb232-46"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-46" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="sc">$</span>tidy_parameters<span class="ot">=</span>models_noCovs<span class="sc">$</span>tidy_parameters <span class="sc">|&gt;</span> </span>
<span id="cb232-47"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(select,<span class="sc">-</span><span class="fu">c</span>(std.lv<span class="sc">:</span>std.nox, op)) <span class="sc">|&gt;</span> <span class="co"># remove extra columns</span></span>
<span id="cb232-48"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(mutate, <span class="at">estimate=</span><span class="fu">round</span>(estimate, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">|&gt;</span> <span class="co"># round numbers</span></span>
<span id="cb232-49"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(mutate, (<span class="fu">across</span>(<span class="fu">c</span>(std.error<span class="sc">:</span>p.value, conf.low, conf.high), round, <span class="dv">3</span>)))</span>
<span id="cb232-50"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-51"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-51" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="sc">$</span>global_fit<span class="ot">=</span>models_noCovs<span class="sc">$</span>global_fit <span class="sc">|&gt;</span> </span>
<span id="cb232-52"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb232-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(select, <span class="fu">c</span>(Chi2<span class="sc">:</span>p_Chi2, RMSEA<span class="sc">:</span>SRMR, CFI, AIC))</span></code></pre></div>
<p>Note how the functions inside <code>map</code> take on a slightly different form, but work the same.</p>
<p>Using this framework, you can easily drill down into any column and be sure that you’re accessing the right thing. Everything is always kept together, and always acted upon in the same way. This minimizes mistakes.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="intermediate-r-functions-loops-and-iterative-programming.html#cb233-1" aria-hidden="true" tabindex="-1"></a>models_noCovs<span class="sc">$</span>tidy_parameters<span class="sc">$</span>latent_Basis_model</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="misc.-stuff.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="intro-to-r-markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/edit/master/10-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/blob/master/10-functions.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
