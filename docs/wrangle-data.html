<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Wrangle Data | R Coding Compendium</title>
  <meta name="description" content="Chapter 3 Wrangle Data | R Coding Compendium" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Wrangle Data | R Coding Compendium" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Wrangle Data | R Coding Compendium" />
  
  
  

<meta name="author" content="Ryan Schneider" />


<meta name="date" content="2021-08-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-r-basics.html"/>
<link rel="next" href="clean-data.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Compendium</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> A Monument to my Madness</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-this-book-is-and-what-it-is-not"><i class="fa fa-check"></i><b>1.1</b> What this book is, and what it is not</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html"><i class="fa fa-check"></i><b>2</b> Introduction: R Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#importing-data"><i class="fa fa-check"></i><b>2.1</b> Importing Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#spreadsheets"><i class="fa fa-check"></i><b>2.1.1</b> Spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#exporting-i.e.-saving-data-and-output"><i class="fa fa-check"></i><b>2.2</b> Exporting (i.e., saving) Data and Output</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#exporting-to-.csv"><i class="fa fa-check"></i><b>2.2.1</b> Exporting to .CSV</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#export-to-.rdata-and-load-the-data-again-later"><i class="fa fa-check"></i><b>2.2.2</b> Export to .RData (and load the data again later)</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#export-to-excel"><i class="fa fa-check"></i><b>2.2.3</b> Export to Excel</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction-r-basics.html"><a href="introduction-r-basics.html#accessedit-specific-cell-number-values"><i class="fa fa-check"></i><b>2.2.4</b> Access/edit specific cell number values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrangle-data.html"><a href="wrangle-data.html"><i class="fa fa-check"></i><b>3</b> Wrangle Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="wrangle-data.html"><a href="wrangle-data.html#joining-or-splitting"><i class="fa fa-check"></i><b>3.1</b> Joining or Splitting</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="wrangle-data.html"><a href="wrangle-data.html#whole-data-sets"><i class="fa fa-check"></i><b>3.1.1</b> Whole Data Sets</a></li>
<li class="chapter" data-level="3.1.2" data-path="wrangle-data.html"><a href="wrangle-data.html#individual-columnsvariables"><i class="fa fa-check"></i><b>3.1.2</b> Individual Columns/Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="wrangle-data.html"><a href="wrangle-data.html#selecting-specific-columnsvariables"><i class="fa fa-check"></i><b>3.2</b> Selecting specific columns/variables</a></li>
<li class="chapter" data-level="3.3" data-path="wrangle-data.html"><a href="wrangle-data.html#if-if-then-and-case-when"><i class="fa fa-check"></i><b>3.3</b> If, If-then, and Case-when</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="wrangle-data.html"><a href="wrangle-data.html#if-then"><i class="fa fa-check"></i><b>3.3.1</b> If-then</a></li>
<li class="chapter" data-level="3.3.2" data-path="wrangle-data.html"><a href="wrangle-data.html#case-when"><i class="fa fa-check"></i><b>3.3.2</b> Case-when</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrangle-data.html"><a href="wrangle-data.html#merge-or-collapse-variables"><i class="fa fa-check"></i><b>3.4</b> Merge or Collapse variables</a></li>
<li class="chapter" data-level="3.5" data-path="wrangle-data.html"><a href="wrangle-data.html#apply-a-function-to-multiple-variables-at-once"><i class="fa fa-check"></i><b>3.5</b> Apply a function to multiple variables at once</a></li>
<li class="chapter" data-level="3.6" data-path="wrangle-data.html"><a href="wrangle-data.html#pivoting-i.e.-transposing-data"><i class="fa fa-check"></i><b>3.6</b> Pivoting (i.e., transposing) data</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="wrangle-data.html"><a href="wrangle-data.html#condense-multiple-rows-into-a-single-column-pivot-wide-to-long"><i class="fa fa-check"></i><b>3.6.1</b> Condense multiple rows into a single column (pivot wide to long)</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="wrangle-data.html"><a href="wrangle-data.html#managing-many-models"><i class="fa fa-check"></i><b>3.7</b> Managing Many Models</a></li>
<li class="chapter" data-level="3.8" data-path="wrangle-data.html"><a href="wrangle-data.html#turn-row-names-into-a-columnvariable"><i class="fa fa-check"></i><b>3.8</b> Turn row names into a column/variable</a></li>
<li class="chapter" data-level="3.9" data-path="wrangle-data.html"><a href="wrangle-data.html#how-to-editchange-column-names"><i class="fa fa-check"></i><b>3.9</b> How to edit/change column names</a></li>
<li class="chapter" data-level="3.10" data-path="wrangle-data.html"><a href="wrangle-data.html#re-order-columns-in-a-data-set"><i class="fa fa-check"></i><b>3.10</b> Re-order columns in a data set</a></li>
<li class="chapter" data-level="3.11" data-path="wrangle-data.html"><a href="wrangle-data.html#working-with-date-and-time-variables"><i class="fa fa-check"></i><b>3.11</b> Working with date and time variables</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="wrangle-data.html"><a href="wrangle-data.html#format-date-and-time-variables-appropriate-as-date-objects-in-r"><i class="fa fa-check"></i><b>3.11.1</b> Format date-and-time variables appropriate as date objects in R</a></li>
<li class="chapter" data-level="3.11.2" data-path="wrangle-data.html"><a href="wrangle-data.html#find-the-difference-between-two-datestimes"><i class="fa fa-check"></i><b>3.11.2</b> Find the difference between two dates/times</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clean-data.html"><a href="clean-data.html"><i class="fa fa-check"></i><b>4</b> Clean Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="clean-data.html"><a href="clean-data.html#replace-a-value-with-na"><i class="fa fa-check"></i><b>4.1</b> Replace a value with NA</a></li>
<li class="chapter" data-level="4.2" data-path="clean-data.html"><a href="clean-data.html#replace-nas-with-a-value"><i class="fa fa-check"></i><b>4.2</b> Replace NA’s with a value</a></li>
<li class="chapter" data-level="4.3" data-path="clean-data.html"><a href="clean-data.html#identify-columns-or-rows-with-missing-values"><i class="fa fa-check"></i><b>4.3</b> Identify columns or rows with Missing values</a></li>
<li class="chapter" data-level="4.4" data-path="clean-data.html"><a href="clean-data.html#find-the-percentage-of-a-variable-that-is-missing"><i class="fa fa-check"></i><b>4.4</b> Find the percentage of a variable that is missing</a></li>
<li class="chapter" data-level="4.5" data-path="clean-data.html"><a href="clean-data.html#exclude-missing-values-from-analysis"><i class="fa fa-check"></i><b>4.5</b> Exclude Missing values from analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dropping-missing-values-from-the-data-set.html"><a href="dropping-missing-values-from-the-data-set.html"><i class="fa fa-check"></i><b>5</b> Dropping Missing values from the data set</a></li>
<li class="chapter" data-level="6" data-path="working-with-factors.html"><a href="working-with-factors.html"><i class="fa fa-check"></i><b>6</b> Working with Factors</a>
<ul>
<li class="chapter" data-level="6.1" data-path="working-with-factors.html"><a href="working-with-factors.html#manually-recodechange-a-factors-levels"><i class="fa fa-check"></i><b>6.1</b> Manually recode/change a factor’s levels</a></li>
<li class="chapter" data-level="6.2" data-path="working-with-factors.html"><a href="working-with-factors.html#collapse-factor-levels"><i class="fa fa-check"></i><b>6.2</b> Collapse factor levels</a></li>
<li class="chapter" data-level="6.3" data-path="working-with-factors.html"><a href="working-with-factors.html#add-levels-to-a-factor"><i class="fa fa-check"></i><b>6.3</b> Add levels to a factor</a></li>
<li class="chapter" data-level="6.4" data-path="working-with-factors.html"><a href="working-with-factors.html#drop-unused-levels"><i class="fa fa-check"></i><b>6.4</b> Drop unused levels</a></li>
<li class="chapter" data-level="6.5" data-path="working-with-factors.html"><a href="working-with-factors.html#change-the-order-of-a-factors-levels"><i class="fa fa-check"></i><b>6.5</b> Change the order of a factor’s levels</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-with-strings.html"><a href="working-with-strings.html"><i class="fa fa-check"></i><b>7</b> Working with Strings</a>
<ul>
<li class="chapter" data-level="7.1" data-path="working-with-strings.html"><a href="working-with-strings.html#remove-a-pattern-from-a-string"><i class="fa fa-check"></i><b>7.1</b> Remove a pattern from a string</a></li>
<li class="chapter" data-level="7.2" data-path="working-with-strings.html"><a href="working-with-strings.html#replace-one-pattern-in-a-string-with-another"><i class="fa fa-check"></i><b>7.2</b> Replace one pattern in a string with another</a></li>
<li class="chapter" data-level="7.3" data-path="working-with-strings.html"><a href="working-with-strings.html#find-i.e.-filter-for-all-instances-of-a-string"><i class="fa fa-check"></i><b>7.3</b> Find (i.e., filter for) All instances of a string</a></li>
<li class="chapter" data-level="7.4" data-path="working-with-strings.html"><a href="working-with-strings.html#force-all-letters-to-lower-case"><i class="fa fa-check"></i><b>7.4</b> Force all letters to lower case</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html"><i class="fa fa-check"></i><b>8</b> Figures and Graphs</a>
<ul>
<li class="chapter" data-level="8.1" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#commands-for-graph-types"><i class="fa fa-check"></i><b>8.1</b> Commands for graph types</a></li>
<li class="chapter" data-level="8.2" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#highlight-specific-points"><i class="fa fa-check"></i><b>8.2</b> Highlight specific points</a></li>
<li class="chapter" data-level="8.3" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#add-labels-to-data-points"><i class="fa fa-check"></i><b>8.3</b> Add labels to data points</a></li>
<li class="chapter" data-level="8.4" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#plotting-multiple-graphs-at-once"><i class="fa fa-check"></i><b>8.4</b> Plotting multiple graphs at once</a></li>
<li class="chapter" data-level="8.5" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#change-the-colors-bars-columns-dots-etc."><i class="fa fa-check"></i><b>8.5</b> Change the colors (bars; columns; dots; etc.)</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#fine-tuning-colors"><i class="fa fa-check"></i><b>8.5.1</b> Fine-tuning colors</a></li>
<li class="chapter" data-level="8.5.2" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#more-options"><i class="fa fa-check"></i><b>8.5.2</b> More options</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#other-aesthetic-mappings"><i class="fa fa-check"></i><b>8.6</b> Other aesthetic mappings</a></li>
<li class="chapter" data-level="8.7" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#adding-and-customizing-text"><i class="fa fa-check"></i><b>8.7</b> Adding and Customizing Text</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#add-a-title-axis-labels-and-captions"><i class="fa fa-check"></i><b>8.7.1</b> Add a title, axis labels, and captions</a></li>
<li class="chapter" data-level="8.7.2" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#center-graph-title"><i class="fa fa-check"></i><b>8.7.2</b> Center graph title</a></li>
<li class="chapter" data-level="8.7.3" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#use-different-fonts"><i class="fa fa-check"></i><b>8.7.3</b> Use different fonts</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#remove-gridlines"><i class="fa fa-check"></i><b>8.8</b> Remove gridlines</a></li>
<li class="chapter" data-level="8.9" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#faceting"><i class="fa fa-check"></i><b>8.9</b> Faceting</a></li>
<li class="chapter" data-level="8.10" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#log-transformations"><i class="fa fa-check"></i><b>8.10</b> Log transformations</a></li>
<li class="chapter" data-level="8.11" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#changing-the-scale-of-the-axis"><i class="fa fa-check"></i><b>8.11</b> Changing the scale of the axis</a></li>
<li class="chapter" data-level="8.12" data-path="figures-and-graphs.html"><a href="figures-and-graphs.html#add-a-regression-line"><i class="fa fa-check"></i><b>8.12</b> Add a regression line</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html"><i class="fa fa-check"></i><b>9</b> Making Tables with flextable</a>
<ul>
<li class="chapter" data-level="9.1" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#apa-table-components"><i class="fa fa-check"></i><b>9.1</b> APA Table Components</a></li>
<li class="chapter" data-level="9.2" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#indent-values"><i class="fa fa-check"></i><b>9.2</b> Indent values</a></li>
<li class="chapter" data-level="9.3" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#add-a-horizontal-border"><i class="fa fa-check"></i><b>9.3</b> Add a Horizontal border</a></li>
<li class="chapter" data-level="9.4" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#change-font-and-font-size"><i class="fa fa-check"></i><b>9.4</b> Change font and font size</a></li>
<li class="chapter" data-level="9.5" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#grouped-table"><i class="fa fa-check"></i><b>9.5</b> Grouped table</a></li>
<li class="chapter" data-level="9.6" data-path="making-tables-with-flextable.html"><a href="making-tables-with-flextable.html#complete-example"><i class="fa fa-check"></i><b>9.6</b> Complete Example</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="misc-stuff.html"><a href="misc-stuff.html"><i class="fa fa-check"></i><b>10</b> Misc. Stuff</a>
<ul>
<li class="chapter" data-level="10.1" data-path="misc-stuff.html"><a href="misc-stuff.html#scrape-web-pages-for-data-tables"><i class="fa fa-check"></i><b>10.1</b> Scrape web pages for data tables</a></li>
<li class="chapter" data-level="10.2" data-path="misc-stuff.html"><a href="misc-stuff.html#read-spss-files-into-r"><i class="fa fa-check"></i><b>10.2</b> Read SPSS files into R</a></li>
<li class="chapter" data-level="10.3" data-path="misc-stuff.html"><a href="misc-stuff.html#turn-numbers-into-percentages"><i class="fa fa-check"></i><b>10.3</b> Turn numbers into percentages</a></li>
<li class="chapter" data-level="10.4" data-path="misc-stuff.html"><a href="misc-stuff.html#find-all-possible-combindations-of-items-in-a-vector"><i class="fa fa-check"></i><b>10.4</b> Find all possible combindations of items in a vector</a></li>
<li class="chapter" data-level="10.5" data-path="misc-stuff.html"><a href="misc-stuff.html#download-files-from-the-internet"><i class="fa fa-check"></i><b>10.5</b> Download files from the internet</a></li>
<li class="chapter" data-level="10.6" data-path="misc-stuff.html"><a href="misc-stuff.html#print-multiple-things-in-one-statement"><i class="fa fa-check"></i><b>10.6</b> Print multiple things in one statement</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html"><i class="fa fa-check"></i><b>11</b> Functions, Loops, and Iterative Programming</a>
<ul>
<li class="chapter" data-level="11.1" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html#functions"><i class="fa fa-check"></i><b>11.1</b> Functions</a></li>
<li class="chapter" data-level="11.2" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html#for-loops"><i class="fa fa-check"></i><b>11.2</b> For-loops</a></li>
<li class="chapter" data-level="11.3" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html#purrr-and-iterative-loops"><i class="fa fa-check"></i><b>11.3</b> Purrr and iterative loops</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html#useful-ways-to-use-map"><i class="fa fa-check"></i><b>11.3.1</b> Useful ways to use map()</a></li>
<li class="chapter" data-level="11.3.2" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html#walkthrough-case-example"><i class="fa fa-check"></i><b>11.3.2</b> Walkthrough Case Example</a></li>
<li class="chapter" data-level="11.3.3" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html#do-for-one"><i class="fa fa-check"></i><b>11.3.3</b> Do for One</a></li>
<li class="chapter" data-level="11.3.4" data-path="functions-loops-and-iterative-programming.html"><a href="functions-loops-and-iterative-programming.html#do-for-all"><i class="fa fa-check"></i><b>11.3.4</b> DO FOR ALL</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html"><i class="fa fa-check"></i><b>12</b> Intro to R Markdown</a>
<ul>
<li class="chapter" data-level="12.1" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#writing-math-equations-and-symbols"><i class="fa fa-check"></i><b>12.1</b> Writing math equations and symbols</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#greek-symbols"><i class="fa fa-check"></i><b>12.1.1</b> Greek symbols</a></li>
<li class="chapter" data-level="12.1.2" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#math-notation"><i class="fa fa-check"></i><b>12.1.2</b> Math notation</a></li>
<li class="chapter" data-level="12.1.3" data-path="intro-to-r-markdown.html"><a href="intro-to-r-markdown.html#statistics-notation"><i class="fa fa-check"></i><b>12.1.3</b> Statistics notation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html"><i class="fa fa-check"></i><b>13</b> Statistics and Psych-specific Stuff</a>
<ul>
<li class="chapter" data-level="13.1" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#create-or-sample-from-a-distribution"><i class="fa fa-check"></i><b>13.1</b> Create or sample from a distribution</a></li>
<li class="chapter" data-level="13.2" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#find-cohens-kappa-interrater-reliability"><i class="fa fa-check"></i><b>13.2</b> Find Cohen’s Kappa (Interrater reliability)</a></li>
<li class="chapter" data-level="13.3" data-path="statistics-and-psych-specific-stuff.html"><a href="statistics-and-psych-specific-stuff.html#reverse-code-a-variable"><i class="fa fa-check"></i><b>13.3</b> Reverse-code a variable</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html"><i class="fa fa-check"></i><b>14</b> Coding Tips and Tricks</a>
<ul>
<li class="chapter" data-level="14.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#regular-r-stuff"><i class="fa fa-check"></i><b>14.1</b> Regular R stuff</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#regex-expressions-and-symbols"><i class="fa fa-check"></i><b>14.1.1</b> Regex expressions and symbols</a></li>
<li class="chapter" data-level="14.1.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#the-new-pipe-base-r"><i class="fa fa-check"></i><b>14.1.2</b> The new pipe (Base R)</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#tidyverse-stuff"><i class="fa fa-check"></i><b>14.2</b> Tidyverse stuff</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#sometimes-when-making-a-function-you-need-to-use-the-colon-equals-operator-rather-than-just-the-normal---or-assignment-operators"><i class="fa fa-check"></i><b>14.2.1</b> Sometimes when making a function you need to use the colon-equals operator, rather than just the normal &lt;- or = assignment operators</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#function-related-stuff"><i class="fa fa-check"></i><b>14.3</b> Function-related stuff</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#user-supplied-expressions-or-named-columns-in-functions"><i class="fa fa-check"></i><b>14.3.1</b> User-supplied expressions or named columns in functions</a></li>
<li class="chapter" data-level="14.3.2" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time"><i class="fa fa-check"></i><b>14.3.2</b> When a command requires a named column or data set, but you’ve already supplied it and it’s required a second time</a></li>
<li class="chapter" data-level="14.3.3" data-path="coding-tips-and-tricks.html"><a href="coding-tips-and-tricks.html#formulas-within-functions"><i class="fa fa-check"></i><b>14.3.3</b> Formulas within functions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Coding Compendium</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="wrangle-data" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Wrangle Data</h1>
<p>This chapter contains useful tips on wrangling (i.e., manipulating) data. If you need to know to do to things like create new variables, split one variable into multiple variables, pivot a data set from wide to long, etc., look no further.</p>
<p>If you want a pretty good intro tutorial to the <code>dplyr</code> package, click <a href="https://www-r--bloggers-com.cdn.ampproject.org/v/s/www.r-bloggers.com/2021/01/how-to-analyze-data-with-r-a-complete-beginner-guide-to-dplyr/amp/?amp_js_v=a6&amp;gsa=1&amp;usqp=mq331AQFKAGwASA%3D#csi=0&amp;referrer=https%3A%2F%2Fwww.google.com&amp;tf=From%20%251%24s&amp;ampshare=https%3A%2F%2Fwww.r-bloggers.com%2F2021%2F01%2Fhow-to-analyze-data-with-r-a-complete-beginner-guide-to-dplyr%2F">here</a></p>
<div id="joining-or-splitting" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Joining or Splitting</h2>
<p>Joining and splitting data is pretty straightforward….</p>
<div id="whole-data-sets" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Whole Data Sets</h3>
<p>The code below is from <a href="https://www.youtube.com/watch?v=SCdmyyoudb8&amp;t=23s">this excellent tutorial</a></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="wrangle-data.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2018</span>)</span>
<span id="cb10-2"><a href="wrangle-data.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="wrangle-data.html#cb10-3" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">customer_id=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb10-4"><a href="wrangle-data.html#cb10-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">product=</span><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&#39;toaster&#39;</span>,<span class="st">&#39;TV&#39;</span>,<span class="st">&#39;Dishwasher&#39;</span>),<span class="dv">10</span>,<span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-5"><a href="wrangle-data.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="wrangle-data.html#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="wrangle-data.html#cb10-7" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">customer_id=</span><span class="fu">c</span>(<span class="fu">sample</span>(df1<span class="sc">$</span>customer_id, <span class="dv">5</span>)),<span class="at">state=</span><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&#39;New York&#39;</span>,<span class="st">&#39;California&#39;</span>),<span class="dv">5</span>,<span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-8"><a href="wrangle-data.html#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="wrangle-data.html#cb10-9" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(df1)</span>
<span id="cb10-10"><a href="wrangle-data.html#cb10-10" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(df2)</span>
<span id="cb10-11"><a href="wrangle-data.html#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="wrangle-data.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># df1 =left table</span></span>
<span id="cb10-13"><a href="wrangle-data.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># df2= right table</span></span></code></pre></div>
<p>Inner join - retains only rows with values that appear in both tables, and matches by keys.</p>
<p><em>If you’re joining two Qualtrics surveys together, this is most likely the one you want to use (e.g. matching by participant name, and only keeping rows in the joined data set for participants that have responses logged in both survey 1 and survey 2</em></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="wrangle-data.html#cb11-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   customer_id product    state   
##         &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
## 1           1 Dishwasher New York
## 2           3 Dishwasher New York
## 3           6 toaster    New York
## 4           8 Dishwasher New York
## 5           9 Dishwasher New York</code></pre>
<p>Left join - returns everything in the left, and rows with matching keys in the right</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="wrangle-data.html#cb13-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    customer_id product    state   
##          &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
##  1           1 Dishwasher New York
##  2           2 Dishwasher &lt;NA&gt;    
##  3           3 Dishwasher New York
##  4           4 toaster    &lt;NA&gt;    
##  5           5 TV         &lt;NA&gt;    
##  6           6 toaster    New York
##  7           7 toaster    &lt;NA&gt;    
##  8           8 Dishwasher New York
##  9           9 Dishwasher New York
## 10          10 TV         &lt;NA&gt;</code></pre>
<p>Right join - returns everything in the right, and rows with matching keys in the left</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="wrangle-data.html#cb15-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   customer_id product    state   
##         &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
## 1           1 Dishwasher New York
## 2           3 Dishwasher New York
## 3           6 toaster    New York
## 4           8 Dishwasher New York
## 5           9 Dishwasher New York</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="wrangle-data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note: example if the customer id column was named something different in the second df</span></span>
<span id="cb17-2"><a href="wrangle-data.html#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#df1 %&gt;% left_join(df2,by=c(&#39;customer_id&#39;=&#39;name2&#39;))</span></span></code></pre></div>
<p>Full join - retain all rows from both tables, and join matching keys in both right and left</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="wrangle-data.html#cb18-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    customer_id product    state   
##          &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
##  1           1 Dishwasher New York
##  2           2 Dishwasher &lt;NA&gt;    
##  3           3 Dishwasher New York
##  4           4 toaster    &lt;NA&gt;    
##  5           5 TV         &lt;NA&gt;    
##  6           6 toaster    New York
##  7           7 toaster    &lt;NA&gt;    
##  8           8 Dishwasher New York
##  9           9 Dishwasher New York
## 10          10 TV         &lt;NA&gt;</code></pre>
<p>Anti join - returns all rows in the left that do not have matching keys in the right</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="wrangle-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">anti_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   customer_id product   
##         &lt;int&gt; &lt;chr&gt;     
## 1           2 Dishwasher
## 2           4 toaster   
## 3           5 TV        
## 4           7 toaster   
## 5          10 TV</code></pre>
</div>
<div id="individual-columnsvariables" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Individual Columns/Variables</h3>
<p>Splitting or joining columns is much easier than doing it to whole data sets. You can use <code>dplyr::separate()</code> to accomplish the former, and <code>dplyr::unite()</code> for the latter.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="wrangle-data.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;hello&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;hello&quot;</code></pre>
</div>
</div>
<div id="selecting-specific-columnsvariables" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Selecting specific columns/variables</h2>
<p>Sometimes when working with a data set, you want to work with a few <em>specific</em> variables. For instance, maybe you want to view a graph of only reverse-coded variables (which start with the prefix “r”); or maybe you want to create a subset of your data that has a few specific variables removed. For this you can use <code>dplyr::select()</code> and its associated helper commands</p>
<p><code>select()</code> can be thought of as “extract”; it tells R to identify and “extract” a specific variable (or variables)</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="wrangle-data.html#cb24-1" aria-hidden="true" tabindex="-1"></a>cars<span class="ot">=</span>mtcars</span>
<span id="cb24-2"><a href="wrangle-data.html#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="wrangle-data.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select one column</span></span>
<span id="cb24-4"><a href="wrangle-data.html#cb24-4" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(mpg)</span>
<span id="cb24-5"><a href="wrangle-data.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="wrangle-data.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># select multiple columns, if they are all next to one another</span></span>
<span id="cb24-7"><a href="wrangle-data.html#cb24-7" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(mpg<span class="sc">:</span>hp)</span>
<span id="cb24-8"><a href="wrangle-data.html#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="wrangle-data.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># select multiple columns by name (when not next to one another) by defining them in a vector</span></span>
<span id="cb24-10"><a href="wrangle-data.html#cb24-10" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(mpg, hp, wt))</span>
<span id="cb24-11"><a href="wrangle-data.html#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="wrangle-data.html#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># select only variables that start with a certain prefix/character/pattern/etc.</span></span>
<span id="cb24-13"><a href="wrangle-data.html#cb24-13" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;d&quot;</span>))</span>
<span id="cb24-14"><a href="wrangle-data.html#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="wrangle-data.html#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ...or columns that end with a certain prefix/etc.</span></span>
<span id="cb24-16"><a href="wrangle-data.html#cb24-16" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;t&quot;</span>))</span>
<span id="cb24-17"><a href="wrangle-data.html#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="wrangle-data.html#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co"># ...or contains a certain pattern or string</span></span>
<span id="cb24-19"><a href="wrangle-data.html#cb24-19" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;se&quot;</span>))</span>
<span id="cb24-20"><a href="wrangle-data.html#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="wrangle-data.html#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co"># select ALL OF the variables in a data set that match those of a pre-defined vector</span></span>
<span id="cb24-22"><a href="wrangle-data.html#cb24-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-23"><a href="wrangle-data.html#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># first define the names in a vector</span></span>
<span id="cb24-24"><a href="wrangle-data.html#cb24-24" aria-hidden="true" tabindex="-1"></a>  vars<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;hp&quot;</span>, <span class="st">&quot;drat&quot;</span>, <span class="st">&quot;gear&quot;</span>, <span class="st">&quot;carb&quot;</span>)</span>
<span id="cb24-25"><a href="wrangle-data.html#cb24-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-26"><a href="wrangle-data.html#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">#now use helper</span></span>
<span id="cb24-27"><a href="wrangle-data.html#cb24-27" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(vars))</span>
<span id="cb24-28"><a href="wrangle-data.html#cb24-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-29"><a href="wrangle-data.html#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="co"># select ANY OF the variables in a pre-defined vector</span></span>
<span id="cb24-30"><a href="wrangle-data.html#cb24-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-31"><a href="wrangle-data.html#cb24-31" aria-hidden="true" tabindex="-1"></a>  vars_2<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;hp&quot;</span>, <span class="st">&quot;drat&quot;</span>, <span class="st">&quot;watermelon&quot;</span>, <span class="st">&quot;grilled_cheese&quot;</span>) <span class="co"># only the first two will be in the data</span></span>
<span id="cb24-32"><a href="wrangle-data.html#cb24-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-33"><a href="wrangle-data.html#cb24-33" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vars_2)) <span class="co"># only (and all of) the variables actually PRESENT in the data are pulled</span></span>
<span id="cb24-34"><a href="wrangle-data.html#cb24-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-35"><a href="wrangle-data.html#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="co"># select only variables of a certain class or type</span></span>
<span id="cb24-36"><a href="wrangle-data.html#cb24-36" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span>
<span id="cb24-37"><a href="wrangle-data.html#cb24-37" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.character))</span></code></pre></div>
<p>Other examples can be seen on <a href="https://tidyselect.r-lib.org/reference/language.html">THIS LINK</a> for a simple but detailed guide.</p>
</div>
<div id="if-if-then-and-case-when" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> If, If-then, and Case-when</h2>
<div id="if-then" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> If-then</h3>
<p>The premise of an if/then or if/else statement is simple: “If condition 1 is satisfied, perform x operation; if not, then do y”</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="wrangle-data.html#cb25-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">power_level=</span><span class="fu">ifelse</span>(mtcars<span class="sc">$</span>hp<span class="sc">&lt;</span><span class="dv">350</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>)) <span class="co"># if the length in Sepal.Length is &gt;5, set new variable = to &quot;short&quot;; else, set it to &quot;long&quot;</span></span></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb power_level
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4         Low
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4         Low
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1         Low
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1         Low
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2         Low
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1         Low
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4         Low
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2         Low
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2         Low
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4         Low
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4         Low
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3         Low
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3         Low
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3         Low
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4         Low
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4         Low
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4         Low
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1         Low
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2         Low
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1         Low
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1         Low
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2         Low
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2         Low
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4         Low
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2         Low
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1         Low
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2         Low
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2         Low
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4         Low
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6         Low
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8         Low
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2         Low</code></pre>
</div>
<div id="case-when" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Case-when</h3>
<p>When you have 3+ conditions, it’s easier to use case-when. This is a more simple and straightforward approach than nesting multiple if-else commands</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="wrangle-data.html#cb27-1" aria-hidden="true" tabindex="-1"></a>My_vector<span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb27-2"><a href="wrangle-data.html#cb27-2" aria-hidden="true" tabindex="-1"></a>    Condition1 <span class="sc">~</span> value1,</span>
<span id="cb27-3"><a href="wrangle-data.html#cb27-3" aria-hidden="true" tabindex="-1"></a>    Condition2 <span class="sc">~</span> value2,</span>
<span id="cb27-4"><a href="wrangle-data.html#cb27-4" aria-hidden="true" tabindex="-1"></a>    Condition3 <span class="sc">~</span> value3</span>
<span id="cb27-5"><a href="wrangle-data.html#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> valueForEverythingElse <span class="co">#catch all for things that don&#39;t meet the above conditions</span></span>
<span id="cb27-6"><a href="wrangle-data.html#cb27-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="wrangle-data.html#cb28-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">test=</span> <span class="fu">case_when</span>(cyl<span class="sc">==</span><span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;small&quot;</span>,</span>
<span id="cb28-2"><a href="wrangle-data.html#cb28-2" aria-hidden="true" tabindex="-1"></a>                                  cyl<span class="sc">==</span><span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;medium&quot;</span>,</span>
<span id="cb28-3"><a href="wrangle-data.html#cb28-3" aria-hidden="true" tabindex="-1"></a>                                  cyl<span class="sc">==</span><span class="dv">8</span> <span class="sc">~</span> <span class="st">&quot;large&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="wrangle-data.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(cyl,test))</span></code></pre></div>
<pre><code>##                     cyl   test
## Mazda RX4             6 medium
## Mazda RX4 Wag         6 medium
## Datsun 710            4  small
## Hornet 4 Drive        6 medium
## Hornet Sportabout     8  large
## Valiant               6 medium
## Duster 360            8  large
## Merc 240D             4  small
## Merc 230              4  small
## Merc 280              6 medium
## Merc 280C             6 medium
## Merc 450SE            8  large
## Merc 450SL            8  large
## Merc 450SLC           8  large
## Cadillac Fleetwood    8  large
## Lincoln Continental   8  large
## Chrysler Imperial     8  large
## Fiat 128              4  small
## Honda Civic           4  small
## Toyota Corolla        4  small
## Toyota Corona         4  small
## Dodge Challenger      8  large
## AMC Javelin           8  large
## Camaro Z28            8  large
## Pontiac Firebird      8  large
## Fiat X1-9             4  small
## Porsche 914-2         4  small
## Lotus Europa          4  small
## Ford Pantera L        8  large
## Ferrari Dino          6 medium
## Maserati Bora         8  large
## Volvo 142E            4  small</code></pre>
</div>
</div>
<div id="merge-or-collapse-variables" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Merge or Collapse variables</h2>
<p>Sometimes you’ll have multiple variables and you want to collapse them into a single variable. The <code>pmin()</code> command is useful for this</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="wrangle-data.html#cb30-1" aria-hidden="true" tabindex="-1"></a>example_data<span class="ot">=</span><span class="fu">tribble</span>(<span class="sc">~</span>A,<span class="sc">~</span>B,<span class="sc">~</span>C,</span>
<span id="cb30-2"><a href="wrangle-data.html#cb30-2" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">1</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,</span>
<span id="cb30-3"><a href="wrangle-data.html#cb30-3" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">2</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,</span>
<span id="cb30-4"><a href="wrangle-data.html#cb30-4" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">3</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,</span>
<span id="cb30-5"><a href="wrangle-data.html#cb30-5" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">NA</span>,<span class="dv">4</span>,<span class="cn">NA</span>,</span>
<span id="cb30-6"><a href="wrangle-data.html#cb30-6" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">NA</span>,<span class="dv">5</span>,<span class="cn">NA</span>,</span>
<span id="cb30-7"><a href="wrangle-data.html#cb30-7" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">NA</span>,<span class="dv">6</span>,<span class="cn">NA</span>,</span>
<span id="cb30-8"><a href="wrangle-data.html#cb30-8" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">7</span>,</span>
<span id="cb30-9"><a href="wrangle-data.html#cb30-9" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">8</span>,</span>
<span id="cb30-10"><a href="wrangle-data.html#cb30-10" aria-hidden="true" tabindex="-1"></a>                     <span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">9</span>)</span>
<span id="cb30-11"><a href="wrangle-data.html#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="wrangle-data.html#cb30-12" aria-hidden="true" tabindex="-1"></a>example_data <span class="sc">%&gt;%</span></span>
<span id="cb30-13"><a href="wrangle-data.html#cb30-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">accept_reject =</span> </span>
<span id="cb30-14"><a href="wrangle-data.html#cb30-14" aria-hidden="true" tabindex="-1"></a>           <span class="fu">pmin</span>(A,B,C,<span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 9 x 4
##       A     B     C accept_reject
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
## 1     1    NA    NA             1
## 2     2    NA    NA             2
## 3     3    NA    NA             3
## 4    NA     4    NA             4
## 5    NA     5    NA             5
## 6    NA     6    NA             6
## 7    NA    NA     7             7
## 8    NA    NA     8             8
## 9    NA    NA     9             9</code></pre>
</div>
<div id="apply-a-function-to-multiple-variables-at-once" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Apply a function to multiple variables at once</h2>
<p>You can either specify each column individually, like above, or tell R to identify columns for you based on their type or their name. This requires adding in one additional verb–either contains() or where() depending on what you want to do.</p>
<p>Two simple examples:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="wrangle-data.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># turn multiple variables into factors</span></span>
<span id="cb32-2"><a href="wrangle-data.html#cb32-2" aria-hidden="true" tabindex="-1"></a>ex_data<span class="ot">=</span>dplyr<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span>color, <span class="sc">~</span>car,</span>
<span id="cb32-3"><a href="wrangle-data.html#cb32-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;red&quot;</span>, <span class="st">&quot;corvette&quot;</span>,</span>
<span id="cb32-4"><a href="wrangle-data.html#cb32-4" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;chevelle&quot;</span>,</span>
<span id="cb32-5"><a href="wrangle-data.html#cb32-5" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;green&quot;</span>, <span class="st">&quot;camaro&quot;</span>,</span>
<span id="cb32-6"><a href="wrangle-data.html#cb32-6" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;red&quot;</span>, <span class="st">&quot;corvette&quot;</span>,</span>
<span id="cb32-7"><a href="wrangle-data.html#cb32-7" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;green&quot;</span>, <span class="st">&quot;chevelle&quot;</span>,</span>
<span id="cb32-8"><a href="wrangle-data.html#cb32-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;gto&quot;</span>)</span>
<span id="cb32-9"><a href="wrangle-data.html#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="wrangle-data.html#cb32-10" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(ex_data)</span></code></pre></div>
<pre><code>## Rows: 6
## Columns: 2
## $ color &lt;chr&gt; &quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;red&quot;, &quot;green&quot;, &quot;yellow&quot;
## $ car   &lt;chr&gt; &quot;corvette&quot;, &quot;chevelle&quot;, &quot;camaro&quot;, &quot;corvette&quot;, &quot;chevelle&quot;, &quot;gto&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="wrangle-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a>ex_data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(color, car),factor))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   color  car     
##   &lt;fct&gt;  &lt;fct&gt;   
## 1 red    corvette
## 2 blue   chevelle
## 3 green  camaro  
## 4 red    corvette
## 5 green  chevelle
## 6 yellow gto</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="wrangle-data.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># round multiple columns to 1 decimal place</span></span>
<span id="cb36-2"><a href="wrangle-data.html#cb36-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(disp<span class="sc">:</span>qsec),round,<span class="dv">1</span>))</span></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat  wt qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110  3.9 2.6 16.5  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110  3.9 2.9 17.0  0  1    4    4
## Datsun 710          22.8   4 108.0  93  3.9 2.3 18.6  1  1    4    1
## Hornet 4 Drive      21.4   6 258.0 110  3.1 3.2 19.4  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175  3.1 3.4 17.0  0  0    3    2
## Valiant             18.1   6 225.0 105  2.8 3.5 20.2  1  0    3    1
## Duster 360          14.3   8 360.0 245  3.2 3.6 15.8  0  0    3    4
## Merc 240D           24.4   4 146.7  62  3.7 3.2 20.0  1  0    4    2
## Merc 230            22.8   4 140.8  95  3.9 3.1 22.9  1  0    4    2
## Merc 280            19.2   6 167.6 123  3.9 3.4 18.3  1  0    4    4
## Merc 280C           17.8   6 167.6 123  3.9 3.4 18.9  1  0    4    4
## Merc 450SE          16.4   8 275.8 180  3.1 4.1 17.4  0  0    3    3
## Merc 450SL          17.3   8 275.8 180  3.1 3.7 17.6  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180  3.1 3.8 18.0  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205  2.9 5.2 18.0  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215  3.0 5.4 17.8  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230  3.2 5.3 17.4  0  0    3    4
## Fiat 128            32.4   4  78.7  66  4.1 2.2 19.5  1  1    4    1
## Honda Civic         30.4   4  75.7  52  4.9 1.6 18.5  1  1    4    2
## Toyota Corolla      33.9   4  71.1  65  4.2 1.8 19.9  1  1    4    1
## Toyota Corona       21.5   4 120.1  97  3.7 2.5 20.0  1  0    3    1
## Dodge Challenger    15.5   8 318.0 150  2.8 3.5 16.9  0  0    3    2
## AMC Javelin         15.2   8 304.0 150  3.1 3.4 17.3  0  0    3    2
## Camaro Z28          13.3   8 350.0 245  3.7 3.8 15.4  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175  3.1 3.8 17.0  0  0    3    2
## Fiat X1-9           27.3   4  79.0  66  4.1 1.9 18.9  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91  4.4 2.1 16.7  0  1    5    2
## Lotus Europa        30.4   4  95.1 113  3.8 1.5 16.9  1  1    5    2
## Ford Pantera L      15.8   8 351.0 264  4.2 3.2 14.5  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175  3.6 2.8 15.5  0  1    5    6
## Maserati Bora       15.0   8 301.0 335  3.5 3.6 14.6  0  1    5    8
## Volvo 142E          21.4   4 121.0 109  4.1 2.8 18.6  1  1    4    2</code></pre>
</div>
<div id="pivoting-i.e.-transposing-data" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Pivoting (i.e., transposing) data</h2>
<div id="condense-multiple-rows-into-a-single-column-pivot-wide-to-long" class="section level3" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Condense multiple rows into a single column (pivot wide to long)</h3>
<p>Rearranging data like this can make it easier to work with and analyze. Example below from my gradebook for stats (exported from Canvas). The original file had every assignment in its own column, but that is a pain when you’re trying to analyze sums, patterns, etc. across people and assignment categories.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="wrangle-data.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># general command structure</span></span>
<span id="cb38-2"><a href="wrangle-data.html#cb38-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">pivot_longer</span>( <span class="co"># Transpose lengthwise by:</span></span>
<span id="cb38-3"><a href="wrangle-data.html#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(), <span class="co"># Taking ALL variable names...</span></span>
<span id="cb38-4"><a href="wrangle-data.html#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to=</span><span class="st">&quot;variable&quot;</span>, <span class="co"># ...and dumping them into this new variable</span></span>
<span id="cb38-5"><a href="wrangle-data.html#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to=</span><span class="st">&quot;missing_count&quot;</span>) <span class="co">#...then place their values in this new column</span></span></code></pre></div>
<p><strong>NOTE!!!</strong> Pivoting data from wide to long like this expands the number of rows to make a matrix so that (for example, each student now has as a row for each assignment). Therefore, you can only pivot longways (or wide) <strong>ONCE</strong>, otherwise you will make duplicates.</p>
<p><em>If you need to pivot multiple columns, just include all of the columns in one single pivot; do not use two separate, back to back pivot commands.</em></p>
<p>Example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="wrangle-data.html#cb39-1" aria-hidden="true" tabindex="-1"></a>gradebook<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb39-2"><a href="wrangle-data.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>Student, <span class="sc">~</span>Homework<span class="fl">.1</span>, <span class="sc">~</span>Homework<span class="fl">.2</span>, <span class="sc">~</span>Homework<span class="fl">.3</span>, <span class="sc">~</span>Homework<span class="fl">.4</span>, <span class="sc">~</span>Homework<span class="fl">.5</span>, <span class="sc">~</span>Quiz<span class="fl">.1</span>, <span class="sc">~</span>Quiz<span class="fl">.2</span>, <span class="sc">~</span>Quiz<span class="fl">.3</span>, <span class="sc">~</span>Quiz<span class="fl">.4</span>, <span class="sc">~</span>Final,</span>
<span id="cb39-3"><a href="wrangle-data.html#cb39-3" aria-hidden="true" tabindex="-1"></a>     <span class="st">&quot;Bob&quot;</span>,         19L,          0L,          <span class="dv">13</span>,          <span class="dv">16</span>,          0L,      <span class="dv">21</span>,      7L,      <span class="dv">15</span>,    <span class="fl">17.5</span>,     <span class="dv">33</span>,</span>
<span id="cb39-4"><a href="wrangle-data.html#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Jane&quot;</span>,         17L,         19L,          <span class="dv">16</span>,        <span class="fl">16.5</span>,         25L,    <span class="fl">21.5</span>,     19L,   <span class="fl">14.75</span>,     <span class="fl">9.5</span>,   <span class="fl">39.5</span>,</span>
<span id="cb39-5"><a href="wrangle-data.html#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;John&quot;</span>,         19L,         19L,        <span class="fl">14.5</span>,        <span class="fl">19.5</span>,         25L,      <span class="dv">21</span>,     21L,    <span class="fl">18.5</span>,      <span class="dv">17</span>,   <span class="fl">46.5</span></span>
<span id="cb39-6"><a href="wrangle-data.html#cb39-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-7"><a href="wrangle-data.html#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="wrangle-data.html#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gradebook)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 11
##   Student Homework.1 Homework.2 Homework.3 Homework.4 Homework.5 Quiz.1 Quiz.2 Quiz.3 Quiz.4 Final
##   &lt;chr&gt;        &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 Bob             19          0       13         16            0   21        7   15     17.5  33  
## 2 Jane            17         19       16         16.5         25   21.5     19   14.8    9.5  39.5
## 3 John            19         19       14.5       19.5         25   21       21   18.5   17    46.5</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="wrangle-data.html#cb41-1" aria-hidden="true" tabindex="-1"></a>gradebook<span class="ot">=</span>gradebook <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="wrangle-data.html#cb41-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">pivot_longer</span>( <span class="co"># Transpose lengthwise by:</span></span>
<span id="cb41-3"><a href="wrangle-data.html#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> Homework<span class="fl">.1</span><span class="sc">:</span>Final, <span class="co"># Taking these variables</span></span>
<span id="cb41-4"><a href="wrangle-data.html#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to=</span><span class="st">&quot;Assignment&quot;</span>, <span class="co"># ...and dumping them into this new variable, storing them lengthwise</span></span>
<span id="cb41-5"><a href="wrangle-data.html#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to=</span><span class="st">&quot;Points&quot;</span>) <span class="co">#...then place their values in this new column</span></span>
<span id="cb41-6"><a href="wrangle-data.html#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="wrangle-data.html#cb41-7" aria-hidden="true" tabindex="-1"></a>gradebook</span></code></pre></div>
<pre><code>## # A tibble: 30 x 3
##    Student Assignment Points
##    &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;
##  1 Bob     Homework.1   19  
##  2 Bob     Homework.2    0  
##  3 Bob     Homework.3   13  
##  4 Bob     Homework.4   16  
##  5 Bob     Homework.5    0  
##  6 Bob     Quiz.1       21  
##  7 Bob     Quiz.2        7  
##  8 Bob     Quiz.3       15  
##  9 Bob     Quiz.4       17.5
## 10 Bob     Final        33  
## # ... with 20 more rows</code></pre>
</div>
</div>
<div id="managing-many-models" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Managing Many Models</h2>
<p>Imagine the concept of Russian Dolls, applied to data sets. You can manage data sets more effectively my collapsing them into a single tiny, mini data frame, and stuffing that inside of another one.</p>
<p>This is done via “nesting”…</p>
<p>Effectively, you smush/collapse everything down so it fits inside one column. You can unnest to expand this data back out later when you need it, and keep it collapsed when you don’t. Code works like this:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="wrangle-data.html#cb43-1" aria-hidden="true" tabindex="-1"></a>by_country<span class="ot">=</span>gapminder<span class="sc">::</span>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="wrangle-data.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent,country) <span class="sc">%&gt;%</span> <span class="co"># indicate the variables to keep at the top level</span></span>
<span id="cb43-3"><a href="wrangle-data.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="co"># smush the rest into a list-column</span></span>
<span id="cb43-4"><a href="wrangle-data.html#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="wrangle-data.html#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="wrangle-data.html#cb43-6" aria-hidden="true" tabindex="-1"></a>country_model<span class="ot">=</span><span class="cf">function</span>(df){</span>
<span id="cb43-7"><a href="wrangle-data.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(lifExp<span class="sc">~</span>year1950,<span class="at">data =</span> df)</span>
<span id="cb43-8"><a href="wrangle-data.html#cb43-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-9"><a href="wrangle-data.html#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="wrangle-data.html#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform a list of models into a df</span></span>
<span id="cb43-11"><a href="wrangle-data.html#cb43-11" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span>by_country <span class="sc">%&gt;%</span> </span>
<span id="cb43-12"><a href="wrangle-data.html#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mod=</span><span class="fu">map</span>(data,country_model))</span></code></pre></div>
<ul>
<li>You can store anything in a data frame. You can keep the df connected to the model, which makes it very easy to manage a whole slew of related models</li>
<li>You can use functional programming (i.e., iterative functions) to map functions or combinations of functions in new ways.</li>
<li>Converting data into tidy data sets gives you a whole new way (and easier way) to manage lots of information</li>
</ul>
<p>Below is the full script I copied from Hadley Wickham’s lecture, which you can watch <a href="https://www.youtube.com/watch?v=rz3_FDVt9eg">here</a></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="wrangle-data.html#cb44-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dplyr,purrr,tidyverse,gapminder)</span>
<span id="cb44-2"><a href="wrangle-data.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="wrangle-data.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="do">#### Workflow for managing many models in R ####</span></span>
<span id="cb44-4"><a href="wrangle-data.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Nest data with {tidyr}</span></span>
<span id="cb44-5"><a href="wrangle-data.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Use {purrr} to map a modeling function</span></span>
<span id="cb44-6"><a href="wrangle-data.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Use {broom} to inspect your tidy data</span></span>
<span id="cb44-7"><a href="wrangle-data.html#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="wrangle-data.html#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="wrangle-data.html#cb44-9" aria-hidden="true" tabindex="-1"></a>gapminder<span class="ot">=</span>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb44-10"><a href="wrangle-data.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year1950=</span> year<span class="dv">-1950</span>) <span class="co">#the number of years it&#39;s been since 1950</span></span>
<span id="cb44-11"><a href="wrangle-data.html#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="wrangle-data.html#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb44-13"><a href="wrangle-data.html#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="do">#### Step 1. Nest the data. ####</span></span>
<span id="cb44-14"><a href="wrangle-data.html#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="wrangle-data.html#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co"># A nested data frame has one column per country. You&#39;re essentially </span></span>
<span id="cb44-16"><a href="wrangle-data.html#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a Russian doll; a data frame inside of a larger data frame.</span></span>
<span id="cb44-17"><a href="wrangle-data.html#cb44-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-18"><a href="wrangle-data.html#cb44-18" aria-hidden="true" tabindex="-1"></a>by_country<span class="ot">=</span>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb44-19"><a href="wrangle-data.html#cb44-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent,country) <span class="sc">%&gt;%</span> <span class="co"># variables to keep at the top level</span></span>
<span id="cb44-20"><a href="wrangle-data.html#cb44-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="co"># smush everything else into a df, and store this mini-df in its own column</span></span>
<span id="cb44-21"><a href="wrangle-data.html#cb44-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-22"><a href="wrangle-data.html#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="co"># with this, you can have an entire table per row; a whole data frame for each country</span></span>
<span id="cb44-23"><a href="wrangle-data.html#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Essentially condensing a list into a table</span></span>
<span id="cb44-24"><a href="wrangle-data.html#cb44-24" aria-hidden="true" tabindex="-1"></a>by_country<span class="sc">$</span>data[[<span class="dv">1</span>]]</span>
<span id="cb44-25"><a href="wrangle-data.html#cb44-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-26"><a href="wrangle-data.html#cb44-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-27"><a href="wrangle-data.html#cb44-27" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb44-28"><a href="wrangle-data.html#cb44-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-29"><a href="wrangle-data.html#cb44-29" aria-hidden="true" tabindex="-1"></a><span class="do">#### Step 2. Use purrr to map stuff. ####</span></span>
<span id="cb44-30"><a href="wrangle-data.html#cb44-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-31"><a href="wrangle-data.html#cb44-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 12:50</span></span>
<span id="cb44-32"><a href="wrangle-data.html#cb44-32" aria-hidden="true" tabindex="-1"></a>country_model<span class="ot">=</span><span class="cf">function</span>(df){</span>
<span id="cb44-33"><a href="wrangle-data.html#cb44-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(lifeExp <span class="sc">~</span> year1950, <span class="at">data =</span> df)</span>
<span id="cb44-34"><a href="wrangle-data.html#cb44-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-35"><a href="wrangle-data.html#cb44-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-36"><a href="wrangle-data.html#cb44-36" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span> by_country <span class="sc">%&gt;%</span> </span>
<span id="cb44-37"><a href="wrangle-data.html#cb44-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-38"><a href="wrangle-data.html#cb44-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod=</span><span class="fu">map</span>(data,country_model)</span>
<span id="cb44-39"><a href="wrangle-data.html#cb44-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-40"><a href="wrangle-data.html#cb44-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-41"><a href="wrangle-data.html#cb44-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-42"><a href="wrangle-data.html#cb44-42" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb44-43"><a href="wrangle-data.html#cb44-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent,country) <span class="sc">%&gt;%</span> </span>
<span id="cb44-44"><a href="wrangle-data.html#cb44-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb44-45"><a href="wrangle-data.html#cb44-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-46"><a href="wrangle-data.html#cb44-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod=</span> data <span class="sc">%&gt;%</span> <span class="fu">map</span>(country_model)</span>
<span id="cb44-47"><a href="wrangle-data.html#cb44-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-48"><a href="wrangle-data.html#cb44-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-49"><a href="wrangle-data.html#cb44-49" aria-hidden="true" tabindex="-1"></a><span class="co"># 27:11</span></span>
<span id="cb44-50"><a href="wrangle-data.html#cb44-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-51"><a href="wrangle-data.html#cb44-51" aria-hidden="true" tabindex="-1"></a><span class="co">#--------------------------------------------------------------------------------------------</span></span>
<span id="cb44-52"><a href="wrangle-data.html#cb44-52" aria-hidden="true" tabindex="-1"></a><span class="do">##### Step 3. ####</span></span>
<span id="cb44-53"><a href="wrangle-data.html#cb44-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-54"><a href="wrangle-data.html#cb44-54" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates another nested df inside of your main data frame that has the summary stats of each model</span></span>
<span id="cb44-55"><a href="wrangle-data.html#cb44-55" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span>models <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb44-56"><a href="wrangle-data.html#cb44-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">tidy=</span><span class="fu">map</span>(mod, broom<span class="sc">::</span>tidy), <span class="co"># tidy() gives model estimates</span></span>
<span id="cb44-57"><a href="wrangle-data.html#cb44-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">glance=</span><span class="fu">map</span>(mod,broom<span class="sc">::</span>glance), <span class="co"># glance() gives model summaries</span></span>
<span id="cb44-58"><a href="wrangle-data.html#cb44-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">augment=</span><span class="fu">map</span>(mod,broom<span class="sc">::</span>augment) <span class="co"># model coefficients</span></span>
<span id="cb44-59"><a href="wrangle-data.html#cb44-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-60"><a href="wrangle-data.html#cb44-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-61"><a href="wrangle-data.html#cb44-61" aria-hidden="true" tabindex="-1"></a><span class="co"># What can you do with this nest of data frames? </span></span>
<span id="cb44-62"><a href="wrangle-data.html#cb44-62" aria-hidden="true" tabindex="-1"></a><span class="co"># The reverse of step 1; un-nest it to unpack everything!</span></span>
<span id="cb44-63"><a href="wrangle-data.html#cb44-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 34:40</span></span>
<span id="cb44-64"><a href="wrangle-data.html#cb44-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Keeps a massive list of related information neatly organized!</span></span>
<span id="cb44-65"><a href="wrangle-data.html#cb44-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-66"><a href="wrangle-data.html#cb44-66" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,data) <span class="co"># back to where we started</span></span>
<span id="cb44-67"><a href="wrangle-data.html#cb44-67" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,glance, <span class="at">.drop =</span> <span class="cn">TRUE</span>) </span>
<span id="cb44-68"><a href="wrangle-data.html#cb44-68" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,tidy) </span></code></pre></div>
<p>…and here is a version I made of the above to manage many Bayesian models. Admittedly, I’m not really sure how useful this is though.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="wrangle-data.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CONDENSED MASTER TABLE VERSION -----------------------------------------------------------------------------</span></span>
<span id="cb45-2"><a href="wrangle-data.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Models table that has all models condensed</span></span>
<span id="cb45-3"><a href="wrangle-data.html#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="wrangle-data.html#cb45-4" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span><span class="fu">tribble</span>(<span class="sc">~</span>Model_name, <span class="sc">~</span>model_descrip, <span class="sc">~</span>model,</span>
<span id="cb45-5"><a href="wrangle-data.html#cb45-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Thesis_Model&quot;</span>, <span class="st">&quot;Discount and PTS&quot;</span>, Thesis_Model,</span>
<span id="cb45-6"><a href="wrangle-data.html#cb45-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;discount_model&quot;</span>, <span class="st">&quot;Discount variable only&quot;</span>, discount_model,</span>
<span id="cb45-7"><a href="wrangle-data.html#cb45-7" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;PTS_model&quot;</span>, <span class="st">&quot;PTS variable only&quot;</span>, PTS_model</span>
<span id="cb45-8"><a href="wrangle-data.html#cb45-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-9"><a href="wrangle-data.html#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="wrangle-data.html#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up work space</span></span>
<span id="cb45-11"><a href="wrangle-data.html#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="co">#rm(DiscountPrior,Priors_MEmodel,Priors_Interactionmodel)</span></span>
<span id="cb45-12"><a href="wrangle-data.html#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="wrangle-data.html#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Grab and store all model info </span></span>
<span id="cb45-14"><a href="wrangle-data.html#cb45-14" aria-hidden="true" tabindex="-1"></a>models<span class="ot">=</span>models <span class="sc">%&gt;%</span> </span>
<span id="cb45-15"><a href="wrangle-data.html#cb45-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prior_info=</span><span class="fu">map</span>(model,describe_prior),</span>
<span id="cb45-16"><a href="wrangle-data.html#cb45-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">posterior_info=</span><span class="fu">map</span>(model, describe_posterior_fancy),</span>
<span id="cb45-17"><a href="wrangle-data.html#cb45-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">model_performance=</span><span class="fu">map</span>(model,performance<span class="sc">::</span>performance)</span>
<span id="cb45-18"><a href="wrangle-data.html#cb45-18" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb45-19"><a href="wrangle-data.html#cb45-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-20"><a href="wrangle-data.html#cb45-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-21"><a href="wrangle-data.html#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="co"># DO NOT TRY AND VIEW THE TABLE IN A WINDOW!!!! RStan objects are so large they cause R to lock up</span></span>
<span id="cb45-22"><a href="wrangle-data.html#cb45-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Call the model in the console instead</span></span>
<span id="cb45-23"><a href="wrangle-data.html#cb45-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-24"><a href="wrangle-data.html#cb45-24" aria-hidden="true" tabindex="-1"></a><span class="do">#### summon individual model stats ####</span></span>
<span id="cb45-25"><a href="wrangle-data.html#cb45-25" aria-hidden="true" tabindex="-1"></a><span class="fu">describe_prior</span>(models<span class="sc">$</span>model[[<span class="dv">1</span>]]) <span class="co">#by specific model</span></span>
<span id="cb45-26"><a href="wrangle-data.html#cb45-26" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(models<span class="sc">$</span>model,describe_prior) <span class="co"># do for all models at once</span></span>
<span id="cb45-27"><a href="wrangle-data.html#cb45-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-28"><a href="wrangle-data.html#cb45-28" aria-hidden="true" tabindex="-1"></a><span class="co"># or all info for all models at once</span></span>
<span id="cb45-29"><a href="wrangle-data.html#cb45-29" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(models,posterior_info) <span class="sc">%&gt;%</span> </span>
<span id="cb45-30"><a href="wrangle-data.html#cb45-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(model,prior_info,model_descrip))</span></code></pre></div>
</div>
<div id="turn-row-names-into-a-columnvariable" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Turn row names into a column/variable</h2>
<p>Use the <code>rownames()</code> command to turn row names into a variable</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="wrangle-data.html#cb46-1" aria-hidden="true" tabindex="-1"></a>cars<span class="ot">=</span><span class="fu">rownames_to_column</span>(mtcars, <span class="at">var =</span> <span class="st">&quot;car&quot;</span>)</span>
<span id="cb46-2"><a href="wrangle-data.html#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="wrangle-data.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(cars)</span></code></pre></div>
<pre><code>## # A tibble: 32 x 12
##    car                 mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Mazda RX4          21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2 Mazda RX4 Wag      21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3 Datsun 710         22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4 Hornet 4 Drive     21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5 Hornet Sportabout  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6 Valiant            18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7 Duster 360         14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8 Merc 240D          24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9 Merc 230           22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10 Merc 280           19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # ... with 22 more rows</code></pre>
</div>
<div id="how-to-editchange-column-names" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> How to edit/change column names</h2>
<p>TWO WAYS TO DO THIS: Use <code>colnames()</code> (for base R) or <code>rename()</code> (for tidyverse)</p>
<p><code>colnames()</code> pulls up all the column/variable names as a vector. If you want to actually change them, you’ll need to combine this command with something like the sub() or gsub() commands (for base R). I’m going to skip this because…its base R.</p>
<p>To access and change the names faster via tidyverse, run use <code>rename()</code></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="wrangle-data.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># clear R&#39;s memory</span></span>
<span id="cb48-2"><a href="wrangle-data.html#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="wrangle-data.html#cb48-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">&quot;Sepal.blaahhhhhh&quot;</span><span class="ot">=</span><span class="st">&quot;Sepal.Length&quot;</span>)</span></code></pre></div>
<pre><code>##     Sepal.blaahhhhhh Sepal.Width Petal.Length Petal.Width    Species
## 1                5.1         3.5          1.4         0.2     setosa
## 2                4.9         3.0          1.4         0.2     setosa
## 3                4.7         3.2          1.3         0.2     setosa
## 4                4.6         3.1          1.5         0.2     setosa
## 5                5.0         3.6          1.4         0.2     setosa
## 6                5.4         3.9          1.7         0.4     setosa
## 7                4.6         3.4          1.4         0.3     setosa
## 8                5.0         3.4          1.5         0.2     setosa
## 9                4.4         2.9          1.4         0.2     setosa
## 10               4.9         3.1          1.5         0.1     setosa
## 11               5.4         3.7          1.5         0.2     setosa
## 12               4.8         3.4          1.6         0.2     setosa
## 13               4.8         3.0          1.4         0.1     setosa
## 14               4.3         3.0          1.1         0.1     setosa
## 15               5.8         4.0          1.2         0.2     setosa
## 16               5.7         4.4          1.5         0.4     setosa
## 17               5.4         3.9          1.3         0.4     setosa
## 18               5.1         3.5          1.4         0.3     setosa
## 19               5.7         3.8          1.7         0.3     setosa
## 20               5.1         3.8          1.5         0.3     setosa
## 21               5.4         3.4          1.7         0.2     setosa
## 22               5.1         3.7          1.5         0.4     setosa
## 23               4.6         3.6          1.0         0.2     setosa
## 24               5.1         3.3          1.7         0.5     setosa
## 25               4.8         3.4          1.9         0.2     setosa
## 26               5.0         3.0          1.6         0.2     setosa
## 27               5.0         3.4          1.6         0.4     setosa
## 28               5.2         3.5          1.5         0.2     setosa
## 29               5.2         3.4          1.4         0.2     setosa
## 30               4.7         3.2          1.6         0.2     setosa
## 31               4.8         3.1          1.6         0.2     setosa
## 32               5.4         3.4          1.5         0.4     setosa
## 33               5.2         4.1          1.5         0.1     setosa
## 34               5.5         4.2          1.4         0.2     setosa
## 35               4.9         3.1          1.5         0.2     setosa
## 36               5.0         3.2          1.2         0.2     setosa
## 37               5.5         3.5          1.3         0.2     setosa
## 38               4.9         3.6          1.4         0.1     setosa
## 39               4.4         3.0          1.3         0.2     setosa
## 40               5.1         3.4          1.5         0.2     setosa
## 41               5.0         3.5          1.3         0.3     setosa
## 42               4.5         2.3          1.3         0.3     setosa
## 43               4.4         3.2          1.3         0.2     setosa
## 44               5.0         3.5          1.6         0.6     setosa
## 45               5.1         3.8          1.9         0.4     setosa
## 46               4.8         3.0          1.4         0.3     setosa
## 47               5.1         3.8          1.6         0.2     setosa
## 48               4.6         3.2          1.4         0.2     setosa
## 49               5.3         3.7          1.5         0.2     setosa
## 50               5.0         3.3          1.4         0.2     setosa
## 51               7.0         3.2          4.7         1.4 versicolor
## 52               6.4         3.2          4.5         1.5 versicolor
## 53               6.9         3.1          4.9         1.5 versicolor
## 54               5.5         2.3          4.0         1.3 versicolor
## 55               6.5         2.8          4.6         1.5 versicolor
## 56               5.7         2.8          4.5         1.3 versicolor
## 57               6.3         3.3          4.7         1.6 versicolor
## 58               4.9         2.4          3.3         1.0 versicolor
## 59               6.6         2.9          4.6         1.3 versicolor
## 60               5.2         2.7          3.9         1.4 versicolor
## 61               5.0         2.0          3.5         1.0 versicolor
## 62               5.9         3.0          4.2         1.5 versicolor
## 63               6.0         2.2          4.0         1.0 versicolor
## 64               6.1         2.9          4.7         1.4 versicolor
## 65               5.6         2.9          3.6         1.3 versicolor
## 66               6.7         3.1          4.4         1.4 versicolor
## 67               5.6         3.0          4.5         1.5 versicolor
## 68               5.8         2.7          4.1         1.0 versicolor
## 69               6.2         2.2          4.5         1.5 versicolor
## 70               5.6         2.5          3.9         1.1 versicolor
## 71               5.9         3.2          4.8         1.8 versicolor
## 72               6.1         2.8          4.0         1.3 versicolor
## 73               6.3         2.5          4.9         1.5 versicolor
## 74               6.1         2.8          4.7         1.2 versicolor
## 75               6.4         2.9          4.3         1.3 versicolor
## 76               6.6         3.0          4.4         1.4 versicolor
## 77               6.8         2.8          4.8         1.4 versicolor
## 78               6.7         3.0          5.0         1.7 versicolor
## 79               6.0         2.9          4.5         1.5 versicolor
## 80               5.7         2.6          3.5         1.0 versicolor
## 81               5.5         2.4          3.8         1.1 versicolor
## 82               5.5         2.4          3.7         1.0 versicolor
## 83               5.8         2.7          3.9         1.2 versicolor
## 84               6.0         2.7          5.1         1.6 versicolor
## 85               5.4         3.0          4.5         1.5 versicolor
## 86               6.0         3.4          4.5         1.6 versicolor
## 87               6.7         3.1          4.7         1.5 versicolor
## 88               6.3         2.3          4.4         1.3 versicolor
## 89               5.6         3.0          4.1         1.3 versicolor
## 90               5.5         2.5          4.0         1.3 versicolor
## 91               5.5         2.6          4.4         1.2 versicolor
## 92               6.1         3.0          4.6         1.4 versicolor
## 93               5.8         2.6          4.0         1.2 versicolor
## 94               5.0         2.3          3.3         1.0 versicolor
## 95               5.6         2.7          4.2         1.3 versicolor
## 96               5.7         3.0          4.2         1.2 versicolor
## 97               5.7         2.9          4.2         1.3 versicolor
## 98               6.2         2.9          4.3         1.3 versicolor
## 99               5.1         2.5          3.0         1.1 versicolor
## 100              5.7         2.8          4.1         1.3 versicolor
## 101              6.3         3.3          6.0         2.5  virginica
## 102              5.8         2.7          5.1         1.9  virginica
## 103              7.1         3.0          5.9         2.1  virginica
## 104              6.3         2.9          5.6         1.8  virginica
## 105              6.5         3.0          5.8         2.2  virginica
## 106              7.6         3.0          6.6         2.1  virginica
## 107              4.9         2.5          4.5         1.7  virginica
## 108              7.3         2.9          6.3         1.8  virginica
## 109              6.7         2.5          5.8         1.8  virginica
## 110              7.2         3.6          6.1         2.5  virginica
## 111              6.5         3.2          5.1         2.0  virginica
## 112              6.4         2.7          5.3         1.9  virginica
## 113              6.8         3.0          5.5         2.1  virginica
## 114              5.7         2.5          5.0         2.0  virginica
## 115              5.8         2.8          5.1         2.4  virginica
## 116              6.4         3.2          5.3         2.3  virginica
## 117              6.5         3.0          5.5         1.8  virginica
## 118              7.7         3.8          6.7         2.2  virginica
## 119              7.7         2.6          6.9         2.3  virginica
## 120              6.0         2.2          5.0         1.5  virginica
## 121              6.9         3.2          5.7         2.3  virginica
## 122              5.6         2.8          4.9         2.0  virginica
## 123              7.7         2.8          6.7         2.0  virginica
## 124              6.3         2.7          4.9         1.8  virginica
## 125              6.7         3.3          5.7         2.1  virginica
## 126              7.2         3.2          6.0         1.8  virginica
## 127              6.2         2.8          4.8         1.8  virginica
## 128              6.1         3.0          4.9         1.8  virginica
## 129              6.4         2.8          5.6         2.1  virginica
## 130              7.2         3.0          5.8         1.6  virginica
## 131              7.4         2.8          6.1         1.9  virginica
## 132              7.9         3.8          6.4         2.0  virginica
## 133              6.4         2.8          5.6         2.2  virginica
## 134              6.3         2.8          5.1         1.5  virginica
## 135              6.1         2.6          5.6         1.4  virginica
## 136              7.7         3.0          6.1         2.3  virginica
## 137              6.3         3.4          5.6         2.4  virginica
## 138              6.4         3.1          5.5         1.8  virginica
## 139              6.0         3.0          4.8         1.8  virginica
## 140              6.9         3.1          5.4         2.1  virginica
## 141              6.7         3.1          5.6         2.4  virginica
## 142              6.9         3.1          5.1         2.3  virginica
## 143              5.8         2.7          5.1         1.9  virginica
## 144              6.8         3.2          5.9         2.3  virginica
## 145              6.7         3.3          5.7         2.5  virginica
## 146              6.7         3.0          5.2         2.3  virginica
## 147              6.3         2.5          5.0         1.9  virginica
## 148              6.5         3.0          5.2         2.0  virginica
## 149              6.2         3.4          5.4         2.3  virginica
## 150              5.9         3.0          5.1         1.8  virginica</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="wrangle-data.html#cb50-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">&quot;hurr&quot;</span><span class="ot">=</span><span class="st">&quot;Sepal.Length&quot;</span>,</span>
<span id="cb50-2"><a href="wrangle-data.html#cb50-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;durr&quot;</span><span class="ot">=</span><span class="st">&quot;Sepal.Width&quot;</span>,</span>
<span id="cb50-3"><a href="wrangle-data.html#cb50-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;abcdefgh&quot;</span><span class="ot">=</span><span class="st">&quot;Species&quot;</span>)</span></code></pre></div>
<pre><code>##     hurr durr Petal.Length Petal.Width   abcdefgh
## 1    5.1  3.5          1.4         0.2     setosa
## 2    4.9  3.0          1.4         0.2     setosa
## 3    4.7  3.2          1.3         0.2     setosa
## 4    4.6  3.1          1.5         0.2     setosa
## 5    5.0  3.6          1.4         0.2     setosa
## 6    5.4  3.9          1.7         0.4     setosa
## 7    4.6  3.4          1.4         0.3     setosa
## 8    5.0  3.4          1.5         0.2     setosa
## 9    4.4  2.9          1.4         0.2     setosa
## 10   4.9  3.1          1.5         0.1     setosa
## 11   5.4  3.7          1.5         0.2     setosa
## 12   4.8  3.4          1.6         0.2     setosa
## 13   4.8  3.0          1.4         0.1     setosa
## 14   4.3  3.0          1.1         0.1     setosa
## 15   5.8  4.0          1.2         0.2     setosa
## 16   5.7  4.4          1.5         0.4     setosa
## 17   5.4  3.9          1.3         0.4     setosa
## 18   5.1  3.5          1.4         0.3     setosa
## 19   5.7  3.8          1.7         0.3     setosa
## 20   5.1  3.8          1.5         0.3     setosa
## 21   5.4  3.4          1.7         0.2     setosa
## 22   5.1  3.7          1.5         0.4     setosa
## 23   4.6  3.6          1.0         0.2     setosa
## 24   5.1  3.3          1.7         0.5     setosa
## 25   4.8  3.4          1.9         0.2     setosa
## 26   5.0  3.0          1.6         0.2     setosa
## 27   5.0  3.4          1.6         0.4     setosa
## 28   5.2  3.5          1.5         0.2     setosa
## 29   5.2  3.4          1.4         0.2     setosa
## 30   4.7  3.2          1.6         0.2     setosa
## 31   4.8  3.1          1.6         0.2     setosa
## 32   5.4  3.4          1.5         0.4     setosa
## 33   5.2  4.1          1.5         0.1     setosa
## 34   5.5  4.2          1.4         0.2     setosa
## 35   4.9  3.1          1.5         0.2     setosa
## 36   5.0  3.2          1.2         0.2     setosa
## 37   5.5  3.5          1.3         0.2     setosa
## 38   4.9  3.6          1.4         0.1     setosa
## 39   4.4  3.0          1.3         0.2     setosa
## 40   5.1  3.4          1.5         0.2     setosa
## 41   5.0  3.5          1.3         0.3     setosa
## 42   4.5  2.3          1.3         0.3     setosa
## 43   4.4  3.2          1.3         0.2     setosa
## 44   5.0  3.5          1.6         0.6     setosa
## 45   5.1  3.8          1.9         0.4     setosa
## 46   4.8  3.0          1.4         0.3     setosa
## 47   5.1  3.8          1.6         0.2     setosa
## 48   4.6  3.2          1.4         0.2     setosa
## 49   5.3  3.7          1.5         0.2     setosa
## 50   5.0  3.3          1.4         0.2     setosa
## 51   7.0  3.2          4.7         1.4 versicolor
## 52   6.4  3.2          4.5         1.5 versicolor
## 53   6.9  3.1          4.9         1.5 versicolor
## 54   5.5  2.3          4.0         1.3 versicolor
## 55   6.5  2.8          4.6         1.5 versicolor
## 56   5.7  2.8          4.5         1.3 versicolor
## 57   6.3  3.3          4.7         1.6 versicolor
## 58   4.9  2.4          3.3         1.0 versicolor
## 59   6.6  2.9          4.6         1.3 versicolor
## 60   5.2  2.7          3.9         1.4 versicolor
## 61   5.0  2.0          3.5         1.0 versicolor
## 62   5.9  3.0          4.2         1.5 versicolor
## 63   6.0  2.2          4.0         1.0 versicolor
## 64   6.1  2.9          4.7         1.4 versicolor
## 65   5.6  2.9          3.6         1.3 versicolor
## 66   6.7  3.1          4.4         1.4 versicolor
## 67   5.6  3.0          4.5         1.5 versicolor
## 68   5.8  2.7          4.1         1.0 versicolor
## 69   6.2  2.2          4.5         1.5 versicolor
## 70   5.6  2.5          3.9         1.1 versicolor
## 71   5.9  3.2          4.8         1.8 versicolor
## 72   6.1  2.8          4.0         1.3 versicolor
## 73   6.3  2.5          4.9         1.5 versicolor
## 74   6.1  2.8          4.7         1.2 versicolor
## 75   6.4  2.9          4.3         1.3 versicolor
## 76   6.6  3.0          4.4         1.4 versicolor
## 77   6.8  2.8          4.8         1.4 versicolor
## 78   6.7  3.0          5.0         1.7 versicolor
## 79   6.0  2.9          4.5         1.5 versicolor
## 80   5.7  2.6          3.5         1.0 versicolor
## 81   5.5  2.4          3.8         1.1 versicolor
## 82   5.5  2.4          3.7         1.0 versicolor
## 83   5.8  2.7          3.9         1.2 versicolor
## 84   6.0  2.7          5.1         1.6 versicolor
## 85   5.4  3.0          4.5         1.5 versicolor
## 86   6.0  3.4          4.5         1.6 versicolor
## 87   6.7  3.1          4.7         1.5 versicolor
## 88   6.3  2.3          4.4         1.3 versicolor
## 89   5.6  3.0          4.1         1.3 versicolor
## 90   5.5  2.5          4.0         1.3 versicolor
## 91   5.5  2.6          4.4         1.2 versicolor
## 92   6.1  3.0          4.6         1.4 versicolor
## 93   5.8  2.6          4.0         1.2 versicolor
## 94   5.0  2.3          3.3         1.0 versicolor
## 95   5.6  2.7          4.2         1.3 versicolor
## 96   5.7  3.0          4.2         1.2 versicolor
## 97   5.7  2.9          4.2         1.3 versicolor
## 98   6.2  2.9          4.3         1.3 versicolor
## 99   5.1  2.5          3.0         1.1 versicolor
## 100  5.7  2.8          4.1         1.3 versicolor
## 101  6.3  3.3          6.0         2.5  virginica
## 102  5.8  2.7          5.1         1.9  virginica
## 103  7.1  3.0          5.9         2.1  virginica
## 104  6.3  2.9          5.6         1.8  virginica
## 105  6.5  3.0          5.8         2.2  virginica
## 106  7.6  3.0          6.6         2.1  virginica
## 107  4.9  2.5          4.5         1.7  virginica
## 108  7.3  2.9          6.3         1.8  virginica
## 109  6.7  2.5          5.8         1.8  virginica
## 110  7.2  3.6          6.1         2.5  virginica
## 111  6.5  3.2          5.1         2.0  virginica
## 112  6.4  2.7          5.3         1.9  virginica
## 113  6.8  3.0          5.5         2.1  virginica
## 114  5.7  2.5          5.0         2.0  virginica
## 115  5.8  2.8          5.1         2.4  virginica
## 116  6.4  3.2          5.3         2.3  virginica
## 117  6.5  3.0          5.5         1.8  virginica
## 118  7.7  3.8          6.7         2.2  virginica
## 119  7.7  2.6          6.9         2.3  virginica
## 120  6.0  2.2          5.0         1.5  virginica
## 121  6.9  3.2          5.7         2.3  virginica
## 122  5.6  2.8          4.9         2.0  virginica
## 123  7.7  2.8          6.7         2.0  virginica
## 124  6.3  2.7          4.9         1.8  virginica
## 125  6.7  3.3          5.7         2.1  virginica
## 126  7.2  3.2          6.0         1.8  virginica
## 127  6.2  2.8          4.8         1.8  virginica
## 128  6.1  3.0          4.9         1.8  virginica
## 129  6.4  2.8          5.6         2.1  virginica
## 130  7.2  3.0          5.8         1.6  virginica
## 131  7.4  2.8          6.1         1.9  virginica
## 132  7.9  3.8          6.4         2.0  virginica
## 133  6.4  2.8          5.6         2.2  virginica
## 134  6.3  2.8          5.1         1.5  virginica
## 135  6.1  2.6          5.6         1.4  virginica
## 136  7.7  3.0          6.1         2.3  virginica
## 137  6.3  3.4          5.6         2.4  virginica
## 138  6.4  3.1          5.5         1.8  virginica
## 139  6.0  3.0          4.8         1.8  virginica
## 140  6.9  3.1          5.4         2.1  virginica
## 141  6.7  3.1          5.6         2.4  virginica
## 142  6.9  3.1          5.1         2.3  virginica
## 143  5.8  2.7          5.1         1.9  virginica
## 144  6.8  3.2          5.9         2.3  virginica
## 145  6.7  3.3          5.7         2.5  virginica
## 146  6.7  3.0          5.2         2.3  virginica
## 147  6.3  2.5          5.0         1.9  virginica
## 148  6.5  3.0          5.2         2.0  virginica
## 149  6.2  3.4          5.4         2.3  virginica
## 150  5.9  3.0          5.1         1.8  virginica</code></pre>
<p>If you need to do some really fancy conditional renaming (e.g., changing all variables that start with “r” to start with “rf” instead, to make it more clear that the prefix actually stands for “risk factor” rather than “reverse coded”), you’ll need to use <code>rename_with()</code>.</p>
<p>This command has two parts to it: the data set, and the function you wish to apply to it (which you put after the <code>~</code>)</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="wrangle-data.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(iris, <span class="sc">~</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>, .x, <span class="at">fixed =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>##     Sepal_Length Sepal_Width Petal_Length Petal_Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            4.9         3.0          1.4         0.2     setosa
## 3            4.7         3.2          1.3         0.2     setosa
## 4            4.6         3.1          1.5         0.2     setosa
## 5            5.0         3.6          1.4         0.2     setosa
## 6            5.4         3.9          1.7         0.4     setosa
## 7            4.6         3.4          1.4         0.3     setosa
## 8            5.0         3.4          1.5         0.2     setosa
## 9            4.4         2.9          1.4         0.2     setosa
## 10           4.9         3.1          1.5         0.1     setosa
## 11           5.4         3.7          1.5         0.2     setosa
## 12           4.8         3.4          1.6         0.2     setosa
## 13           4.8         3.0          1.4         0.1     setosa
## 14           4.3         3.0          1.1         0.1     setosa
## 15           5.8         4.0          1.2         0.2     setosa
## 16           5.7         4.4          1.5         0.4     setosa
## 17           5.4         3.9          1.3         0.4     setosa
## 18           5.1         3.5          1.4         0.3     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 20           5.1         3.8          1.5         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 22           5.1         3.7          1.5         0.4     setosa
## 23           4.6         3.6          1.0         0.2     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 25           4.8         3.4          1.9         0.2     setosa
## 26           5.0         3.0          1.6         0.2     setosa
## 27           5.0         3.4          1.6         0.4     setosa
## 28           5.2         3.5          1.5         0.2     setosa
## 29           5.2         3.4          1.4         0.2     setosa
## 30           4.7         3.2          1.6         0.2     setosa
## 31           4.8         3.1          1.6         0.2     setosa
## 32           5.4         3.4          1.5         0.4     setosa
## 33           5.2         4.1          1.5         0.1     setosa
## 34           5.5         4.2          1.4         0.2     setosa
## 35           4.9         3.1          1.5         0.2     setosa
## 36           5.0         3.2          1.2         0.2     setosa
## 37           5.5         3.5          1.3         0.2     setosa
## 38           4.9         3.6          1.4         0.1     setosa
## 39           4.4         3.0          1.3         0.2     setosa
## 40           5.1         3.4          1.5         0.2     setosa
## 41           5.0         3.5          1.3         0.3     setosa
## 42           4.5         2.3          1.3         0.3     setosa
## 43           4.4         3.2          1.3         0.2     setosa
## 44           5.0         3.5          1.6         0.6     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 46           4.8         3.0          1.4         0.3     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 48           4.6         3.2          1.4         0.2     setosa
## 49           5.3         3.7          1.5         0.2     setosa
## 50           5.0         3.3          1.4         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0         2.3          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 107          4.9         2.5          4.5         1.7  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7         2.8          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4         3.1          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9         3.1          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica</code></pre>
<p>The gsub() function from Base R identifies matching patterns in the data and substitutes them with what you want instead. Think of it like a “Find all and replace with” function</p>
<p>The above line thus does the following:
1. Checks the column names of the supplied data set (iris) for a specific pattern (pattern= )
2. Replaces said pattern with your input (replacement= )</p>
<p>The great thing about rename_with() is that the .fn (or <code>~</code> shortcut) can take ANY function as input. For example, if you want to add a prefix or suffix to columns, you can change the function to:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="wrangle-data.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>( iris, <span class="sc">~</span> <span class="fu">paste0</span>(.x,  <span class="st">&quot;_text&quot;</span>))</span></code></pre></div>
<pre><code>##     Sepal.Length_text Sepal.Width_text Petal.Length_text Petal.Width_text Species_text
## 1                 5.1              3.5               1.4              0.2       setosa
## 2                 4.9              3.0               1.4              0.2       setosa
## 3                 4.7              3.2               1.3              0.2       setosa
## 4                 4.6              3.1               1.5              0.2       setosa
## 5                 5.0              3.6               1.4              0.2       setosa
## 6                 5.4              3.9               1.7              0.4       setosa
## 7                 4.6              3.4               1.4              0.3       setosa
## 8                 5.0              3.4               1.5              0.2       setosa
## 9                 4.4              2.9               1.4              0.2       setosa
## 10                4.9              3.1               1.5              0.1       setosa
## 11                5.4              3.7               1.5              0.2       setosa
## 12                4.8              3.4               1.6              0.2       setosa
## 13                4.8              3.0               1.4              0.1       setosa
## 14                4.3              3.0               1.1              0.1       setosa
## 15                5.8              4.0               1.2              0.2       setosa
## 16                5.7              4.4               1.5              0.4       setosa
## 17                5.4              3.9               1.3              0.4       setosa
## 18                5.1              3.5               1.4              0.3       setosa
## 19                5.7              3.8               1.7              0.3       setosa
## 20                5.1              3.8               1.5              0.3       setosa
## 21                5.4              3.4               1.7              0.2       setosa
## 22                5.1              3.7               1.5              0.4       setosa
## 23                4.6              3.6               1.0              0.2       setosa
## 24                5.1              3.3               1.7              0.5       setosa
## 25                4.8              3.4               1.9              0.2       setosa
## 26                5.0              3.0               1.6              0.2       setosa
## 27                5.0              3.4               1.6              0.4       setosa
## 28                5.2              3.5               1.5              0.2       setosa
## 29                5.2              3.4               1.4              0.2       setosa
## 30                4.7              3.2               1.6              0.2       setosa
## 31                4.8              3.1               1.6              0.2       setosa
## 32                5.4              3.4               1.5              0.4       setosa
## 33                5.2              4.1               1.5              0.1       setosa
## 34                5.5              4.2               1.4              0.2       setosa
## 35                4.9              3.1               1.5              0.2       setosa
## 36                5.0              3.2               1.2              0.2       setosa
## 37                5.5              3.5               1.3              0.2       setosa
## 38                4.9              3.6               1.4              0.1       setosa
## 39                4.4              3.0               1.3              0.2       setosa
## 40                5.1              3.4               1.5              0.2       setosa
## 41                5.0              3.5               1.3              0.3       setosa
## 42                4.5              2.3               1.3              0.3       setosa
## 43                4.4              3.2               1.3              0.2       setosa
## 44                5.0              3.5               1.6              0.6       setosa
## 45                5.1              3.8               1.9              0.4       setosa
## 46                4.8              3.0               1.4              0.3       setosa
## 47                5.1              3.8               1.6              0.2       setosa
## 48                4.6              3.2               1.4              0.2       setosa
## 49                5.3              3.7               1.5              0.2       setosa
## 50                5.0              3.3               1.4              0.2       setosa
## 51                7.0              3.2               4.7              1.4   versicolor
## 52                6.4              3.2               4.5              1.5   versicolor
## 53                6.9              3.1               4.9              1.5   versicolor
## 54                5.5              2.3               4.0              1.3   versicolor
## 55                6.5              2.8               4.6              1.5   versicolor
## 56                5.7              2.8               4.5              1.3   versicolor
## 57                6.3              3.3               4.7              1.6   versicolor
## 58                4.9              2.4               3.3              1.0   versicolor
## 59                6.6              2.9               4.6              1.3   versicolor
## 60                5.2              2.7               3.9              1.4   versicolor
## 61                5.0              2.0               3.5              1.0   versicolor
## 62                5.9              3.0               4.2              1.5   versicolor
## 63                6.0              2.2               4.0              1.0   versicolor
## 64                6.1              2.9               4.7              1.4   versicolor
## 65                5.6              2.9               3.6              1.3   versicolor
## 66                6.7              3.1               4.4              1.4   versicolor
## 67                5.6              3.0               4.5              1.5   versicolor
## 68                5.8              2.7               4.1              1.0   versicolor
## 69                6.2              2.2               4.5              1.5   versicolor
## 70                5.6              2.5               3.9              1.1   versicolor
## 71                5.9              3.2               4.8              1.8   versicolor
## 72                6.1              2.8               4.0              1.3   versicolor
## 73                6.3              2.5               4.9              1.5   versicolor
## 74                6.1              2.8               4.7              1.2   versicolor
## 75                6.4              2.9               4.3              1.3   versicolor
## 76                6.6              3.0               4.4              1.4   versicolor
## 77                6.8              2.8               4.8              1.4   versicolor
## 78                6.7              3.0               5.0              1.7   versicolor
## 79                6.0              2.9               4.5              1.5   versicolor
## 80                5.7              2.6               3.5              1.0   versicolor
## 81                5.5              2.4               3.8              1.1   versicolor
## 82                5.5              2.4               3.7              1.0   versicolor
## 83                5.8              2.7               3.9              1.2   versicolor
## 84                6.0              2.7               5.1              1.6   versicolor
## 85                5.4              3.0               4.5              1.5   versicolor
## 86                6.0              3.4               4.5              1.6   versicolor
## 87                6.7              3.1               4.7              1.5   versicolor
## 88                6.3              2.3               4.4              1.3   versicolor
## 89                5.6              3.0               4.1              1.3   versicolor
## 90                5.5              2.5               4.0              1.3   versicolor
## 91                5.5              2.6               4.4              1.2   versicolor
## 92                6.1              3.0               4.6              1.4   versicolor
## 93                5.8              2.6               4.0              1.2   versicolor
## 94                5.0              2.3               3.3              1.0   versicolor
## 95                5.6              2.7               4.2              1.3   versicolor
## 96                5.7              3.0               4.2              1.2   versicolor
## 97                5.7              2.9               4.2              1.3   versicolor
## 98                6.2              2.9               4.3              1.3   versicolor
## 99                5.1              2.5               3.0              1.1   versicolor
## 100               5.7              2.8               4.1              1.3   versicolor
## 101               6.3              3.3               6.0              2.5    virginica
## 102               5.8              2.7               5.1              1.9    virginica
## 103               7.1              3.0               5.9              2.1    virginica
## 104               6.3              2.9               5.6              1.8    virginica
## 105               6.5              3.0               5.8              2.2    virginica
## 106               7.6              3.0               6.6              2.1    virginica
## 107               4.9              2.5               4.5              1.7    virginica
## 108               7.3              2.9               6.3              1.8    virginica
## 109               6.7              2.5               5.8              1.8    virginica
## 110               7.2              3.6               6.1              2.5    virginica
## 111               6.5              3.2               5.1              2.0    virginica
## 112               6.4              2.7               5.3              1.9    virginica
## 113               6.8              3.0               5.5              2.1    virginica
## 114               5.7              2.5               5.0              2.0    virginica
## 115               5.8              2.8               5.1              2.4    virginica
## 116               6.4              3.2               5.3              2.3    virginica
## 117               6.5              3.0               5.5              1.8    virginica
## 118               7.7              3.8               6.7              2.2    virginica
## 119               7.7              2.6               6.9              2.3    virginica
## 120               6.0              2.2               5.0              1.5    virginica
## 121               6.9              3.2               5.7              2.3    virginica
## 122               5.6              2.8               4.9              2.0    virginica
## 123               7.7              2.8               6.7              2.0    virginica
## 124               6.3              2.7               4.9              1.8    virginica
## 125               6.7              3.3               5.7              2.1    virginica
## 126               7.2              3.2               6.0              1.8    virginica
## 127               6.2              2.8               4.8              1.8    virginica
## 128               6.1              3.0               4.9              1.8    virginica
## 129               6.4              2.8               5.6              2.1    virginica
## 130               7.2              3.0               5.8              1.6    virginica
## 131               7.4              2.8               6.1              1.9    virginica
## 132               7.9              3.8               6.4              2.0    virginica
## 133               6.4              2.8               5.6              2.2    virginica
## 134               6.3              2.8               5.1              1.5    virginica
## 135               6.1              2.6               5.6              1.4    virginica
## 136               7.7              3.0               6.1              2.3    virginica
## 137               6.3              3.4               5.6              2.4    virginica
## 138               6.4              3.1               5.5              1.8    virginica
## 139               6.0              3.0               4.8              1.8    virginica
## 140               6.9              3.1               5.4              2.1    virginica
## 141               6.7              3.1               5.6              2.4    virginica
## 142               6.9              3.1               5.1              2.3    virginica
## 143               5.8              2.7               5.1              1.9    virginica
## 144               6.8              3.2               5.9              2.3    virginica
## 145               6.7              3.3               5.7              2.5    virginica
## 146               6.7              3.0               5.2              2.3    virginica
## 147               6.3              2.5               5.0              1.9    virginica
## 148               6.5              3.0               5.2              2.0    virginica
## 149               6.2              3.4               5.4              2.3    virginica
## 150               5.9              3.0               5.1              1.8    virginica</code></pre>
<p>The above line adds a suffix. You can also add a prefix in the exact same way, just by switching the order of the string and the pattern in the paste0 command</p>
<p><strong><em>Alternative method to the above</em></strong>
This is a second way to do the above. It may appear more simple, but it’s also probably not as theoretically consistent with how the packages were made…..it uses the {stringr} package to rename the column names, and {stringr} is typically for editing vectors of strings…..
…so it works, but it’s a little unconventional because you call and edit the column names like they’re a vector in a data set</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="wrangle-data.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(iris)<span class="ot">=</span><span class="fu">str_replace</span>(<span class="fu">colnames</span>(iris), <span class="at">pattern =</span> <span class="st">&quot;.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
</div>
<div id="re-order-columns-in-a-data-set" class="section level2" number="3.10">
<h2><span class="header-section-number">3.10</span> Re-order columns in a data set</h2>
<p>Use <code>relocate()</code> to change column positions, using the same syntax as <code>select()</code> to make it easy to move blocks of columns at once.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="wrangle-data.html#cb57-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="co"># notice the column order</span></span></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="wrangle-data.html#cb59-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(hp, <span class="at">.before =</span> mpg)</span></code></pre></div>
<pre><code>##                      hp  mpg cyl  disp drat    wt  qsec vs am gear carb
## Mazda RX4           110 21.0   6 160.0 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       110 21.0   6 160.0 3.90 2.875 17.02  0  1    4    4
## Datsun 710           93 22.8   4 108.0 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive      110 21.4   6 258.0 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   175 18.7   8 360.0 3.15 3.440 17.02  0  0    3    2
## Valiant             105 18.1   6 225.0 2.76 3.460 20.22  1  0    3    1
## Duster 360          245 14.3   8 360.0 3.21 3.570 15.84  0  0    3    4
## Merc 240D            62 24.4   4 146.7 3.69 3.190 20.00  1  0    4    2
## Merc 230             95 22.8   4 140.8 3.92 3.150 22.90  1  0    4    2
## Merc 280            123 19.2   6 167.6 3.92 3.440 18.30  1  0    4    4
## Merc 280C           123 17.8   6 167.6 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          180 16.4   8 275.8 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          180 17.3   8 275.8 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         180 15.2   8 275.8 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  205 10.4   8 472.0 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 215 10.4   8 460.0 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   230 14.7   8 440.0 3.23 5.345 17.42  0  0    3    4
## Fiat 128             66 32.4   4  78.7 4.08 2.200 19.47  1  1    4    1
## Honda Civic          52 30.4   4  75.7 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla       65 33.9   4  71.1 4.22 1.835 19.90  1  1    4    1
## Toyota Corona        97 21.5   4 120.1 3.70 2.465 20.01  1  0    3    1
## Dodge Challenger    150 15.5   8 318.0 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         150 15.2   8 304.0 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          245 13.3   8 350.0 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    175 19.2   8 400.0 3.08 3.845 17.05  0  0    3    2
## Fiat X1-9            66 27.3   4  79.0 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2        91 26.0   4 120.3 4.43 2.140 16.70  0  1    5    2
## Lotus Europa        113 30.4   4  95.1 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L      264 15.8   8 351.0 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        175 19.7   6 145.0 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       335 15.0   8 301.0 3.54 3.570 14.60  0  1    5    8
## Volvo 142E          109 21.4   4 121.0 4.11 2.780 18.60  1  1    4    2</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="wrangle-data.html#cb61-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(hp<span class="sc">:</span>wt, <span class="at">.after=</span> am)</span></code></pre></div>
<pre><code>##                      mpg cyl  disp  qsec vs am  hp drat    wt gear carb
## Mazda RX4           21.0   6 160.0 16.46  0  1 110 3.90 2.620    4    4
## Mazda RX4 Wag       21.0   6 160.0 17.02  0  1 110 3.90 2.875    4    4
## Datsun 710          22.8   4 108.0 18.61  1  1  93 3.85 2.320    4    1
## Hornet 4 Drive      21.4   6 258.0 19.44  1  0 110 3.08 3.215    3    1
## Hornet Sportabout   18.7   8 360.0 17.02  0  0 175 3.15 3.440    3    2
## Valiant             18.1   6 225.0 20.22  1  0 105 2.76 3.460    3    1
## Duster 360          14.3   8 360.0 15.84  0  0 245 3.21 3.570    3    4
## Merc 240D           24.4   4 146.7 20.00  1  0  62 3.69 3.190    4    2
## Merc 230            22.8   4 140.8 22.90  1  0  95 3.92 3.150    4    2
## Merc 280            19.2   6 167.6 18.30  1  0 123 3.92 3.440    4    4
## Merc 280C           17.8   6 167.6 18.90  1  0 123 3.92 3.440    4    4
## Merc 450SE          16.4   8 275.8 17.40  0  0 180 3.07 4.070    3    3
## Merc 450SL          17.3   8 275.8 17.60  0  0 180 3.07 3.730    3    3
## Merc 450SLC         15.2   8 275.8 18.00  0  0 180 3.07 3.780    3    3
## Cadillac Fleetwood  10.4   8 472.0 17.98  0  0 205 2.93 5.250    3    4
## Lincoln Continental 10.4   8 460.0 17.82  0  0 215 3.00 5.424    3    4
## Chrysler Imperial   14.7   8 440.0 17.42  0  0 230 3.23 5.345    3    4
## Fiat 128            32.4   4  78.7 19.47  1  1  66 4.08 2.200    4    1
## Honda Civic         30.4   4  75.7 18.52  1  1  52 4.93 1.615    4    2
## Toyota Corolla      33.9   4  71.1 19.90  1  1  65 4.22 1.835    4    1
## Toyota Corona       21.5   4 120.1 20.01  1  0  97 3.70 2.465    3    1
## Dodge Challenger    15.5   8 318.0 16.87  0  0 150 2.76 3.520    3    2
## AMC Javelin         15.2   8 304.0 17.30  0  0 150 3.15 3.435    3    2
## Camaro Z28          13.3   8 350.0 15.41  0  0 245 3.73 3.840    3    4
## Pontiac Firebird    19.2   8 400.0 17.05  0  0 175 3.08 3.845    3    2
## Fiat X1-9           27.3   4  79.0 18.90  1  1  66 4.08 1.935    4    1
## Porsche 914-2       26.0   4 120.3 16.70  0  1  91 4.43 2.140    5    2
## Lotus Europa        30.4   4  95.1 16.90  1  1 113 3.77 1.513    5    2
## Ford Pantera L      15.8   8 351.0 14.50  0  1 264 4.22 3.170    5    4
## Ferrari Dino        19.7   6 145.0 15.50  0  1 175 3.62 2.770    5    6
## Maserati Bora       15.0   8 301.0 14.60  0  1 335 3.54 3.570    5    8
## Volvo 142E          21.4   4 121.0 18.60  1  1 109 4.11 2.780    4    2</code></pre>
</div>
<div id="working-with-date-and-time-variables" class="section level2" number="3.11">
<h2><span class="header-section-number">3.11</span> Working with date and time variables</h2>
<div id="format-date-and-time-variables-appropriate-as-date-objects-in-r" class="section level3" number="3.11.1">
<h3><span class="header-section-number">3.11.1</span> Format date-and-time variables appropriate as date objects in R</h3>
<p>Formatting a column of dates can be extremely helpful if you need to work with time data, but also an extreme pain in the ass. It requires things to be done in two stages, and very precisely. Particularly in the first stage.</p>
<p>First, assuming your data is already imported and is being stored as a vector of character strings, you have to tell R to adjust the formatting of dates. You cannot change it from a character-based object into a Date or DateTime one until it recognizes the correct formatting.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="wrangle-data.html#cb63-1" aria-hidden="true" tabindex="-1"></a>example_date_data<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span>X1,     <span class="sc">~</span>X2,</span>
<span id="cb63-2"><a href="wrangle-data.html#cb63-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/4/2021&quot;</span>,  <span class="sc">-</span><span class="fl">49.87</span>,</span>
<span id="cb63-3"><a href="wrangle-data.html#cb63-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/4/2021&quot;</span>,  <span class="sc">-</span><span class="fl">13.85</span>,</span>
<span id="cb63-4"><a href="wrangle-data.html#cb63-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/3/2021&quot;</span>,   <span class="sc">-</span><span class="fl">7.45</span>,</span>
<span id="cb63-5"><a href="wrangle-data.html#cb63-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/3/2021&quot;</span>, <span class="sc">-</span><span class="fl">172.71</span>,</span>
<span id="cb63-6"><a href="wrangle-data.html#cb63-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>,   <span class="sc">-</span><span class="fl">6.37</span>,</span>
<span id="cb63-7"><a href="wrangle-data.html#cb63-7" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>,     <span class="sc">-</span><span class="dv">25</span>,</span>
<span id="cb63-8"><a href="wrangle-data.html#cb63-8" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>, <span class="sc">-</span><span class="fl">219.68</span>,</span>
<span id="cb63-9"><a href="wrangle-data.html#cb63-9" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>,  <span class="sc">-</span><span class="fl">53.75</span>,</span>
<span id="cb63-10"><a href="wrangle-data.html#cb63-10" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>,  <span class="sc">-</span><span class="fl">29.83</span>,</span>
<span id="cb63-11"><a href="wrangle-data.html#cb63-11" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>,  <span class="sc">-</span><span class="fl">77.06</span>,</span>
<span id="cb63-12"><a href="wrangle-data.html#cb63-12" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>,  <span class="sc">-</span><span class="fl">16.16</span>,</span>
<span id="cb63-13"><a href="wrangle-data.html#cb63-13" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>, <span class="sc">-</span><span class="fl">114.78</span>,</span>
<span id="cb63-14"><a href="wrangle-data.html#cb63-14" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>,     <span class="sc">-</span><span class="dv">50</span>,</span>
<span id="cb63-15"><a href="wrangle-data.html#cb63-15" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/2/2021&quot;</span>, <span class="sc">-</span><span class="fl">157.64</span>)</span>
<span id="cb63-16"><a href="wrangle-data.html#cb63-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-17"><a href="wrangle-data.html#cb63-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-18"><a href="wrangle-data.html#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct formatting</span></span>
<span id="cb63-19"><a href="wrangle-data.html#cb63-19" aria-hidden="true" tabindex="-1"></a>example_date_data<span class="sc">$</span>X1<span class="ot">=</span><span class="fu">format</span>(<span class="fu">as.POSIXct</span>(example_date_data<span class="sc">$</span>X1,<span class="at">format=</span><span class="st">&#39;%m/%d/%y&#39;</span>),<span class="at">format=</span><span class="st">&#39;%Y-%m-%d&#39;</span>)</span>
<span id="cb63-20"><a href="wrangle-data.html#cb63-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-21"><a href="wrangle-data.html#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">as_tibble</span>(example_date_data))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   X1              X2
##   &lt;chr&gt;        &lt;dbl&gt;
## 1 2020-08-04  -49.9 
## 2 2020-08-04  -13.8 
## 3 2020-08-03   -7.45
## 4 2020-08-03 -173.  
## 5 2020-08-02   -6.37
## 6 2020-08-02  -25</code></pre>
<p>In the code above, note that there are two <code>format</code> commands: The first one tells R how the date data is <strong>currently being stored</strong>, while the second at the end tells it how <strong>you want it to be stored.</strong> In this case, we are changing it from the way we would usually hand write a date (e.g., 10/26/1993) to a format commonly recognized and used in Excel and stats software (1993-10-26). <em>If your column also has times in it, you also need to include that too!</em></p>
<p>Second, you can now correct the object’s structure. You can do this with base R’s <code>as.Date()</code> or tidyverse’s <code>date()</code> verbs.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="wrangle-data.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct structure</span></span>
<span id="cb65-2"><a href="wrangle-data.html#cb65-2" aria-hidden="true" tabindex="-1"></a>example_date_data<span class="sc">$</span>X1<span class="ot">=</span> lubridate<span class="sc">::</span><span class="fu">date</span>(example_date_data<span class="sc">$</span>X1) <span class="co"># tidyverse</span></span>
<span id="cb65-3"><a href="wrangle-data.html#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="wrangle-data.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Base R version</span></span>
<span id="cb65-5"><a href="wrangle-data.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># example_date_data$X1=as.Date(example_date_data$X1)</span></span>
<span id="cb65-6"><a href="wrangle-data.html#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="wrangle-data.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">as_tibble</span>(example_date_data))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   X1              X2
##   &lt;date&gt;       &lt;dbl&gt;
## 1 2020-08-04  -49.9 
## 2 2020-08-04  -13.8 
## 3 2020-08-03   -7.45
## 4 2020-08-03 -173.  
## 5 2020-08-02   -6.37
## 6 2020-08-02  -25</code></pre>
<p>Notice how the object is now stored as the correct type in the table above.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="wrangle-data.html#cb67-1" aria-hidden="true" tabindex="-1"></a>part_1<span class="sc">$</span>start_date<span class="ot">=</span><span class="fu">format</span>(<span class="fu">as.POSIXct</span>(part_1<span class="sc">$</span>start_date,<span class="at">format=</span><span class="st">&#39;%Y-%m-%d %H:%M:%S&#39;</span>),<span class="at">format=</span><span class="st">&#39;%m/%d/%Y&#39;</span>)</span></code></pre></div>
<p>Note that the ‘format’ part has to be <strong>EXACTLY</strong> as the format appears in the data. If you have an extra space in there or / instead of - separating the numbers, it will wipe the column out.</p>
<p>Can also do the tidyverse way:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="wrangle-data.html#cb68-1" aria-hidden="true" tabindex="-1"></a>full_data<span class="sc">$</span>start_date<span class="ot">=</span>lubridate<span class="sc">::</span><span class="fu">date</span>(no_slice<span class="sc">$</span>start_date)</span></code></pre></div>
<p>Or import the column as a Date object with readr:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="wrangle-data.html#cb69-1" aria-hidden="true" tabindex="-1"></a>wellsfargo<span class="ot">=</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Data&quot;</span>, <span class="st">&quot;wfdata.csv&quot;</span>), <span class="at">col_names =</span> <span class="cn">FALSE</span>, </span>
<span id="cb69-2"><a href="wrangle-data.html#cb69-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">X1 =</span> <span class="fu">col_date</span>(<span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>))) <span class="co">#format of the data as it is recorded in the .csv file</span></span></code></pre></div>
</div>
<div id="find-the-difference-between-two-datestimes" class="section level3" number="3.11.2">
<h3><span class="header-section-number">3.11.2</span> Find the difference between two dates/times</h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="wrangle-data.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">difftime</span>(part_1<span class="sc">$</span>end_date[<span class="dv">1</span>], part_2<span class="sc">$</span>end_date[<span class="dv">1</span>], <span class="at">units=</span><span class="st">&quot;days&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-r-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="clean-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/edit/master/03-wrangle.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/blob/master/03-wrangle.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
