<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Wrangle Data | Creating a simulated data set</title>
  <meta name="description" content="Chapter 3 Wrangle Data | Creating a simulated data set" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Wrangle Data | Creating a simulated data set" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Wrangle Data | Creating a simulated data set" />
  
  
  

<meta name="author" content="Ryan Schneider" />


<meta name="date" content="2022-11-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-r-basics.html"/>
<link rel="next" href="clean-data.html"/>
<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Compendium</a></li>

<li class="divider"></li>
<li><a href="index.html#a-monument-to-my-madness" id="toc-a-monument-to-my-madness"><span class="toc-section-number">1</span> A Monument to my Madness</a>
<ul>
<li><a href="index.html#what-this-book-is-and-what-it-is-not" id="toc-what-this-book-is-and-what-it-is-not"><span class="toc-section-number">1.1</span> What this book is, and what it is not</a></li>
</ul></li>
<li><a href="introduction-r-basics.html#introduction-r-basics" id="toc-introduction-r-basics"><span class="toc-section-number">2</span> Introduction: R Basics</a>
<ul>
<li><a href="introduction-r-basics.html#importing-data" id="toc-importing-data"><span class="toc-section-number">2.1</span> Importing Data</a>
<ul>
<li><a href="introduction-r-basics.html#spreadsheets" id="toc-spreadsheets"><span class="toc-section-number">2.1.1</span> Spreadsheets</a></li>
</ul></li>
<li><a href="introduction-r-basics.html#exporting-i.e.-saving-data-and-output" id="toc-exporting-i.e.-saving-data-and-output"><span class="toc-section-number">2.2</span> Exporting (i.e., saving) Data and Output</a>
<ul>
<li><a href="introduction-r-basics.html#exporting-to-.csv" id="toc-exporting-to-.csv"><span class="toc-section-number">2.2.1</span> Exporting to .CSV</a></li>
<li><a href="introduction-r-basics.html#export-to-.rdata-and-load-the-data-again-later" id="toc-export-to-.rdata-and-load-the-data-again-later"><span class="toc-section-number">2.2.2</span> Export to .RData (and load the data again later)</a></li>
<li><a href="introduction-r-basics.html#export-to-excel" id="toc-export-to-excel"><span class="toc-section-number">2.2.3</span> Export to Excel</a></li>
<li><a href="introduction-r-basics.html#accessedit-specific-cell-number-values" id="toc-accessedit-specific-cell-number-values"><span class="toc-section-number">2.2.4</span> Access/edit specific cell number values</a></li>
</ul></li>
</ul></li>
<li><a href="wrangle-data.html#wrangle-data" id="toc-wrangle-data"><span class="toc-section-number">3</span> Wrangle Data</a>
<ul>
<li><a href="wrangle-data.html#joining-or-splitting" id="toc-joining-or-splitting"><span class="toc-section-number">3.1</span> Joining or Splitting</a>
<ul>
<li><a href="wrangle-data.html#whole-data-sets" id="toc-whole-data-sets"><span class="toc-section-number">3.1.1</span> Whole Data Sets</a></li>
<li><a href="wrangle-data.html#individual-columnsvariables" id="toc-individual-columnsvariables"><span class="toc-section-number">3.1.2</span> Individual Columns/Variables</a></li>
</ul></li>
<li><a href="wrangle-data.html#selectingextracting-specific-variables-with-select" id="toc-selectingextracting-specific-variables-with-select"><span class="toc-section-number">3.2</span> Selecting/extracting specific variables with <code>select()</code></a></li>
<li><a href="wrangle-data.html#advanced-filtering-techniques" id="toc-advanced-filtering-techniques"><span class="toc-section-number">3.3</span> Advanced Filtering techniques</a>
<ul>
<li><a href="wrangle-data.html#filter-based-on-partial-match" id="toc-filter-based-on-partial-match"><span class="toc-section-number">3.3.1</span> Filter based on partial match</a></li>
<li><a href="wrangle-data.html#filtering-based-on-multiple-conditions" id="toc-filtering-based-on-multiple-conditions"><span class="toc-section-number">3.3.2</span> Filtering based on multiple conditions</a></li>
<li><a href="wrangle-data.html#filtering-across-multiple-columns" id="toc-filtering-across-multiple-columns"><span class="toc-section-number">3.3.3</span> Filtering across multiple columns</a></li>
</ul></li>
<li><a href="wrangle-data.html#if-then-and-case-when" id="toc-if-then-and-case-when"><span class="toc-section-number">3.4</span> If-then and Case-when</a>
<ul>
<li><a href="wrangle-data.html#if-then" id="toc-if-then"><span class="toc-section-number">3.4.1</span> If-then</a></li>
<li><a href="wrangle-data.html#case-when" id="toc-case-when"><span class="toc-section-number">3.4.2</span> Case-when</a></li>
</ul></li>
<li><a href="wrangle-data.html#conditional-replacement-of-values" id="toc-conditional-replacement-of-values"><span class="toc-section-number">3.5</span> Conditional replacement of values</a></li>
<li><a href="wrangle-data.html#merging-variables" id="toc-merging-variables"><span class="toc-section-number">3.6</span> Merging variables</a></li>
<li><a href="wrangle-data.html#apply-a-function-to-multiple-variables-at-once" id="toc-apply-a-function-to-multiple-variables-at-once"><span class="toc-section-number">3.7</span> Apply a function to multiple variables at once</a></li>
<li><a href="wrangle-data.html#pivoting-i.e.-transposing-data" id="toc-pivoting-i.e.-transposing-data"><span class="toc-section-number">3.8</span> Pivoting (i.e., transposing) data</a>
<ul>
<li><a href="wrangle-data.html#condense-multiple-rows-into-a-single-column-pivot-wide-to-long" id="toc-condense-multiple-rows-into-a-single-column-pivot-wide-to-long"><span class="toc-section-number">3.8.1</span> Condense multiple rows into a single column (pivot wide to long)</a></li>
</ul></li>
<li><a href="wrangle-data.html#turn-row-names-into-a-columnvariable" id="toc-turn-row-names-into-a-columnvariable"><span class="toc-section-number">3.9</span> Turn row names into a column/variable</a></li>
<li><a href="wrangle-data.html#how-to-editchange-column-names" id="toc-how-to-editchange-column-names"><span class="toc-section-number">3.10</span> How to edit/change column names</a></li>
<li><a href="wrangle-data.html#re-order-columns-in-a-data-set" id="toc-re-order-columns-in-a-data-set"><span class="toc-section-number">3.11</span> Re-order columns in a data set</a></li>
<li><a href="wrangle-data.html#date-and-time-variables" id="toc-date-and-time-variables"><span class="toc-section-number">3.12</span> Date and time variables</a>
<ul>
<li><a href="wrangle-data.html#date-time-objects" id="toc-date-time-objects"><span class="toc-section-number">3.12.1</span> Date-time objects</a></li>
<li><a href="wrangle-data.html#date-only-objects" id="toc-date-only-objects"><span class="toc-section-number">3.12.2</span> Date-only objects</a></li>
<li><a href="wrangle-data.html#find-the-difference-between-two-datestimes" id="toc-find-the-difference-between-two-datestimes"><span class="toc-section-number">3.12.3</span> Find the difference between two dates/times</a></li>
</ul></li>
<li><a href="wrangle-data.html#reverse-code-a-variable" id="toc-reverse-code-a-variable"><span class="toc-section-number">3.13</span> Reverse-code a variable</a></li>
<li><a href="wrangle-data.html#dummy-coding-the-very-fast-and-easy-way" id="toc-dummy-coding-the-very-fast-and-easy-way"><span class="toc-section-number">3.14</span> Dummy coding (the very fast and easy way)</a></li>
<li><a href="wrangle-data.html#create-a-relative-ranking-among-several-variables" id="toc-create-a-relative-ranking-among-several-variables"><span class="toc-section-number">3.15</span> Create a relative ranking among several variables</a></li>
<li><a href="wrangle-data.html#manipulating-the-working-environment-and-many-things-at-once" id="toc-manipulating-the-working-environment-and-many-things-at-once"><span class="toc-section-number">3.16</span> Manipulating the working environment and many things at once</a>
<ul>
<li><a href="wrangle-data.html#stuff-the-whole-working-environment-into-a-list" id="toc-stuff-the-whole-working-environment-into-a-list"><span class="toc-section-number">3.16.1</span> Stuff the WHOLE working environment into a list</a></li>
<li><a href="wrangle-data.html#extract-everything-from-a-list-into-the-environment" id="toc-extract-everything-from-a-list-into-the-environment"><span class="toc-section-number">3.16.2</span> Extract everything from a list into the environment</a></li>
<li><a href="wrangle-data.html#delete-everything-in-the-entire-environment-except-for-one-item" id="toc-delete-everything-in-the-entire-environment-except-for-one-item"><span class="toc-section-number">3.16.3</span> Delete everything in the entire environment, except for one item</a></li>
</ul></li>
<li><a href="wrangle-data.html#wrangling-lists" id="toc-wrangling-lists"><span class="toc-section-number">3.17</span> Wrangling Lists</a>
<ul>
<li><a href="wrangle-data.html#nesting" id="toc-nesting"><span class="toc-section-number">3.17.1</span> Nesting</a></li>
<li><a href="wrangle-data.html#combiningcollapsing-list-levels-reducing" id="toc-combiningcollapsing-list-levels-reducing"><span class="toc-section-number">3.17.2</span> Combining/collapsing list levels (Reducing)</a></li>
</ul></li>
</ul></li>
<li><a href="clean-data.html#clean-data" id="toc-clean-data"><span class="toc-section-number">4</span> Clean Data</a>
<ul>
<li><a href="clean-data.html#replace-a-value-with-na" id="toc-replace-a-value-with-na"><span class="toc-section-number">4.1</span> Replace a value with NA</a></li>
<li><a href="clean-data.html#replace-nas-with-a-value" id="toc-replace-nas-with-a-value"><span class="toc-section-number">4.2</span> Replace NA’s with a value</a></li>
<li><a href="clean-data.html#identify-columns-or-rows-with-missing-values" id="toc-identify-columns-or-rows-with-missing-values"><span class="toc-section-number">4.3</span> Identify columns or rows with Missing values</a></li>
<li><a href="clean-data.html#find-the-percentage-of-a-variable-that-is-missing" id="toc-find-the-percentage-of-a-variable-that-is-missing"><span class="toc-section-number">4.4</span> Find the percentage of a variable that is missing</a></li>
<li><a href="clean-data.html#exclude-missing-values-from-analysis" id="toc-exclude-missing-values-from-analysis"><span class="toc-section-number">4.5</span> Exclude Missing values from analysis</a></li>
<li><a href="clean-data.html#dropping-missing-values-from-the-data-set" id="toc-dropping-missing-values-from-the-data-set"><span class="toc-section-number">4.6</span> Dropping Missing values from the data set</a></li>
</ul></li>
<li><a href="working-with-factors.html#working-with-factors" id="toc-working-with-factors"><span class="toc-section-number">5</span> Working with Factors</a>
<ul>
<li><a href="working-with-factors.html#manually-recodechange-a-factors-levels" id="toc-manually-recodechange-a-factors-levels"><span class="toc-section-number">5.1</span> Manually recode/change a factor’s levels</a></li>
<li><a href="working-with-factors.html#collapse-factor-levels" id="toc-collapse-factor-levels"><span class="toc-section-number">5.2</span> Collapse factor levels</a></li>
<li><a href="working-with-factors.html#add-levels-to-a-factor" id="toc-add-levels-to-a-factor"><span class="toc-section-number">5.3</span> Add levels to a factor</a></li>
<li><a href="working-with-factors.html#drop-unused-levels" id="toc-drop-unused-levels"><span class="toc-section-number">5.4</span> Drop unused levels</a></li>
<li><a href="working-with-factors.html#change-the-order-of-a-factors-levels" id="toc-change-the-order-of-a-factors-levels"><span class="toc-section-number">5.5</span> Change the order of a factor’s levels</a></li>
</ul></li>
<li><a href="working-with-strings.html#working-with-strings" id="toc-working-with-strings"><span class="toc-section-number">6</span> Working with Strings</a>
<ul>
<li><a href="working-with-strings.html#remove-a-pattern-from-a-string" id="toc-remove-a-pattern-from-a-string"><span class="toc-section-number">6.1</span> Remove a pattern from a string</a></li>
<li><a href="working-with-strings.html#replace-one-pattern-in-a-string-with-another" id="toc-replace-one-pattern-in-a-string-with-another"><span class="toc-section-number">6.2</span> Replace one pattern in a string with another</a></li>
<li><a href="working-with-strings.html#find-i.e.-filter-for-all-instances-of-a-string" id="toc-find-i.e.-filter-for-all-instances-of-a-string"><span class="toc-section-number">6.3</span> Find (i.e., filter for) all instances of a string</a></li>
<li><a href="working-with-strings.html#drop-all-rows-from-a-data-set-that-contain-a-certain-string" id="toc-drop-all-rows-from-a-data-set-that-contain-a-certain-string"><span class="toc-section-number">6.4</span> Drop all rows from a data set that contain a certain string</a></li>
<li><a href="working-with-strings.html#force-all-letters-to-lower-case" id="toc-force-all-letters-to-lower-case"><span class="toc-section-number">6.5</span> Force all letters to lower case</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#figures-and-graphs-with-the-ggplot-and-see-packages" id="toc-figures-and-graphs-with-the-ggplot-and-see-packages"><span class="toc-section-number">7</span> Figures and Graphs with the ggplot and see packages</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#commands-for-ggplot-graph-types" id="toc-commands-for-ggplot-graph-types"><span class="toc-section-number">7.1</span> Commands for ggplot graph types</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#specific-commands-for-specific-types-of-analysis" id="toc-specific-commands-for-specific-types-of-analysis"><span class="toc-section-number">7.2</span> Specific Commands for Specific Types of Analysis</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#lavaan-stuff" id="toc-lavaan-stuff"><span class="toc-section-number">7.2.1</span> lavaan stuff</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#bayes-stuff" id="toc-bayes-stuff"><span class="toc-section-number">7.2.2</span> Bayes stuff</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#histograms-and-density-curves" id="toc-histograms-and-density-curves"><span class="toc-section-number">7.2.3</span> Histograms and density curves</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#highlight-specific-points" id="toc-highlight-specific-points"><span class="toc-section-number">7.3</span> Highlight specific points</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-labels-to-data-points" id="toc-add-labels-to-data-points"><span class="toc-section-number">7.4</span> Add labels to data points</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#plotting-multiple-graphs-at-once" id="toc-plotting-multiple-graphs-at-once"><span class="toc-section-number">7.5</span> Plotting multiple graphs at once</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#change-the-colors-bars-columns-dots-etc." id="toc-change-the-colors-bars-columns-dots-etc."><span class="toc-section-number">7.6</span> Change the colors (bars; columns; dots; etc.)</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#fine-tuning-colors" id="toc-fine-tuning-colors"><span class="toc-section-number">7.6.1</span> Fine-tuning colors</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#more-options-with-the-see-package" id="toc-more-options-with-the-see-package"><span class="toc-section-number">7.6.2</span> More options with the see package</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#other-aesthetic-mappings" id="toc-other-aesthetic-mappings"><span class="toc-section-number">7.7</span> Other aesthetic mappings</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#adding-and-customizing-text" id="toc-adding-and-customizing-text"><span class="toc-section-number">7.8</span> Adding and Customizing Text</a>
<ul>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-title-axis-labels-and-captions" id="toc-add-a-title-axis-labels-and-captions"><span class="toc-section-number">7.8.1</span> Add a title, axis labels, and captions</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#center-graph-title" id="toc-center-graph-title"><span class="toc-section-number">7.8.2</span> Center graph title</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#use-different-fonts" id="toc-use-different-fonts"><span class="toc-section-number">7.8.3</span> Use different fonts</a></li>
</ul></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#remove-gridlines" id="toc-remove-gridlines"><span class="toc-section-number">7.9</span> Remove gridlines</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#faceting" id="toc-faceting"><span class="toc-section-number">7.10</span> Faceting</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#log-transformations" id="toc-log-transformations"><span class="toc-section-number">7.11</span> Log transformations</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#changing-the-scale-of-the-axis" id="toc-changing-the-scale-of-the-axis"><span class="toc-section-number">7.12</span> Changing the scale of the axis</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#add-a-regression-line" id="toc-add-a-regression-line"><span class="toc-section-number">7.13</span> Add a regression line</a></li>
<li><a href="figures-and-graphs-with-the-ggplot-and-see-packages.html#save-a-graph-or-figure" id="toc-save-a-graph-or-figure"><span class="toc-section-number">7.14</span> Save a graph or figure</a></li>
</ul></li>
<li><a href="making-tables-with-flextable.html#making-tables-with-flextable" id="toc-making-tables-with-flextable"><span class="toc-section-number">8</span> Making Tables with flextable</a>
<ul>
<li><a href="making-tables-with-flextable.html#apa-table-components" id="toc-apa-table-components"><span class="toc-section-number">8.1</span> APA Table Components</a></li>
<li><a href="making-tables-with-flextable.html#indent-values" id="toc-indent-values"><span class="toc-section-number">8.2</span> Indent values</a></li>
<li><a href="making-tables-with-flextable.html#add-a-horizontal-border-aka-horizontal-spanner" id="toc-add-a-horizontal-border-aka-horizontal-spanner"><span class="toc-section-number">8.3</span> Add a Horizontal border (AKA horizontal “spanner”)</a></li>
<li><a href="making-tables-with-flextable.html#change-font-and-font-size" id="toc-change-font-and-font-size"><span class="toc-section-number">8.4</span> Change font and font size</a></li>
<li><a href="making-tables-with-flextable.html#grouped-table" id="toc-grouped-table"><span class="toc-section-number">8.5</span> Grouped table</a></li>
<li><a href="making-tables-with-flextable.html#adjust-line-spacing" id="toc-adjust-line-spacing"><span class="toc-section-number">8.6</span> Adjust line spacing</a></li>
<li><a href="making-tables-with-flextable.html#set-global-options-for-all-flextables" id="toc-set-global-options-for-all-flextables"><span class="toc-section-number">8.7</span> Set global options for all flextables</a></li>
<li><a href="making-tables-with-flextable.html#complete-example" id="toc-complete-example"><span class="toc-section-number">8.8</span> Complete Example</a></li>
<li><a href="making-tables-with-flextable.html#wraper-function-to-create-apa-style-tables" id="toc-wraper-function-to-create-apa-style-tables"><span class="toc-section-number">8.9</span> Wraper-function to create APA-style tables</a></li>
</ul></li>
<li><a href="misc.-stuff.html#misc.-stuff" id="toc-misc.-stuff"><span class="toc-section-number">9</span> Misc. Stuff</a>
<ul>
<li><a href="misc.-stuff.html#scrape-web-pages-for-data-tables" id="toc-scrape-web-pages-for-data-tables"><span class="toc-section-number">9.1</span> Scrape web pages for data tables</a></li>
<li><a href="misc.-stuff.html#read-spss-files-into-r" id="toc-read-spss-files-into-r"><span class="toc-section-number">9.2</span> Read SPSS files into R</a></li>
<li><a href="misc.-stuff.html#turn-numbers-into-percentages" id="toc-turn-numbers-into-percentages"><span class="toc-section-number">9.3</span> Turn numbers into percentages</a></li>
<li><a href="misc.-stuff.html#find-all-possible-combindations-of-items-in-a-vector" id="toc-find-all-possible-combindations-of-items-in-a-vector"><span class="toc-section-number">9.4</span> Find all possible combindations of items in a vector</a></li>
<li><a href="misc.-stuff.html#download-files-from-the-internet" id="toc-download-files-from-the-internet"><span class="toc-section-number">9.5</span> Download files from the internet</a></li>
<li><a href="misc.-stuff.html#print-multiple-things-in-one-statement" id="toc-print-multiple-things-in-one-statement"><span class="toc-section-number">9.6</span> Print multiple things in one statement</a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#intermediate-r-functions-loops-and-iterative-programming" id="toc-intermediate-r-functions-loops-and-iterative-programming"><span class="toc-section-number">10</span> Intermediate R: Functions, Loops, and Iterative Programming</a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#functions" id="toc-functions"><span class="toc-section-number">10.1</span> Functions</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#for-loops" id="toc-for-loops"><span class="toc-section-number">10.2</span> For-loops</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#purrr-and-iterative-functions" id="toc-purrr-and-iterative-functions"><span class="toc-section-number">10.3</span> purrr and Iterative Functions</a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#reproducible-example-scraping-web-data" id="toc-reproducible-example-scraping-web-data"><span class="toc-section-number">10.3.1</span> Reproducible example: Scraping web data</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#non-reproducible-example-juvenile-life-without-parole-study" id="toc-non-reproducible-example-juvenile-life-without-parole-study"><span class="toc-section-number">10.3.2</span> Non-reproducible example (Juvenile Life Without Parole study)</a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#example-3-readimport-several-files-at-once-with-map" id="toc-example-3-readimport-several-files-at-once-with-map"><span class="toc-section-number">10.3.3</span> Example 3: Read/Import several files at once with <code>map()</code></a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#other-purrr-commands" id="toc-other-purrr-commands"><span class="toc-section-number">10.4</span> Other purrr commands</a>
<ul>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#walk-and-walk2" id="toc-walk-and-walk2"><span class="toc-section-number">10.4.1</span> <code>walk</code> and <code>walk2</code></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#map2" id="toc-map2"><span class="toc-section-number">10.4.2</span> <code>map2</code></a></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#pmap-for-when-you-have-a-bunch-of-shit" id="toc-pmap-for-when-you-have-a-bunch-of-shit"><span class="toc-section-number">10.4.3</span> <code>pmap</code> for when you have a bunch of shit</a></li>
</ul></li>
<li><a href="intermediate-r-functions-loops-and-iterative-programming.html#using-purrr-to-manage-many-models" id="toc-using-purrr-to-manage-many-models"><span class="toc-section-number">10.5</span> Using purrr to manage many models</a></li>
</ul></li>
<li><a href="intro-to-r-markdown.html#intro-to-r-markdown" id="toc-intro-to-r-markdown"><span class="toc-section-number">11</span> Intro to R Markdown</a>
<ul>
<li><a href="intro-to-r-markdown.html#important-code-chunk-options" id="toc-important-code-chunk-options"><span class="toc-section-number">11.1</span> Important code chunk options</a></li>
<li><a href="intro-to-r-markdown.html#writing-math-equations-and-symbols" id="toc-writing-math-equations-and-symbols"><span class="toc-section-number">11.2</span> Writing math equations and symbols</a>
<ul>
<li><a href="intro-to-r-markdown.html#greek-symbols" id="toc-greek-symbols"><span class="toc-section-number">11.2.1</span> Greek symbols</a></li>
<li><a href="intro-to-r-markdown.html#math-notation" id="toc-math-notation"><span class="toc-section-number">11.2.2</span> Math notation</a></li>
<li><a href="intro-to-r-markdown.html#statistics-notation" id="toc-statistics-notation"><span class="toc-section-number">11.2.3</span> Statistics notation</a></li>
<li><a href="intro-to-r-markdown.html#writing-in-line-code" id="toc-writing-in-line-code"><span class="toc-section-number">11.2.4</span> Writing in-line code</a></li>
</ul></li>
<li><a href="intro-to-r-markdown.html#including-graphicsinserting-pictures" id="toc-including-graphicsinserting-pictures"><span class="toc-section-number">11.3</span> Including graphics/inserting pictures</a></li>
<li><a href="intro-to-r-markdown.html#footnotes" id="toc-footnotes"><span class="toc-section-number">11.4</span> Footnotes</a></li>
<li><a href="intro-to-r-markdown.html#change-the-color-of-your-text" id="toc-change-the-color-of-your-text"><span class="toc-section-number">11.5</span> Change the color of your text</a></li>
<li><a href="intro-to-r-markdown.html#re-using-code-chunk-options" id="toc-re-using-code-chunk-options"><span class="toc-section-number">11.6</span> Re-using code chunk options</a></li>
<li><a href="intro-to-r-markdown.html#making-better-tables" id="toc-making-better-tables"><span class="toc-section-number">11.7</span> Making better tables</a></li>
<li><a href="intro-to-r-markdown.html#running-in-line-code" id="toc-running-in-line-code"><span class="toc-section-number">11.8</span> Running in-line code</a></li>
</ul></li>
<li><a href="statistics--and-psych-specific-stuff.html#statistics--and-psych-specific-stuff" id="toc-statistics--and-psych-specific-stuff"><span class="toc-section-number">12</span> Statistics- and Psych-specific Stuff</a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#create-or-sample-from-a-distribution" id="toc-create-or-sample-from-a-distribution"><span class="toc-section-number">12.1</span> Create or sample from a distribution</a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#calculating-likelihood" id="toc-calculating-likelihood"><span class="toc-section-number">12.1.1</span> Calculating Likelihood</a></li>
</ul></li>
<li><a href="statistics--and-psych-specific-stuff.html#calculating-interrater-reliability" id="toc-calculating-interrater-reliability"><span class="toc-section-number">12.2</span> Calculating Interrater reliability</a></li>
<li><a href="statistics--and-psych-specific-stuff.html#statistical-tests-and-modeling-with-easystats" id="toc-statistical-tests-and-modeling-with-easystats"><span class="toc-section-number">12.3</span> Statistical tests and modeling with <code>easystats</code></a>
<ul>
<li><a href="statistics--and-psych-specific-stuff.html#getting-parameter-estimates-from-model-objects" id="toc-getting-parameter-estimates-from-model-objects"><span class="toc-section-number">12.3.1</span> Getting parameter estimates from model objects</a></li>
<li><a href="statistics--and-psych-specific-stuff.html#getting-model-information-and-performance-metrics" id="toc-getting-model-information-and-performance-metrics"><span class="toc-section-number">12.3.2</span> Getting model information and performance metrics</a></li>
<li><a href="statistics--and-psych-specific-stuff.html#effect-size-info-with-effectsize" id="toc-effect-size-info-with-effectsize"><span class="toc-section-number">12.3.3</span> Effect size info with <code>effectsize</code></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#quick-detailed-and-automated-reporting-with-report" id="toc-quick-detailed-and-automated-reporting-with-report"><span class="toc-section-number">12.3.4</span> Quick, detailed, and automated reporting with <code>report</code></a></li>
<li><a href="statistics--and-psych-specific-stuff.html#running-correlations-with-correlation" id="toc-running-correlations-with-correlation"><span class="toc-section-number">12.3.5</span> Running correlations with <code>correlation</code></a></li>
</ul></li>
</ul></li>
<li><a href="advanced-coding-tips.html#advanced-coding-tips" id="toc-advanced-coding-tips"><span class="toc-section-number">13</span> Advanced Coding Tips</a>
<ul>
<li><a href="advanced-coding-tips.html#grammar-and-syntax" id="toc-grammar-and-syntax"><span class="toc-section-number">13.1</span> Grammar and Syntax</a>
<ul>
<li><a href="advanced-coding-tips.html#regex-expressions-and-symbols" id="toc-regex-expressions-and-symbols"><span class="toc-section-number">13.1.1</span> Regex expressions and symbols</a></li>
<li><a href="advanced-coding-tips.html#the-colon-equals-operator" id="toc-the-colon-equals-operator"><span class="toc-section-number">13.1.2</span> The colon-equals (<code>:=</code>) operator</a></li>
<li><a href="advanced-coding-tips.html#user-supplied-expressions-or-named-columns-in-functions" id="toc-user-supplied-expressions-or-named-columns-in-functions"><span class="toc-section-number">13.1.3</span> User-supplied expressions or named columns in functions</a></li>
<li><a href="advanced-coding-tips.html#when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time" id="toc-when-a-command-requires-a-named-column-or-data-set-but-youve-already-supplied-it-and-its-required-a-second-time"><span class="toc-section-number">13.1.4</span> When a command requires a named column or data set, but you’ve already supplied it and it’s required a second time</a></li>
</ul></li>
<li><a href="advanced-coding-tips.html#creating-a-package" id="toc-creating-a-package"><span class="toc-section-number">13.2</span> Creating a package</a>
<ul>
<li><a href="advanced-coding-tips.html#documenting-package-meta-data" id="toc-documenting-package-meta-data"><span class="toc-section-number">13.2.1</span> Documenting package meta-data</a></li>
<li><a href="advanced-coding-tips.html#connecting-to-other-packages" id="toc-connecting-to-other-packages"><span class="toc-section-number">13.2.2</span> Connecting to other packages</a></li>
<li><a href="advanced-coding-tips.html#linking-git-and-github" id="toc-linking-git-and-github"><span class="toc-section-number">13.2.3</span> Linking Git and Github</a></li>
</ul></li>
<li><a href="advanced-coding-tips.html#creating-a-bookdown" id="toc-creating-a-bookdown"><span class="toc-section-number">13.3</span> Creating a bookdown</a>
<ul>
<li><a href="advanced-coding-tips.html#rendering-the-book-once-its-done" id="toc-rendering-the-book-once-its-done"><span class="toc-section-number">13.3.1</span> Rendering the book once it’s done</a></li>
</ul></li>
</ul></li>
<li><a href="creating-a-simulated-data-set.html#creating-a-simulated-data-set" id="toc-creating-a-simulated-data-set"><span class="toc-section-number">14</span> Creating a simulated data set</a>
<ul>
<li><a href="creating-a-simulated-data-set.html#part-1-independent-samples-from-a-normal-distribution" id="toc-part-1-independent-samples-from-a-normal-distribution"><span class="toc-section-number">14.1</span> Part 1: Independent samples from a normal distribution</a></li>
<li><a href="creating-a-simulated-data-set.html#part-2-creating-data-sets-with-quantitative-and-categorical-variables" id="toc-part-2-creating-data-sets-with-quantitative-and-categorical-variables"><span class="toc-section-number">14.2</span> Part 2: Creating data sets with quantitative and categorical variables</a>
<ul>
<li><a href="creating-a-simulated-data-set.html#a.-data-with-no-difference-among-groups" id="toc-a.-data-with-no-difference-among-groups"><span class="toc-section-number">14.2.1</span> 2.a. DATA WITH <strong>NO DIFFERENCE</strong> AMONG GROUPS</a></li>
<li><a href="creating-a-simulated-data-set.html#b.-data-with-a-difference-among-groups" id="toc-b.-data-with-a-difference-among-groups"><span class="toc-section-number">14.2.2</span> 2.b. Data <strong>WITH A DIFFERENCE</strong> among groups</a></li>
<li><a href="creating-a-simulated-data-set.html#c.-data-with-multiple-quantitative-variables-with-groups" id="toc-c.-data-with-multiple-quantitative-variables-with-groups"><span class="toc-section-number">14.2.3</span> 2.c. Data with <strong>MULTIPLE QUANTITATIVE VARIABLES</strong> with groups</a></li>
</ul></li>
<li><a href="creating-a-simulated-data-set.html#part-3-repeatedly-simulate-samples-with-replicate" id="toc-part-3-repeatedly-simulate-samples-with-replicate"><span class="toc-section-number">14.3</span> Part 3: Repeatedly simulate samples with replicate()</a></li>
<li><a href="creating-a-simulated-data-set.html#part-4-repeatedly-making-whole-data-sets" id="toc-part-4-repeatedly-making-whole-data-sets"><span class="toc-section-number">14.4</span> Part 4: repeatedly making whole data sets</a></li>
<li><a href="creating-a-simulated-data-set.html#part-5-using-purrr" id="toc-part-5-using-purrr"><span class="toc-section-number">14.5</span> Part 5: Using purrr</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating a simulated data set</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="wrangle-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Wrangle Data<a href="wrangle-data.html#wrangle-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter contains useful tips on wrangling (i.e., manipulating) data. If you need to know to do to things like create new variables, split one variable into multiple variables, pivot a data set from wide to long, etc., look no further.</p>
<p>If you want a pretty good intro tutorial to the <code>dplyr</code> package, click <a href="https://www-r--bloggers-com.cdn.ampproject.org/v/s/www.r-bloggers.com/2021/01/how-to-analyze-data-with-r-a-complete-beginner-guide-to-dplyr/amp/?amp_js_v=a6&amp;gsa=1&amp;usqp=mq331AQFKAGwASA%3D#csi=0&amp;referrer=https%3A%2F%2Fwww.google.com&amp;tf=From%20%251%24s&amp;ampshare=https%3A%2F%2Fwww.r-bloggers.com%2F2021%2F01%2Fhow-to-analyze-data-with-r-a-complete-beginner-guide-to-dplyr%2F">here</a></p>
<div id="joining-or-splitting" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Joining or Splitting<a href="wrangle-data.html#joining-or-splitting" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Joining and splitting data is pretty straightforward….</p>
<div id="whole-data-sets" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Whole Data Sets<a href="wrangle-data.html#whole-data-sets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The code below is from <a href="https://www.youtube.com/watch?v=SCdmyyoudb8&amp;t=23s">this excellent tutorial</a></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="wrangle-data.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2018</span>)</span>
<span id="cb10-2"><a href="wrangle-data.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="wrangle-data.html#cb10-3" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">customer_id=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb10-4"><a href="wrangle-data.html#cb10-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">product=</span><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&#39;toaster&#39;</span>,<span class="st">&#39;TV&#39;</span>,<span class="st">&#39;Dishwasher&#39;</span>),<span class="dv">10</span>,<span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-5"><a href="wrangle-data.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="wrangle-data.html#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="wrangle-data.html#cb10-7" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">customer_id=</span><span class="fu">c</span>(<span class="fu">sample</span>(df1<span class="sc">$</span>customer_id, <span class="dv">5</span>)),<span class="at">state=</span><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&#39;New York&#39;</span>,<span class="st">&#39;California&#39;</span>),<span class="dv">5</span>,<span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb10-8"><a href="wrangle-data.html#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="wrangle-data.html#cb10-9" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(df1)</span>
<span id="cb10-10"><a href="wrangle-data.html#cb10-10" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(df2)</span>
<span id="cb10-11"><a href="wrangle-data.html#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="wrangle-data.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># df1 =left table</span></span>
<span id="cb10-13"><a href="wrangle-data.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># df2= right table</span></span></code></pre></div>
<p>Inner join - retains only rows with values that appear in both tables, and matches by keys.</p>
<p><em>If you’re joining two Qualtrics surveys together, this is most likely the one you want to use (e.g. matching by participant name, and only keeping rows in the joined data set for participants that have responses logged in both survey 1 and survey 2</em></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="wrangle-data.html#cb11-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   customer_id product    state   
##         &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
## 1           1 Dishwasher New York
## 2           3 Dishwasher New York
## 3           6 toaster    New York
## 4           8 Dishwasher New York
## 5           9 Dishwasher New York</code></pre>
<p>Left join - returns everything in the left, and rows with matching keys in the right</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="wrangle-data.html#cb13-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    customer_id product    state   
##          &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
##  1           1 Dishwasher New York
##  2           2 Dishwasher &lt;NA&gt;    
##  3           3 Dishwasher New York
##  4           4 toaster    &lt;NA&gt;    
##  5           5 TV         &lt;NA&gt;    
##  6           6 toaster    New York
##  7           7 toaster    &lt;NA&gt;    
##  8           8 Dishwasher New York
##  9           9 Dishwasher New York
## 10          10 TV         &lt;NA&gt;</code></pre>
<p>Right join - returns everything in the right, and rows with matching keys in the left</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="wrangle-data.html#cb15-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   customer_id product    state   
##         &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
## 1           1 Dishwasher New York
## 2           3 Dishwasher New York
## 3           6 toaster    New York
## 4           8 Dishwasher New York
## 5           9 Dishwasher New York</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="wrangle-data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note: example if the customer id column was named something different in the second df</span></span>
<span id="cb17-2"><a href="wrangle-data.html#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#df1 %&gt;% left_join(df2,by=c(&#39;customer_id&#39;=&#39;name2&#39;))</span></span></code></pre></div>
<p>Full join - retain all rows from both tables, and join matching keys in both right and left</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="wrangle-data.html#cb18-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    customer_id product    state   
##          &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   
##  1           1 Dishwasher New York
##  2           2 Dishwasher &lt;NA&gt;    
##  3           3 Dishwasher New York
##  4           4 toaster    &lt;NA&gt;    
##  5           5 TV         &lt;NA&gt;    
##  6           6 toaster    New York
##  7           7 toaster    &lt;NA&gt;    
##  8           8 Dishwasher New York
##  9           9 Dishwasher New York
## 10          10 TV         &lt;NA&gt;</code></pre>
<p>Anti join - returns all rows in the left that do not have matching keys in the right</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="wrangle-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">anti_join</span>(df2,<span class="at">by=</span><span class="st">&#39;customer_id&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   customer_id product   
##         &lt;int&gt; &lt;chr&gt;     
## 1           2 Dishwasher
## 2           4 toaster   
## 3           5 TV        
## 4           7 toaster   
## 5          10 TV</code></pre>
</div>
<div id="individual-columnsvariables" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Individual Columns/Variables<a href="wrangle-data.html#individual-columnsvariables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Splitting or joining columns is much easier than doing it to whole data sets. You can use <code>dplyr::separate()</code> to accomplish the former, and <code>dplyr::unite()</code> for the latter.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="wrangle-data.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;hello&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;hello&quot;</code></pre>
</div>
</div>
<div id="selectingextracting-specific-variables-with-select" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Selecting/extracting specific variables with <code>select()</code><a href="wrangle-data.html#selectingextracting-specific-variables-with-select" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes when working with a data set, you want to work with a few <em>specific</em> variables. For instance, maybe you want to view a graph of only reverse-coded variables (which start with the prefix “r”); or maybe you want to create a subset of your data that has a few specific variables removed. For this you can use <code>dplyr::select()</code> and its associated helper commands</p>
<p><code>select()</code> can be thought of as “extract”; it tells R to identify and “extract” a specific variable (or variables)</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="wrangle-data.html#cb24-1" aria-hidden="true" tabindex="-1"></a>cars<span class="ot">=</span>mtcars</span>
<span id="cb24-2"><a href="wrangle-data.html#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="wrangle-data.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select one column</span></span>
<span id="cb24-4"><a href="wrangle-data.html#cb24-4" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(mpg)</span>
<span id="cb24-5"><a href="wrangle-data.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="wrangle-data.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># select multiple columns, if they are all next to one another</span></span>
<span id="cb24-7"><a href="wrangle-data.html#cb24-7" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(mpg<span class="sc">:</span>hp)</span>
<span id="cb24-8"><a href="wrangle-data.html#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="wrangle-data.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># select multiple columns by name (when not next to one another) by defining them in a vector</span></span>
<span id="cb24-10"><a href="wrangle-data.html#cb24-10" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(mpg, hp, wt))</span>
<span id="cb24-11"><a href="wrangle-data.html#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="wrangle-data.html#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># select only variables that start with a certain prefix/character/pattern/etc.</span></span>
<span id="cb24-13"><a href="wrangle-data.html#cb24-13" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;d&quot;</span>))</span>
<span id="cb24-14"><a href="wrangle-data.html#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="wrangle-data.html#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ...or columns that end with a certain prefix/etc.</span></span>
<span id="cb24-16"><a href="wrangle-data.html#cb24-16" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;t&quot;</span>))</span>
<span id="cb24-17"><a href="wrangle-data.html#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="wrangle-data.html#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co"># ...or contains a certain pattern or string</span></span>
<span id="cb24-19"><a href="wrangle-data.html#cb24-19" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;se&quot;</span>))</span>
<span id="cb24-20"><a href="wrangle-data.html#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="wrangle-data.html#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co"># select ALL OF the variables in a data set that match those of a pre-defined vector</span></span>
<span id="cb24-22"><a href="wrangle-data.html#cb24-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-23"><a href="wrangle-data.html#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># first define the names in a vector</span></span>
<span id="cb24-24"><a href="wrangle-data.html#cb24-24" aria-hidden="true" tabindex="-1"></a>  vars<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;hp&quot;</span>, <span class="st">&quot;drat&quot;</span>, <span class="st">&quot;gear&quot;</span>, <span class="st">&quot;carb&quot;</span>)</span>
<span id="cb24-25"><a href="wrangle-data.html#cb24-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-26"><a href="wrangle-data.html#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">#now use helper</span></span>
<span id="cb24-27"><a href="wrangle-data.html#cb24-27" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(vars))</span>
<span id="cb24-28"><a href="wrangle-data.html#cb24-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-29"><a href="wrangle-data.html#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="co"># select ANY OF the variables in a pre-defined vector</span></span>
<span id="cb24-30"><a href="wrangle-data.html#cb24-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-31"><a href="wrangle-data.html#cb24-31" aria-hidden="true" tabindex="-1"></a>  vars_2<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;hp&quot;</span>, <span class="st">&quot;drat&quot;</span>, <span class="st">&quot;watermelon&quot;</span>, <span class="st">&quot;grilled_cheese&quot;</span>) <span class="co"># only the first two will be in the data</span></span>
<span id="cb24-32"><a href="wrangle-data.html#cb24-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-33"><a href="wrangle-data.html#cb24-33" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">any_of</span>(vars_2)) <span class="co"># only (and all of) the variables actually PRESENT in the data are pulled</span></span>
<span id="cb24-34"><a href="wrangle-data.html#cb24-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-35"><a href="wrangle-data.html#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="co"># select only variables of a certain class or type</span></span>
<span id="cb24-36"><a href="wrangle-data.html#cb24-36" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span>
<span id="cb24-37"><a href="wrangle-data.html#cb24-37" aria-hidden="true" tabindex="-1"></a>  cars <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.character))</span></code></pre></div>
<p>Other examples can be seen on <a href="https://tidyselect.r-lib.org/reference/language.html">THIS LINK</a> for a simple but detailed guide.</p>
</div>
<div id="advanced-filtering-techniques" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Advanced Filtering techniques<a href="wrangle-data.html#advanced-filtering-techniques" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All info here and the code taken from <a href="https://suzan.rbind.io/2018/02/dplyr-tutorial-3/#filtering-based-on-a-exact-character-variable-matches">this link</a>; credit goes to Suzan Baert.</p>
<div id="filter-based-on-partial-match" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Filter based on partial match<a href="wrangle-data.html#filter-based-on-partial-match" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Combine <code>filter</code> with <code>str_detect</code> to search for pattern matches in a column</p>
</div>
<div id="filtering-based-on-multiple-conditions" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Filtering based on multiple conditions<a href="wrangle-data.html#filtering-based-on-multiple-conditions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can filter for more than one value at once, or combine operators to do searches with conditions….</p>
<table>
<colgroup>
<col width="70%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th>Goal</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Return only rows where <strong><em>both</em></strong> conditions are met</td>
<td><code>filter(condition1, condition2)</code></td>
</tr>
<tr class="even">
<td>Return all rows where condition 1 is true but condition 2 is not</td>
<td><code>filter(condition1, !condition2)</code></td>
</tr>
<tr class="odd">
<td>Return rows where condition 1 <strong><em>and/or</em></strong> condition 2 is met</td>
<td><code>filter(condition1 | condition2)</code></td>
</tr>
<tr class="even">
<td>Return all rows where only one of the conditions is met, <strong><em>and not when both are met</em></strong></td>
<td><code>filter(xor(condition1, condition2)</code></td>
</tr>
</tbody>
</table>
<p>The sample code will return all rows with a bodywt above 100 and either have a <code>sleep_total</code> above 15 or are not part of the Carnivora order.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="wrangle-data.html#cb25-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="wrangle-data.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, order, sleep_total<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="wrangle-data.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(bodywt <span class="sc">&gt;</span> <span class="dv">100</span>, (sleep_total <span class="sc">&gt;</span> <span class="dv">15</span> <span class="sc">|</span> order <span class="sc">!=</span> <span class="st">&quot;Carnivora&quot;</span>))</span></code></pre></div>
</div>
<div id="filtering-across-multiple-columns" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Filtering across multiple columns<a href="wrangle-data.html#filtering-across-multiple-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>From Susan Baert’s blog page:</p>
<p>You have three options for how to do this:</p>
<ul>
<li><p><code>filter_all()</code>, which filters columns <em>based on your further instructions</em></p></li>
<li><p><code>filter_if()</code>, which requires a boolean to indicate which columns to filter on. If that is true, the filter instructions will be followed.</p></li>
<li><p><code>filter_at()</code>, which requires you to specify columns inside a <code>vars</code> argument for which the filtering will be done.</p></li>
</ul>
<p>Retain all rows with the pattern match “Ca” inside. Useful for when you want to search for a key pattern (or number) across multiple columns.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="wrangle-data.html#cb26-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="wrangle-data.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name<span class="sc">:</span>order, sleep_total, <span class="sc">-</span>vore) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="wrangle-data.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_all</span>(<span class="fu">any_vars</span>(<span class="fu">str_detect</span>(., <span class="at">pattern =</span> <span class="st">&quot;Ca&quot;</span>)))</span>
<span id="cb26-4"><a href="wrangle-data.html#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="wrangle-data.html#cb26-5" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span>  </span>
<span id="cb26-6"><a href="wrangle-data.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb26-7"><a href="wrangle-data.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_all</span>(<span class="fu">any_vars</span>(. <span class="sc">&lt;</span> <span class="fl">0.1</span>))</span>
<span id="cb26-8"><a href="wrangle-data.html#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="wrangle-data.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also switch any_vars to all_vars to filter across the whole data frame</span></span>
<span id="cb26-10"><a href="wrangle-data.html#cb26-10" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span>  </span>
<span id="cb26-11"><a href="wrangle-data.html#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>bodywt, <span class="sc">-</span>awake) <span class="sc">%&gt;%</span> </span>
<span id="cb26-12"><a href="wrangle-data.html#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_all</span>(<span class="fu">all_vars</span>(. <span class="sc">&gt;</span> <span class="dv">1</span>))</span></code></pre></div>
<p>What if you want to filter specific column types in your data frame, like just date columns, to find a specific date across multiple date columns? Or filter across multiple number columns to find every instance of a specific number? <code>filter_if</code> is better than <code>filter_all</code> here because the latter would return a filter search across the whole data frame. By using <code>filter_if</code>, we can get more specific about which columns to search through.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="wrangle-data.html#cb27-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="wrangle-data.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name<span class="sc">:</span>order, sleep_total<span class="sc">:</span>sleep_rem) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="wrangle-data.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_if</span>(is.character, <span class="fu">any_vars</span>(<span class="fu">is.na</span>(.)))</span></code></pre></div>
<p>The last command, <code>filter_at</code>, does things differently. It doesn’t filter all columns at once; and you do not have to specify the column type or which columns. <strong><em>This one allows you to indicate which columns to search through like you would within any select statement</em></strong>.</p>
<p>Example: Search through the columns that start with “sleep”, for values in all of those columns above .5.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="wrangle-data.html#cb28-1" aria-hidden="true" tabindex="-1"></a>msleep <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="wrangle-data.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, sleep_total<span class="sc">:</span>sleep_rem, brainwt<span class="sc">:</span>bodywt) <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="wrangle-data.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_at</span>(<span class="fu">vars</span>(<span class="fu">contains</span>(<span class="st">&quot;sleep&quot;</span>)), <span class="fu">all_vars</span>(.<span class="sc">&gt;</span><span class="dv">5</span>))</span></code></pre></div>
</div>
</div>
<div id="if-then-and-case-when" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> If-then and Case-when<a href="wrangle-data.html#if-then-and-case-when" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="if-then" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> If-then<a href="wrangle-data.html#if-then" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The premise of an if/then or if/else statement is simple: “If condition 1 is satisfied, perform x operation; if not, then do y”</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="wrangle-data.html#cb29-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">power_level=</span><span class="fu">ifelse</span>(mtcars<span class="sc">$</span>hp<span class="sc">&lt;</span><span class="dv">350</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb power_level
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4         Low
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4         Low
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1         Low
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1         Low
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2         Low
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1         Low</code></pre>
<p>This line of code effectively says: if the length in Sepal.Length is &gt;5, set new variable = to “short”; else, set it to “long”</p>
</div>
<div id="case-when" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Case-when<a href="wrangle-data.html#case-when" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you have 3+ conditions, it’s easier to use case-when. This is a more simple and straightforward approach than nesting multiple if-else commands</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="wrangle-data.html#cb31-1" aria-hidden="true" tabindex="-1"></a>My_vector<span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb31-2"><a href="wrangle-data.html#cb31-2" aria-hidden="true" tabindex="-1"></a>    Condition1 <span class="sc">~</span> value1,</span>
<span id="cb31-3"><a href="wrangle-data.html#cb31-3" aria-hidden="true" tabindex="-1"></a>    Condition2 <span class="sc">~</span> value2,</span>
<span id="cb31-4"><a href="wrangle-data.html#cb31-4" aria-hidden="true" tabindex="-1"></a>    Condition3 <span class="sc">~</span> value3</span>
<span id="cb31-5"><a href="wrangle-data.html#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> valueForEverythingElse <span class="co">#catch all for things that don&#39;t meet the above conditions</span></span>
<span id="cb31-6"><a href="wrangle-data.html#cb31-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="wrangle-data.html#cb32-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">size=</span> <span class="fu">case_when</span>(cyl<span class="sc">==</span><span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;small&quot;</span>,</span>
<span id="cb32-2"><a href="wrangle-data.html#cb32-2" aria-hidden="true" tabindex="-1"></a>                                  cyl<span class="sc">==</span><span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;medium&quot;</span>,</span>
<span id="cb32-3"><a href="wrangle-data.html#cb32-3" aria-hidden="true" tabindex="-1"></a>                                  cyl<span class="sc">==</span><span class="dv">8</span> <span class="sc">~</span> <span class="st">&quot;large&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="wrangle-data.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(cyl,size)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                   cyl   size
## Mazda RX4           6 medium
## Mazda RX4 Wag       6 medium
## Datsun 710          4  small
## Hornet 4 Drive      6 medium
## Hornet Sportabout   8  large
## Valiant             6 medium</code></pre>
</div>
</div>
<div id="conditional-replacement-of-values" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Conditional replacement of values<a href="wrangle-data.html#conditional-replacement-of-values" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following code is useful if you want to replace a value in one column, and the replacement is conditional upon the value in another column.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="wrangle-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="wrangle-data.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(displ, cty, hwy),</span>
<span id="cb34-3"><a href="wrangle-data.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">case_when</span>(cyl <span class="sc">==</span> 4L <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="cn">NA</span>),</span>
<span id="cb34-4"><a href="wrangle-data.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(.x))))</span></code></pre></div>
<pre><code>## # A tibble: 234 x 11
##    manufacturer model      displ  year   cyl trans    drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4          NA    1999     4 auto(l5) f        NA    NA p     comp~
##  2 audi         a4          NA    1999     4 manual(~ f        NA    NA p     comp~
##  3 audi         a4          NA    2008     4 manual(~ f        NA    NA p     comp~
##  4 audi         a4          NA    2008     4 auto(av) f        NA    NA p     comp~
##  5 audi         a4           2.8  1999     6 auto(l5) f        16    26 p     comp~
##  6 audi         a4           2.8  1999     6 manual(~ f        18    26 p     comp~
##  7 audi         a4           3.1  2008     6 auto(av) f        18    27 p     comp~
##  8 audi         a4 quattro  NA    1999     4 manual(~ 4        NA    NA p     comp~
##  9 audi         a4 quattro  NA    1999     4 auto(l5) 4        NA    NA p     comp~
## 10 audi         a4 quattro  NA    2008     4 manual(~ 4        NA    NA p     comp~
## # ... with 224 more rows</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="wrangle-data.html#cb36-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="wrangle-data.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(rank),</span>
<span id="cb36-3"><a href="wrangle-data.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(participant_score) <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="cn">NA</span>),</span>
<span id="cb36-4"><a href="wrangle-data.html#cb36-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(.x))))</span></code></pre></div>
</div>
<div id="merging-variables" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Merging variables<a href="wrangle-data.html#merging-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes you’ll have multiple variables and you want to collapse them into a single variable. The <code>pmin()</code> command is useful for this.</p>
<pre class="{r3.14}"><code>example_data=tribble(~A,~B,~C,
                     1,NA,NA,
                     2,NA,NA,
                     3,NA,NA,
                     NA,4,NA,
                     NA,5,NA,
                     NA,6,NA,
                     NA,NA,7,
                     NA,NA,8,
                     NA,NA,9)

example_data %&gt;%
  mutate(accept_reject = 
           pmin(A,B,C,na.rm = TRUE))</code></pre>
</div>
<div id="apply-a-function-to-multiple-variables-at-once" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Apply a function to multiple variables at once<a href="wrangle-data.html#apply-a-function-to-multiple-variables-at-once" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can either specify each column individually, like above, or tell R to identify columns for you based on their type or their name. This requires adding in one additional verb–either contains() or where() depending on what you want to do.</p>
<p>Two simple examples:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="wrangle-data.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># turn multiple variables into factors</span></span>
<span id="cb38-2"><a href="wrangle-data.html#cb38-2" aria-hidden="true" tabindex="-1"></a>ex_data<span class="ot">=</span>dplyr<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span>color, <span class="sc">~</span>car,</span>
<span id="cb38-3"><a href="wrangle-data.html#cb38-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;red&quot;</span>, <span class="st">&quot;corvette&quot;</span>,</span>
<span id="cb38-4"><a href="wrangle-data.html#cb38-4" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;chevelle&quot;</span>,</span>
<span id="cb38-5"><a href="wrangle-data.html#cb38-5" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;green&quot;</span>, <span class="st">&quot;camaro&quot;</span>,</span>
<span id="cb38-6"><a href="wrangle-data.html#cb38-6" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;red&quot;</span>, <span class="st">&quot;corvette&quot;</span>,</span>
<span id="cb38-7"><a href="wrangle-data.html#cb38-7" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;green&quot;</span>, <span class="st">&quot;chevelle&quot;</span>,</span>
<span id="cb38-8"><a href="wrangle-data.html#cb38-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;gto&quot;</span>)</span>
<span id="cb38-9"><a href="wrangle-data.html#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="wrangle-data.html#cb38-10" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(ex_data)</span></code></pre></div>
<pre><code>## Rows: 6
## Columns: 2
## $ color &lt;chr&gt; &quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;red&quot;, &quot;green&quot;, &quot;yellow&quot;
## $ car   &lt;chr&gt; &quot;corvette&quot;, &quot;chevelle&quot;, &quot;camaro&quot;, &quot;corvette&quot;, &quot;chevelle&quot;, &quot;gto&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="wrangle-data.html#cb40-1" aria-hidden="true" tabindex="-1"></a>ex_data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(color, car),factor))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   color  car     
##   &lt;fct&gt;  &lt;fct&gt;   
## 1 red    corvette
## 2 blue   chevelle
## 3 green  camaro  
## 4 red    corvette
## 5 green  chevelle
## 6 yellow gto</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="wrangle-data.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># round multiple columns to 1 decimal place</span></span>
<span id="cb42-2"><a href="wrangle-data.html#cb42-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(disp<span class="sc">:</span>qsec),round,<span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat  wt qsec vs am gear carb
## Mazda RX4         21.0   6  160 110  3.9 2.6 16.5  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110  3.9 2.9 17.0  0  1    4    4
## Datsun 710        22.8   4  108  93  3.9 2.3 18.6  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110  3.1 3.2 19.4  1  0    3    1
## Hornet Sportabout 18.7   8  360 175  3.1 3.4 17.0  0  0    3    2
## Valiant           18.1   6  225 105  2.8 3.5 20.2  1  0    3    1</code></pre>
</div>
<div id="pivoting-i.e.-transposing-data" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> Pivoting (i.e., transposing) data<a href="wrangle-data.html#pivoting-i.e.-transposing-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="condense-multiple-rows-into-a-single-column-pivot-wide-to-long" class="section level3 hasAnchor" number="3.8.1">
<h3><span class="header-section-number">3.8.1</span> Condense multiple rows into a single column (pivot wide to long)<a href="wrangle-data.html#condense-multiple-rows-into-a-single-column-pivot-wide-to-long" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Rearranging data like this can make it easier to work with and analyze. Example below from my gradebook for stats (exported from Canvas), with fake names.</p>
<p>The command structure is as follows:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="wrangle-data.html#cb44-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">pivot_longer</span>( <span class="co"># Transpose LENGTHWISE by....</span></span>
<span id="cb44-2"><a href="wrangle-data.html#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(), <span class="co"># Taking ALL variable names...</span></span>
<span id="cb44-3"><a href="wrangle-data.html#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to=</span><span class="st">&quot;variable&quot;</span>, <span class="co"># ...and dumping them into this new variable/column</span></span>
<span id="cb44-4"><a href="wrangle-data.html#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to=</span><span class="st">&quot;missing_count&quot;</span>) <span class="co">#...and placing their values in this other new column</span></span></code></pre></div>
<p><strong>NOTE!!!</strong> Pivoting data from wide to long like this expands the number of rows to make a matrix so that (for example, each student now has as a row for each assignment). Therefore, you can only pivot longways (or wide) <strong>ONCE</strong>, otherwise you will make duplicates.</p>
<p><em>If you need to pivot multiple columns, just include all of the columns in one single pivot; do not use two separate, back to back pivot commands.</em></p>
<p>Example:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="wrangle-data.html#cb45-1" aria-hidden="true" tabindex="-1"></a>gradebook<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb45-2"><a href="wrangle-data.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>Student, <span class="sc">~</span>Homework<span class="fl">.1</span>, <span class="sc">~</span>Homework<span class="fl">.2</span>, <span class="sc">~</span>Homework<span class="fl">.3</span>, <span class="sc">~</span>Homework<span class="fl">.4</span>, <span class="sc">~</span>Homework<span class="fl">.5</span>, <span class="sc">~</span>Quiz<span class="fl">.1</span>, <span class="sc">~</span>Quiz<span class="fl">.2</span>, <span class="sc">~</span>Quiz<span class="fl">.3</span>, <span class="sc">~</span>Quiz<span class="fl">.4</span>, <span class="sc">~</span>Final,</span>
<span id="cb45-3"><a href="wrangle-data.html#cb45-3" aria-hidden="true" tabindex="-1"></a>     <span class="st">&quot;Bob&quot;</span>,         19L,          0L,          <span class="dv">13</span>,          <span class="dv">16</span>,          0L,      <span class="dv">21</span>,      7L,      <span class="dv">15</span>,    <span class="fl">17.5</span>,     <span class="dv">33</span>,</span>
<span id="cb45-4"><a href="wrangle-data.html#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Jane&quot;</span>,         17L,         19L,          <span class="dv">16</span>,        <span class="fl">16.5</span>,         25L,    <span class="fl">21.5</span>,     19L,   <span class="fl">14.75</span>,     <span class="fl">9.5</span>,   <span class="fl">39.5</span>,</span>
<span id="cb45-5"><a href="wrangle-data.html#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;John&quot;</span>,         19L,         19L,        <span class="fl">14.5</span>,        <span class="fl">19.5</span>,         25L,      <span class="dv">21</span>,     21L,    <span class="fl">18.5</span>,      <span class="dv">17</span>,   <span class="fl">46.5</span></span>
<span id="cb45-6"><a href="wrangle-data.html#cb45-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-7"><a href="wrangle-data.html#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="wrangle-data.html#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gradebook)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 11
##   Student Homework.1 Homework.2 Homework.3 Homework.4 Homework.5 Quiz.1 Quiz.2
##   &lt;chr&gt;        &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt;
## 1 Bob             19          0       13         16            0   21        7
## 2 Jane            17         19       16         16.5         25   21.5     19
## 3 John            19         19       14.5       19.5         25   21       21
## # ... with 3 more variables: Quiz.3 &lt;dbl&gt;, Quiz.4 &lt;dbl&gt;, Final &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="wrangle-data.html#cb47-1" aria-hidden="true" tabindex="-1"></a>gradebook<span class="ot">=</span>gradebook <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="wrangle-data.html#cb47-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">pivot_longer</span>( <span class="co"># Transpose lengthwise by:</span></span>
<span id="cb47-3"><a href="wrangle-data.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> Homework<span class="fl">.1</span><span class="sc">:</span>Final, <span class="co"># Taking these variables</span></span>
<span id="cb47-4"><a href="wrangle-data.html#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to=</span><span class="st">&quot;Assignment&quot;</span>, <span class="co"># ...and dumping them into this new variable, storing them lengthwise</span></span>
<span id="cb47-5"><a href="wrangle-data.html#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to=</span><span class="st">&quot;Points&quot;</span>) <span class="co">#...then place their values in this new column</span></span>
<span id="cb47-6"><a href="wrangle-data.html#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="wrangle-data.html#cb47-7" aria-hidden="true" tabindex="-1"></a>gradebook <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Student Assignment Points
##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;
## 1 Bob     Homework.1     19
## 2 Bob     Homework.2      0
## 3 Bob     Homework.3     13
## 4 Bob     Homework.4     16
## 5 Bob     Homework.5      0
## 6 Bob     Quiz.1         21</code></pre>
</div>
</div>
<div id="turn-row-names-into-a-columnvariable" class="section level2 hasAnchor" number="3.9">
<h2><span class="header-section-number">3.9</span> Turn row names into a column/variable<a href="wrangle-data.html#turn-row-names-into-a-columnvariable" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use the <code>rownames()</code> command to turn row names into a variable</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="wrangle-data.html#cb49-1" aria-hidden="true" tabindex="-1"></a>cars<span class="ot">=</span><span class="fu">rownames_to_column</span>(mtcars, <span class="at">var =</span> <span class="st">&quot;car&quot;</span>)</span>
<span id="cb49-2"><a href="wrangle-data.html#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="wrangle-data.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(cars) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 12
##   car               mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Mazda RX4        21       6   160   110  3.9   2.62  16.5     0     1     4     4
## 2 Mazda RX4 Wag    21       6   160   110  3.9   2.88  17.0     0     1     4     4
## 3 Datsun 710       22.8     4   108    93  3.85  2.32  18.6     1     1     4     1
## 4 Hornet 4 Drive   21.4     6   258   110  3.08  3.22  19.4     1     0     3     1
## 5 Hornet Sportab~  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2
## 6 Valiant          18.1     6   225   105  2.76  3.46  20.2     1     0     3     1</code></pre>
</div>
<div id="how-to-editchange-column-names" class="section level2 hasAnchor" number="3.10">
<h2><span class="header-section-number">3.10</span> How to edit/change column names<a href="wrangle-data.html#how-to-editchange-column-names" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>TWO WAYS TO DO THIS: Use <code>colnames()</code> (for base R) or <code>rename()</code> (for tidyverse)</p>
<p><code>colnames()</code> pulls up all the column/variable names as a vector. If you want to actually change them, you’ll need to combine this command with something like the sub() or gsub() commands (for base R). I’m going to skip this because…its base R.</p>
<p>To access and change the names faster via tidyverse, run use <code>rename()</code></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="wrangle-data.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># clear R&#39;s memory</span></span>
<span id="cb51-2"><a href="wrangle-data.html#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="wrangle-data.html#cb51-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">&quot;hurr&quot;</span><span class="ot">=</span><span class="st">&quot;Sepal.Length&quot;</span>,</span>
<span id="cb51-4"><a href="wrangle-data.html#cb51-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;durr&quot;</span><span class="ot">=</span><span class="st">&quot;Sepal.Width&quot;</span>,</span>
<span id="cb51-5"><a href="wrangle-data.html#cb51-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;abcdefgh&quot;</span><span class="ot">=</span><span class="st">&quot;Species&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-6"><a href="wrangle-data.html#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   hurr durr Petal.Length Petal.Width abcdefgh
## 1  5.1  3.5          1.4         0.2   setosa
## 2  4.9  3.0          1.4         0.2   setosa
## 3  4.7  3.2          1.3         0.2   setosa
## 4  4.6  3.1          1.5         0.2   setosa
## 5  5.0  3.6          1.4         0.2   setosa
## 6  5.4  3.9          1.7         0.4   setosa</code></pre>
<p>If you need to do some really fancy conditional renaming (e.g., changing all variables that start with “r” to start with “rf” instead, to make it more clear that the prefix actually stands for “risk factor” rather than “reverse coded”), you’ll need to use <code>rename_with()</code>.</p>
<p>This command has two parts to it: the data set, and the function you wish to apply to it (which you put after the <code>~</code>)</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="wrangle-data.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(iris, <span class="sc">~</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot;.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>, .x, <span class="at">fixed =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="wrangle-data.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal_Length Sepal_Width Petal_Length Petal_Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>The gsub() function from Base R identifies matching patterns in the data and substitutes them with what you want instead. Think of it like R’s version of Find/Replace from Microsoft Word.</p>
<p>The above line of code thus does the following: 1. First, it checks the column names of the supplied data set (<code>iris</code>) for a specific pattern (specified in <code>pattern=</code> ) 2. Then it replaces that pattern with your input in <code>replacement=</code></p>
<p>The great thing about rename_with() is that the .fn (or <code>~</code> for short) can take <em>ANY</em> function as input. For example, if you want to <strong>add</strong> an element to the column names rather than replace something, (e.g., a prefix or suffix), you can change the function to:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="wrangle-data.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>( iris, <span class="sc">~</span> <span class="fu">paste0</span>(.x,  <span class="st">&quot;_text&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="wrangle-data.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   Sepal.Length_text Sepal.Width_text Petal.Length_text Petal.Width_text
## 1               5.1              3.5               1.4              0.2
## 2               4.9              3.0               1.4              0.2
## 3               4.7              3.2               1.3              0.2
## 4               4.6              3.1               1.5              0.2
## 5               5.0              3.6               1.4              0.2
## 6               5.4              3.9               1.7              0.4
##   Species_text
## 1       setosa
## 2       setosa
## 3       setosa
## 4       setosa
## 5       setosa
## 6       setosa</code></pre>
<p>The above line adds a suffix. You can also add a prefix in the exact same way, just by switching the order of the string and the pattern in the paste0 command.</p>
<p><strong><em>Alternative method to the above</em></strong> This is a second way to do the above. It may appear more simple, but it’s also probably not as theoretically consistent with how the packages were made…..it uses the <code>stringr</code> package to rename the column names, and <code>stringr</code> is typically used for editing vectors of strings in a data set.</p>
<p>…so it works, but it’s a little unconventional because you call and edit the column names like you would a variable in your data set.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="wrangle-data.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(iris)<span class="ot">=</span><span class="fu">str_replace</span>(<span class="fu">colnames</span>(iris), <span class="at">pattern =</span> <span class="st">&quot;.&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<p>In short: <code>rename()</code> and <code>rename_with()</code> are for <em>renaming</em> variables, as their names imply. The <code>str_</code> verbs from the stringr package are for editing string-based variabels in your data set. Either works though with a little ingenuity.</p>
</div>
<div id="re-order-columns-in-a-data-set" class="section level2 hasAnchor" number="3.11">
<h2><span class="header-section-number">3.11</span> Re-order columns in a data set<a href="wrangle-data.html#re-order-columns-in-a-data-set" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use <code>relocate()</code> to change column positions. If you need to move multiple columns at once, this command uses the same syntax as <code>select()</code>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="wrangle-data.html#cb58-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="co"># notice the column order</span></span></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="wrangle-data.html#cb60-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(hp<span class="sc">:</span>wt, <span class="at">.after=</span> am) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                    mpg cyl disp  qsec vs am  hp drat    wt gear carb
## Mazda RX4         21.0   6  160 16.46  0  1 110 3.90 2.620    4    4
## Mazda RX4 Wag     21.0   6  160 17.02  0  1 110 3.90 2.875    4    4
## Datsun 710        22.8   4  108 18.61  1  1  93 3.85 2.320    4    1
## Hornet 4 Drive    21.4   6  258 19.44  1  0 110 3.08 3.215    3    1
## Hornet Sportabout 18.7   8  360 17.02  0  0 175 3.15 3.440    3    2
## Valiant           18.1   6  225 20.22  1  0 105 2.76 3.460    3    1</code></pre>
</div>
<div id="date-and-time-variables" class="section level2 hasAnchor" number="3.12">
<h2><span class="header-section-number">3.12</span> Date and time variables<a href="wrangle-data.html#date-and-time-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Formatting a column of dates can be extremely helpful if you need to work with time data, but also an extreme pain in the ass if it’s not stored correctly. This tutorial will be divided into two parts to cover both scenarios that you could encounter. It requires things to be done in two stages, and very precisely.</p>
<div id="date-time-objects" class="section level3 hasAnchor" number="3.12.1">
<h3><span class="header-section-number">3.12.1</span> Date-time objects<a href="wrangle-data.html#date-time-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you’re lucky enough to have a vector of date-times, like what Qualtrics gives you, this will be brainless. Just do the following:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="wrangle-data.html#cb62-1" aria-hidden="true" tabindex="-1"></a>example_datetime_data<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span>datetime,</span>
<span id="cb62-2"><a href="wrangle-data.html#cb62-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;2010-08-03 00:50:50&quot;</span>,</span>
<span id="cb62-3"><a href="wrangle-data.html#cb62-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;2010-08-04 01:40:50&quot;</span>,</span>
<span id="cb62-4"><a href="wrangle-data.html#cb62-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;2010-08-07 21:50:50&quot;</span>)</span>
<span id="cb62-5"><a href="wrangle-data.html#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="wrangle-data.html#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(example_datetime_data) <span class="co"># stored as character string</span></span></code></pre></div>
<pre><code>## # A tibble: 3 x 1
##   datetime           
##   &lt;chr&gt;              
## 1 2010-08-03 00:50:50
## 2 2010-08-04 01:40:50
## 3 2010-08-07 21:50:50</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="wrangle-data.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidyverse</span></span>
<span id="cb64-2"><a href="wrangle-data.html#cb64-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_date</span>(example_datetime_data<span class="sc">$</span>datetime)</span></code></pre></div>
<pre><code>## [1] &quot;2010-08-03&quot; &quot;2010-08-04&quot; &quot;2010-08-07&quot;</code></pre>
</div>
<div id="date-only-objects" class="section level3 hasAnchor" number="3.12.2">
<h3><span class="header-section-number">3.12.2</span> Date-only objects<a href="wrangle-data.html#date-only-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you’re unlucky enough to have <em>only</em> dates, and said dates are written in the traditional <strong>x/x/xxxx</strong> format, this will be an annoyance that has to be done in two stages.</p>
<p>First, assuming your data is already imported and is being stored as a vector of character strings, you have to tell R to adjust the formatting of dates. You cannot change it from a character-based object into a Date or DateTime one until it recognizes the correct formatting.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="wrangle-data.html#cb66-1" aria-hidden="true" tabindex="-1"></a>example_date_data<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span>X1,     <span class="sc">~</span>X2,</span>
<span id="cb66-2"><a href="wrangle-data.html#cb66-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/4/2021&quot;</span>,  <span class="sc">-</span><span class="fl">49.87</span>,</span>
<span id="cb66-3"><a href="wrangle-data.html#cb66-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/4/2021&quot;</span>,  <span class="sc">-</span><span class="fl">13.85</span>,</span>
<span id="cb66-4"><a href="wrangle-data.html#cb66-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/3/2021&quot;</span>,   <span class="sc">-</span><span class="fl">7.45</span>,</span>
<span id="cb66-5"><a href="wrangle-data.html#cb66-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;8/3/2021&quot;</span>, <span class="sc">-</span><span class="fl">172.71</span>)</span>
<span id="cb66-6"><a href="wrangle-data.html#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="wrangle-data.html#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct formatting</span></span>
<span id="cb66-8"><a href="wrangle-data.html#cb66-8" aria-hidden="true" tabindex="-1"></a>example_date_data<span class="sc">$</span>X1<span class="ot">=</span><span class="fu">format</span>(<span class="fu">as.POSIXct</span>(example_date_data<span class="sc">$</span>X1,<span class="at">format=</span><span class="st">&#39;%m/%d/%Y&#39;</span>),<span class="at">format=</span><span class="st">&#39;%Y-%m-%d&#39;</span>)</span>
<span id="cb66-9"><a href="wrangle-data.html#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="wrangle-data.html#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">as_tibble</span>(example_date_data))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   X1              X2
##   &lt;chr&gt;        &lt;dbl&gt;
## 1 2021-08-04  -49.9 
## 2 2021-08-04  -13.8 
## 3 2021-08-03   -7.45
## 4 2021-08-03 -173.</code></pre>
<p>In the code above, note that there are two <code>format</code> commands: The first one tells R how the date data is <strong>currently being stored</strong>, while the second at the end tells it how <strong>you want it to be stored.</strong> In this case, we are changing it from the way we would usually hand write a date (e.g., 10/26/1993) to a format commonly recognized and used in Excel and stats software (1993-10-26). <em>If your column also has times in it, you also need to include that too!</em></p>
<p>Second, you can now correct the object’s structure. You can do this with base R’s <code>as.Date()</code> or tidyverse’s <code>date()</code> verbs.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="wrangle-data.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidyverse</span></span>
<span id="cb68-2"><a href="wrangle-data.html#cb68-2" aria-hidden="true" tabindex="-1"></a>example_date_data<span class="sc">$</span>X1<span class="ot">=</span> lubridate<span class="sc">::</span><span class="fu">date</span>(example_date_data<span class="sc">$</span>X1) </span>
<span id="cb68-3"><a href="wrangle-data.html#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="wrangle-data.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Base R version</span></span>
<span id="cb68-5"><a href="wrangle-data.html#cb68-5" aria-hidden="true" tabindex="-1"></a>example_date_data<span class="sc">$</span>X1<span class="ot">=</span><span class="fu">as.Date</span>(example_date_data<span class="sc">$</span>X1)</span></code></pre></div>
<p>Notice how the object is now stored as the correct type in the table above.</p>
<p><strong><em>NOTE!</em></strong> This entire process has been included in the <code>tidy_date()</code> command in my package, <code>legaldmlab</code>.</p>
</div>
<div id="find-the-difference-between-two-datestimes" class="section level3 hasAnchor" number="3.12.3">
<h3><span class="header-section-number">3.12.3</span> Find the difference between two dates/times<a href="wrangle-data.html#find-the-difference-between-two-datestimes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="wrangle-data.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">difftime</span>(part_1<span class="sc">$</span>end_date[<span class="dv">1</span>], part_2<span class="sc">$</span>end_date[<span class="dv">1</span>], <span class="at">units=</span><span class="st">&quot;days&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="reverse-code-a-variable" class="section level2 hasAnchor" number="3.13">
<h2><span class="header-section-number">3.13</span> Reverse-code a variable<a href="wrangle-data.html#reverse-code-a-variable" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To reverse-score a variable, you should use <code>car::recode()</code> Can be done a few different ways, depending on how many variables you’re looking to recode:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="wrangle-data.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode just one variable</span></span>
<span id="cb70-2"><a href="wrangle-data.html#cb70-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>column<span class="ot">=</span><span class="fu">recode</span>(df<span class="sc">$</span>column,<span class="st">&quot;1 = 7 ; 2 = 6 ; 3 = 5 ; 5 = 3 ; 6 = 2 ; 7 = 1&quot;</span>)</span>
<span id="cb70-3"><a href="wrangle-data.html#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="wrangle-data.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode a select bunch of variables</span></span>
<span id="cb70-5"><a href="wrangle-data.html#cb70-5" aria-hidden="true" tabindex="-1"></a>df<span class="ot">=</span>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(family_close <span class="sc">:</span> family_feelings), recode, <span class="st">&quot;1 = 7 ; 2 = 6 ; 3 = 5 ; 5 = 3 ; 6 = 2 ; 7 = 1&quot;</span>))</span></code></pre></div>
</div>
<div id="dummy-coding-the-very-fast-and-easy-way" class="section level2 hasAnchor" number="3.14">
<h2><span class="header-section-number">3.14</span> Dummy coding (the very fast and easy way)<a href="wrangle-data.html#dummy-coding-the-very-fast-and-easy-way" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use dplyr’s <code>pivot_wider</code> in conjunction with <code>mutate</code> to very quickly and automatically dummy code a column with any number of unique values. The middle part of the code below is what you need…just copy and paste it, and tweak the specifics</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="wrangle-data.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb71-2"><a href="wrangle-data.html#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="wrangle-data.html#cb71-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> </span>
<span id="cb71-4"><a href="wrangle-data.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">car=</span><span class="fu">rownames</span>(mtcars)) <span class="sc">|&gt;</span> </span>
<span id="cb71-5"><a href="wrangle-data.html#cb71-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb71-6"><a href="wrangle-data.html#cb71-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">n=</span><span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb71-7"><a href="wrangle-data.html#cb71-7" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> cyl,</span>
<span id="cb71-8"><a href="wrangle-data.html#cb71-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n,</span>
<span id="cb71-9"><a href="wrangle-data.html#cb71-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;number_cyl&quot;</span>,</span>
<span id="cb71-10"><a href="wrangle-data.html#cb71-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n=</span><span class="dv">0</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb71-11"><a href="wrangle-data.html#cb71-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb71-12"><a href="wrangle-data.html#cb71-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(car, <span class="fu">starts_with</span>(<span class="st">&quot;number_&quot;</span>)) <span class="sc">|&gt;</span> <span class="fu">head</span>() <span class="co">#truncate output for easier reading</span></span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   car               number_cyl6 number_cyl4 number_cyl8
##   &lt;chr&gt;                   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 Mazda RX4                   1           0           0
## 2 Mazda RX4 Wag               1           0           0
## 3 Datsun 710                  0           1           0
## 4 Hornet 4 Drive              1           0           0
## 5 Hornet Sportabout           0           0           1
## 6 Valiant                     1           0           0</code></pre>
</div>
<div id="create-a-relative-ranking-among-several-variables" class="section level2 hasAnchor" number="3.15">
<h2><span class="header-section-number">3.15</span> Create a relative ranking among several variables<a href="wrangle-data.html#create-a-relative-ranking-among-several-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you want to create a variable that is an ordinal ranking of other variables, first you need to make sure your data is long-wise. Then, depending on the type of ranking system you want, you’ll might need a different ranking command….</p>
<ul>
<li><p>The <code>min_rank</code> command from dplyr works in a manner similar to base R’s <code>rank</code> command. It ranks things like you see in sporting events. For example, if there is a clear winner in a game but 3 people tie for second place, the ranks would look like this: 1,2,2,2,4,5. Notice that the positions are independent from the counts.</p></li>
<li><p>Using the same example from above, if you want the ranks to have no gaps (i.e. 1,2,2,2,3,4), you need to use dplyr’s <code>dense_rank</code> command.</p></li>
<li><p>In either case, the ranks are generated from lowest to highest, so if you want to flip them around you’ll need to include <code>desc()</code> in the command.</p></li>
</ul>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="wrangle-data.html#cb73-1" aria-hidden="true" tabindex="-1"></a>dat<span class="ot">=</span>tibble<span class="sc">::</span><span class="fu">tribble</span>(<span class="sc">~</span>name, <span class="sc">~</span>score,</span>
<span id="cb73-2"><a href="wrangle-data.html#cb73-2" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;bob&quot;</span>, <span class="dv">0</span>,</span>
<span id="cb73-3"><a href="wrangle-data.html#cb73-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;bob&quot;</span>, <span class="dv">5</span>,</span>
<span id="cb73-4"><a href="wrangle-data.html#cb73-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;bob&quot;</span>, <span class="dv">50</span>,</span>
<span id="cb73-5"><a href="wrangle-data.html#cb73-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;bob&quot;</span>, <span class="dv">50</span>,</span>
<span id="cb73-6"><a href="wrangle-data.html#cb73-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;bob&quot;</span>, <span class="dv">50</span>,</span>
<span id="cb73-7"><a href="wrangle-data.html#cb73-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;bob&quot;</span>, <span class="cn">NA</span>,</span>
<span id="cb73-8"><a href="wrangle-data.html#cb73-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;alice&quot;</span>, <span class="dv">70</span>,</span>
<span id="cb73-9"><a href="wrangle-data.html#cb73-9" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;alice&quot;</span>, <span class="dv">80</span>,</span>
<span id="cb73-10"><a href="wrangle-data.html#cb73-10" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;alice&quot;</span>, <span class="dv">90</span>,</span>
<span id="cb73-11"><a href="wrangle-data.html#cb73-11" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;alice&quot;</span>, <span class="dv">20</span>,</span>
<span id="cb73-12"><a href="wrangle-data.html#cb73-12" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;alice&quot;</span>, <span class="dv">20</span>,</span>
<span id="cb73-13"><a href="wrangle-data.html#cb73-13" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;alice&quot;</span>, <span class="dv">1</span>)</span>
<span id="cb73-14"><a href="wrangle-data.html#cb73-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-15"><a href="wrangle-data.html#cb73-15" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">ranked =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(score)))</span></code></pre></div>
<pre><code>## # A tibble: 12 x 3
##    name  score ranked
##    &lt;chr&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 bob       0      8
##  2 bob       5      6
##  3 bob      50      4
##  4 bob      50      4
##  5 bob      50      4
##  6 bob      NA     NA
##  7 alice    70      3
##  8 alice    80      2
##  9 alice    90      1
## 10 alice    20      5
## 11 alice    20      5
## 12 alice     1      7</code></pre>
</div>
<div id="manipulating-the-working-environment-and-many-things-at-once" class="section level2 hasAnchor" number="3.16">
<h2><span class="header-section-number">3.16</span> Manipulating the working environment and many things at once<a href="wrangle-data.html#manipulating-the-working-environment-and-many-things-at-once" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="stuff-the-whole-working-environment-into-a-list" class="section level3 hasAnchor" number="3.16.1">
<h3><span class="header-section-number">3.16.1</span> Stuff the WHOLE working environment into a list<a href="wrangle-data.html#stuff-the-whole-working-environment-into-a-list" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="wrangle-data.html#cb75-1" aria-hidden="true" tabindex="-1"></a>files<span class="ot">=</span><span class="fu">mget</span>(<span class="fu">ls</span>())</span></code></pre></div>
</div>
<div id="extract-everything-from-a-list-into-the-environment" class="section level3 hasAnchor" number="3.16.2">
<h3><span class="header-section-number">3.16.2</span> Extract everything from a list into the environment<a href="wrangle-data.html#extract-everything-from-a-list-into-the-environment" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="wrangle-data.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list2env</span>(cog_data, <span class="fu">globalenv</span>())</span></code></pre></div>
</div>
<div id="delete-everything-in-the-entire-environment-except-for-one-item" class="section level3 hasAnchor" number="3.16.3">
<h3><span class="header-section-number">3.16.3</span> Delete everything in the entire environment, except for one item<a href="wrangle-data.html#delete-everything-in-the-entire-environment-except-for-one-item" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="wrangle-data.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">setdiff</span>(<span class="fu">ls</span>(), <span class="st">&quot;cog_data&quot;</span>)) <span class="co"># delete everything in the local environment except the final data set</span></span></code></pre></div>
</div>
</div>
<div id="wrangling-lists" class="section level2 hasAnchor" number="3.17">
<h2><span class="header-section-number">3.17</span> Wrangling Lists<a href="wrangle-data.html#wrangling-lists" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="nesting" class="section level3 hasAnchor" number="3.17.1">
<h3><span class="header-section-number">3.17.1</span> Nesting<a href="wrangle-data.html#nesting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Imagine the concept of Russian Dolls, applied to data sets. You can manage data sets more effectively my collapsing them into a single tiny, mini data frame, and stuffing that inside of another one. This is done via “nesting”…</p>
<p>Effectively, you smush/collapse everything down so it fits inside one column. You can unnest to expand this data back out later when you need it, and keep it collapsed when you don’t. This works because a vector/column in a data frame <em>is</em> a list of a defined length; and a data frame is thus simply a collection of lists that are all the same length.</p>
<ul>
<li><p>You can store anything in a data frame. You can keep the df connected to the model, which makes it very easy to manage a whole slew of related models</p></li>
<li><p>You can use functional programming (i.e., iterative functions) to map functions or combinations of functions in new ways. Moreover and more importantly, when you use <code>purrr</code> to map functions onto multiple models or objects simultaneously, you’re doing it to all of them at once with a single command, and the objects are kept together while you do it. This limits the mistakes you can make (e.g., copying and pasting code and forgetting to tweak something important; applying a function to the wrong object or set of objects by accident), and also reduces unnecessary code in your script.</p></li>
<li><p>Converting data into tidy data sets gives you a whole new way (and easier way) to manage lots of information</p></li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="wrangle-data.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars <span class="sc">|&gt;</span> <span class="fu">nest</span>(<span class="at">crap=</span>vs<span class="sc">:</span>carb))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 8
##     mpg   cyl  disp    hp  drat    wt  qsec crap            
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;          
## 1  21       6   160   110  3.9   2.62  16.5 &lt;tibble [1 x 4]&gt;
## 2  21       6   160   110  3.9   2.88  17.0 &lt;tibble [1 x 4]&gt;
## 3  22.8     4   108    93  3.85  2.32  18.6 &lt;tibble [1 x 4]&gt;
## 4  21.4     6   258   110  3.08  3.22  19.4 &lt;tibble [1 x 4]&gt;
## 5  18.7     8   360   175  3.15  3.44  17.0 &lt;tibble [1 x 4]&gt;
## 6  18.1     6   225   105  2.76  3.46  20.2 &lt;tibble [1 x 4]&gt;</code></pre>
</div>
<div id="combiningcollapsing-list-levels-reducing" class="section level3 hasAnchor" number="3.17.2">
<h3><span class="header-section-number">3.17.2</span> Combining/collapsing list levels (Reducing)<a href="wrangle-data.html#combiningcollapsing-list-levels-reducing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="wrangle-data.html#cb80-1" aria-hidden="true" tabindex="-1"></a>demo_vars<span class="ot">=</span>files <span class="sc">|&gt;</span> </span>
<span id="cb80-2"><a href="wrangle-data.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(import_spss) <span class="sc">|&gt;</span> </span>
<span id="cb80-3"><a href="wrangle-data.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reduce</span>(left_join, <span class="at">by=</span><span class="st">&quot;catieid&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-r-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="clean-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/edit/master/03-wrangle.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ryan-a-schneider/coding_compendium/blob/master/03-wrangle.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
