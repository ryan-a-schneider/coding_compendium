--- 
title: "R Coding Compendium"
author: "Ryan Schneider"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
---

# A Monument to my Madness

This book contains all my personal coding notes from the last two years. Why am I doing this? Probably because I'm a glutton for punishment, and I'd rather procrastinate than write my dissertation proposal.


<!--chapter:end:index.Rmd-->

# Introduction: R Basics

There are lots of things you can do with base R commands, but this notebook focuses on the tidyverse. These packages (below) improve on almost every single aspect of base R's functioning, and make different tasks far easier, more code efficient, and faster. 



readr for example, replaces the base read.xyz commands and greatly enhances functionality for reading in data.
The forcats package makes manipulating factors a breeze, and stringr makes searching through and manipulating vectors of strings super easy. Purrr is for semi-advanced uses (e.g. For loops) that you probably won't use early on, but will be essential and invaluable if you have some iterative or repetitive code or task you want to perform. Tidyr is amazing for getting clean datasets upon import.

Let's get stuckin'

```{r}
library(tidyverse)
```


<!--chapter:end:02-basics.Rmd-->

# Wrangle Data

This chapter contains useful tips on wrangling (i.e., manipulating) data. If you need to know to do to things like create new variables, split one variable into multiple variables, pivot a data set from wide to long, etc., look no further.

## Joining or Splitting

Joining and splitting data is pretty straightforward....

### Data

The code below is from [this excellent tutorial](https://www.youtube.com/watch?v=SCdmyyoudb8&t=23s)

```{r}
set.seed(2018)

df1=data.frame(customer_id=c(1:10),
               product=sample(c('toaster','TV','Dishwasher'),10,replace = TRUE))


df2=data.frame(customer_id=c(sample(df1$customer_id, 5)),state=sample(c('New York','California'),5,replace = TRUE))

df1=tibble::as_tibble(df1)
df2=tibble::as_tibble(df2)

# df1 =left table
# df2= right table

# inner join - retains only rows with values that appear in both tables, and matches by keys
df1 %>% inner_join(df2,by='customer_id')

# If you're joining two Qualtrics surveys together, this is most likely the one you want to use (e.g. matching by participant name, and only keeping rows in the joined data set for participants that have responses logged in both survey 1 and survey 2

# left join - returns everything in the left, and rows with matching keys in the right
df1 %>% left_join(df2,by='customer_id')

# right join - returns everything in the right, and rows with matching keys in the left
df1 %>% right_join(df2,by='customer_id')


    # note: example if the customer id column was named something different in the second df
    df1 %>% left_join(df2,by=c('customer_id'='name2'))


#full join - retain all rows from both tables, and join matching keys in both right and left
df1 %>% full_join(df2,by='customer_id')

# anti join - returns all rows in the left that do not have matching keys in the right
df1 %>% anti_join(df2,by='customer_id')

```


### Individual Columns/Variables

Splitting or joining columns is much easier than doing it to whole data sets. You can use `dplyr::separate()` to accomplish the former, and `dplyr::unite()` for the latter.

```{r}
print("hello")
```


## Selecting specific columns/variables

Sometimes when working with a data set, you want to work with a few *specific* variables. For instance, maybe you want to view a graph of only reverse-coded variables (which start with the prefix "r"); or maybe you want to create a subset of your data that has a few specific variables removed. For this you can use `dplyr::select()` and its associated helper commands

`select()` can be thought of as "extract"; it tells R to identify and "extract" a specific variable (or variables)


```{r}
cars=mtcars

# select one column
cars %>% select(mpg)

# select multiple columns, if they are all next to one another
cars %>% select(mpg:hp)

# select multiple columns by name (when not next to one another)
cars %>% select(c(mpg, hp, wt))
```


If you need to do some more complex selection (e.g., select all variables that start or end with a certain pattern; all columns that contain a certain pattern; etc.), see [THIS LINK](https://tidyselect.r-lib.org/reference/language.html) for a simple but detailed guide.



## If-then and Case-when

```{r}
"hello"
```



<!--chapter:end:03-wrangle.Rmd-->

# The pool of tears


<!--chapter:end:04-clean.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:05-factors.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:06-strings.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:07-ggplot.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:08-tables.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:09-misc.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:10-functions.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:11-markdown.Rmd-->

# A caucus-race and a long tale

<!--chapter:end:12-stats.Rmd-->

