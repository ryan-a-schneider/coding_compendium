# Statistics and Psych-specific Stuff


## Create or sample from a distribution

*Creating a binomial distribution*

When you do this, you are setting the true population parameter; you are in control of the Data Generating Process and the true distribution

In a binomial distribution, the parameter is normally distributed, and can take any value from 0.0 to 1.0
But the data that this process generates is not normal
```{r chapter_12}
rbinom(n= 1000, size= 1, prob =  0.5)

rnorm(n=2500,mean=500, sd=100)
```


## Find Cohen's Kappa (Interrater reliability)

Useful for IRR agreement on categorical variables

Going to use the `psych` package for this:
https://www.rdocumentation.org/packages/psych/versions/2.1.6/topics/cohen.kappa

See [here](https://www.statisticshowto.com/cohens-kappa-statistic/) for an overview of what Cohen's Kappa is if you need a recap/intro.


## Statistical tests and modeling with `easystats`

https://easystats.github.io/easystats/

### Getting parameter estimates from model objects

Scenario: You've run some statistical test (like the below regression), and want a summary of the model estimates.
```{r 12_model}
model <- lm(Sepal.Length ~ Species, data = iris)
```

You have a few options when it comes to getting a summary of a model and getting the coefficient estimates:
- `summary()`
- `broom::tidy()`
- `paramters::model_paramters()`, or just `paramters::paramters()` for short

*There's no reason to use `summary`, generally speaking, because it sucks. It doesn't give you tidy output that's easy to manipulate or extract, it's hard to read, and it can't be turned into a useful table. Skip it unless you need something specific from it's output (i.e., you're using lavaan)*

Options two and three are pretty similar and both give you most of the same information, though `parameters()` prints neater to the console window. Generally I find `parameters` preferable.

Note though that *neither command* will round the numbers if you store it as a table in the environment. So....

1. If you want to manipulate ANY info in the table and/or extract info, just use `tidy` or `parameters`.
2. If you're using the command to export said info in a neat table, or you want to view it in a more readable fashion and *do not care about extracting/modifying/manipulating anything in it*, then use `parameters` and pipe it to `format_table()`

Using `format_table()` rounds all columns to 2 decimal places, reformats p-values to APA format, and collapses CI's into a single column. Do note though that it makes every column into a Character column! So this is for exporting-use only.

Here's a comparison of broom's output (first) vs. parameter's (second) when you save each in the environment. As you can see, both produce tidy tibbles

```{r 12_pic1, echo=FALSE}
knitr::include_graphics(here::here("pics", "tidy.png"))
```

```{r 12_pic2, echo=FALSE}
knitr::include_graphics(here::here("pics", "parameters.png"))
```
And here's what `parameters(model) |> format_table()` does to the a parameters table:

```{r 12_pic3, echo=FALSE}
knitr::include_graphics(here::here("pics", "format_table.png"))
```
Much cleaner for making a table to export to Word.


### Getting model information and performance metrics

Again, two options here. You can use either `glance` from the broom package, or `performance` from the package of the same name. These each produce slightly different output, though unlike above, I don't think one is necessarily better than the other. Use whichever one you prefer.

```{r 12_broomdemo}
broom::glance(model)
```

```{r 12_perfdemo}
performance::performance(model)
```


### Effect size info with `effectsize`

```{r 12_effectsizedemo}
logreg_model=glm(smoke ~ age + sex, data= legaldmlab::survey, family = "binomial")
logreg_model_coeff=parameters::parameters(logreg_model)
logreg_model_coeff=logreg_model_coeff |> dplyr::mutate(odds_ratio=exp(Coefficient))
  
effectsize::interpret_oddsratio(logreg_model_coeff$odds_ratio, rules = "chen2010")
```


### Quick, detailed, and automated reporting with `report`
Check out https://easystats.github.io/report/

### Running correlations with `correlation`
https://easystats.github.io/correlation/

